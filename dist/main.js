(()=>{"use strict";class e{constructor(e){this.projectName=e,this.task=[]}addTask(e){this.task.push(e)}displayTask(e){console.log(this.task[e-1])}getDescription(){return this.task.map((e=>e.description))}getPrio(){return this.task.map((e=>e.priority))}getDueDate(){return this.task.map((e=>e.dueDate))}getID(){return console.log(this.task.map((e=>e.id)))}}function t(e,t){let n=JSON.parse(localStorage.getItem("Projects"))||[];for(let o=0;o<n.length;o++)if(n[o].projectName===t.projectName){const t=n[o].task.findIndex((t=>t.id===e.id));-1!==t?(n[o].task.splice(t,1),console.log("Updated tasks:",n[o].task)):console.log("Task not found:",e)}else console.log("No match for:",t.projectName);localStorage.setItem("Projects",JSON.stringify(n))}function n(e,t,n){let o=JSON.parse(localStorage.getItem("Projects"))||[];for(let a=0;a<o.length;a++)o[a].projectName===t.projectName?-1!==o[a].task.findIndex((t=>t.id===e.id))&&(o[a].task.description=n,console.log("Updated tasks:",o[a].task)):console.log("No match for:",t.projectName);localStorage.setItem("Projects",JSON.stringify(o))}function o(e){let o=0,a=0;const i=document.createElement("div"),c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("name","setProperty"),c.setAttribute("id","setProperty");const s=document.createElement("label");s.setAttribute("for","setProperty"),s.innerHTML="Task Name:",i.classList.add("taskDiv");const r=document.createElement("select");r.setAttribute("name","setPrio"),r.setAttribute("id","setPrio");const l=document.createElement("option");l.setAttribute("value","high");const d=document.createTextNode("High"),p=document.createElement("option");p.setAttribute("value","medium");const m=document.createTextNode("Medium"),u=document.createElement("option");u.setAttribute("value","low");const g=document.createTextNode("Low");l.appendChild(d),p.appendChild(m),u.appendChild(g),r.appendChild(l),r.appendChild(p),r.appendChild(u);const h=document.createElement("label");h.setAttribute("for","setPrio"),h.innerHTML="Add Priority";const k=document.createElement("input");k.setAttribute("type","date"),k.setAttribute("name","taskDueDate"),k.setAttribute("id","taskDueDate"),k.setAttribute("required","");const j=document.createElement("label");j.setAttribute("for","taskDueDate"),j.innerHTML="Due: ";const N=document.createElement("button");N.innerHTML="add";const E=document.createElement("div");return E.classList.add("taskOptions"),N.addEventListener("click",(()=>{const s=c.value,l=r.value,d=k.value;e.addTask({description:s,priority:l,dueDate:d,id:o++}),a++,function(e,t){let n=JSON.parse(localStorage.getItem("Projects"))||[];for(let o=0;o<n.length;o++)n[o].projectName===t.projectName?n[o].task=e:console.log("we dont match");localStorage.setItem("Projects",JSON.stringify(n))}(e.task,e);const p=document.createElement("div");p.classList.add("currentTasks"),p.setAttribute("data-id",a-1),c.value="",console.log(e);const m=p.dataset.id;console.log(m+"for currenttaskDiv"),p.innerHTML=`Task name: ${e.getDescription()[e.task.length-1]},\n             priority: ${e.getPrio()[e.task.length-1]},\n             it is due till ${e.getDueDate()[e.task.length-1]}`;const u=document.createElement("button");u.innerHTML="Mark as complete",u.addEventListener("click",(()=>{for(let t=0;t<e.task.length;t++)e.task[t].id==m&&(p.classList.contains("complete")?p.classList.remove("complete"):p.classList.add("complete"))}));const g=document.createElement("button");g.classList.add("deleteTask"),g.innerHTML="Delete Task",g.addEventListener("click",(()=>{for(let n=0;n<e.task.length;n++)e.task[n].id==m&&(t(e.task[n],e),e.task.splice(n,1),p.innerHTML=`Task name: ${e.getDescription()[n]},\n                     priority: ${e.getPrio()[n]},\n                     it is due till ${e.getDueDate()[n]}`);i.removeChild(p)}));const h=document.createElement("button");h.innerHTML="Edit Name",h.addEventListener("click",(()=>{let t=prompt("New Task name:");for(let o=0;o<e.task.length;o++)e.task[o].id==m&&(n(e.task[o],e,t),e.task[o].description=t,p.innerHTML=`Task name: ${e.getDescription()[o]},\n                     priority: ${e.getPrio()[o]},\n                     it is due till ${e.getDueDate()[o]}`);console.log(e),p.appendChild(u),p.appendChild(h),p.appendChild(g)})),i.appendChild(p),p.appendChild(u),p.appendChild(h),p.appendChild(g)})),E.appendChild(s),E.appendChild(c),E.appendChild(h),E.appendChild(r),E.appendChild(j),E.appendChild(k),E.appendChild(N),i.appendChild(E),i}const a=document.getElementById("content"),i=document.getElementById("projectName");document.getElementById("submit").addEventListener("click",(()=>{const t=document.createElement("div");t.setAttribute("id","projectNameDiv");const n=document.createElement("div");n.setAttribute("id","projectHeadline");const c=document.createElement("h3");let s=i.value,r=new e(s);c.innerHTML=`Project name: ${s}`;const l=o(r),d=document.createElement("button");d.innerHTML="Delete Project";const p=document.createElement("button");p.innerHTML="Edit Project",!1===function(e){let t=JSON.parse(localStorage.getItem("Projects"))||[];return t.find((t=>t.projectName===e.projectName))?(alert("Names are the same"),!0):(t.push(e),localStorage.setItem("Projects",JSON.stringify(t)),console.log("Project added successfully"),!1)}(r)&&a.appendChild(t),t.appendChild(n),n.appendChild(c),n.appendChild(d),n.appendChild(p),t.appendChild(l),d.addEventListener("click",(()=>{a.removeChild(t),function(e){const t=JSON.parse(localStorage.getItem("Projects"))||[];console.log(JSON.stringify(t)),console.log(t.length);for(let n=0;n<t.length;n++)t[n].projectName===e.projectName&&(console.log("deleting this"),t.splice(n,1),localStorage.setItem("Projects",JSON.stringify(t)),console.log(t))}(r)})),p.addEventListener("click",(()=>{let e=prompt("enter new project name:");!function(e,t){const n=JSON.parse(localStorage.getItem("Projects"))||[];for(let o=0;o<n.length;o++)n[o].projectName===e.projectName&&(n[o].projectName=t,console.log(n[o].projectName),localStorage.setItem("Projects",JSON.stringify(n)))}(r,e),console.log(e),s=e,r.projectName=s,c.innerHTML=`Project name is: ${s}`,c.appendChild(d),c.appendChild(p)})),i.value="",console.log(r)})),window.onload=function(){!function(e){const t=document.createElement("div");t.setAttribute("id","projectNameDiv");const n=document.createElement("div");n.setAttribute("id","projectHeadline");const i=document.createElement("h3");i.innerHTML=`Project name is: ${e.projectName}`;const c=o(e),s=document.createElement("button");s.innerHTML="Delete Project";const r=document.createElement("button");r.innerHTML="Edit Project",a.appendChild(t),t.appendChild(n),n.appendChild(i),n.appendChild(s),n.appendChild(r),t.appendChild(c),s.addEventListener("click",(()=>{a.removeChild(t)})),r.addEventListener("click",(()=>{let t=prompt("Enter new project name:");console.log(t),e.projectName=t,i.innerHTML=`Project name is: ${t}`,i.appendChild(s),i.appendChild(r)}))}(new e("Default Project"))}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQU8sTUFBTUEsRUFDVCxXQUFBQyxDQUFZQyxHQUNSQyxLQUFLRCxZQUFjQSxFQUNuQkMsS0FBS0MsS0FBTyxFQUNoQixDQUVBLE9BQUFDLENBQVFDLEdBQ0pILEtBQUtDLEtBQUtHLEtBQUtELEVBQ25CLENBRUEsV0FBQUUsQ0FBWUMsR0FDUkMsUUFBUUMsSUFBSVIsS0FBS0MsS0FBS0ssRUFBTSxHQUNoQyxDQUVBLGNBQUFHLEdBQ0ksT0FBT1QsS0FBS0MsS0FBS1MsS0FBSVQsR0FBUUEsRUFBS1UsYUFDdEMsQ0FFQSxPQUFBQyxHQUNJLE9BQU9aLEtBQUtDLEtBQUtTLEtBQUlULEdBQVFBLEVBQUtZLFVBQ3RDLENBRUEsVUFBQUMsR0FDSSxPQUFPZCxLQUFLQyxLQUFLUyxLQUFJVCxHQUFRQSxFQUFLYyxTQUN0QyxDQUVBLEtBQUFDLEdBQ0ksT0FBT1QsUUFBUUMsSUFBSVIsS0FBS0MsS0FBS1MsS0FBSVQsR0FBUUEsRUFBS2dCLEtBQ3RELEVDcUNPLFNBQVNDLEVBQVdDLEVBQWNwQixHQUNyQyxJQUFJcUIsRUFBbUJDLEtBQUtDLE1BQU1DLGFBQWFDLFFBQVEsY0FBZ0IsR0FFdkUsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlMLEVBQWlCTSxPQUFRRCxJQUN6QyxHQUFJTCxFQUFpQkssR0FBRzFCLGNBQWdCQSxFQUFZQSxZQUFhLENBRTdELE1BQU00QixFQUFnQlAsRUFBaUJLLEdBQUd4QixLQUFLMkIsV0FBVTNCLEdBQVFBLEVBQUtnQixLQUFPRSxFQUFhRixNQUduRSxJQUFuQlUsR0FDQVAsRUFBaUJLLEdBQUd4QixLQUFLNEIsT0FBT0YsRUFBZSxHQUMvQ3BCLFFBQVFDLElBQUksaUJBQWtCWSxFQUFpQkssR0FBR3hCLE9BRWxETSxRQUFRQyxJQUFJLGtCQUFtQlcsRUFFdkMsTUFDSVosUUFBUUMsSUFBSSxnQkFBaUJULEVBQVlBLGFBS2pEd0IsYUFBYU8sUUFBUSxXQUFZVCxLQUFLVSxVQUFVWCxHQUNwRCxDQUVPLFNBQVNZLEVBQWVDLEVBQWNsQyxFQUFhbUMsR0FDdEQsSUFBSWQsRUFBbUJDLEtBQUtDLE1BQU1DLGFBQWFDLFFBQVEsY0FBZ0IsR0FFdkUsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlMLEVBQWlCTSxPQUFRRCxJQUNyQ0wsRUFBaUJLLEdBQUcxQixjQUFnQkEsRUFBWUEsYUFLekIsSUFIRHFCLEVBQWlCSyxHQUFHeEIsS0FBSzJCLFdBQVUzQixHQUFRQSxFQUFLZ0IsS0FBT2dCLEVBQWFoQixPQUl0RkcsRUFBaUJLLEdBQUd4QixLQUFLVSxZQUFjdUIsRUFDdkMzQixRQUFRQyxJQUFJLGlCQUFrQlksRUFBaUJLLEdBQUd4QixPQUt0RE0sUUFBUUMsSUFBSSxnQkFBaUJULEVBQVlBLGFBS2pEd0IsYUFBYU8sUUFBUSxXQUFZVCxLQUFLVSxVQUFVWCxHQUVwRCxDQzlHTyxTQUFTZSxFQUFXQyxHQUN2QixJQUFJQyxFQUFjLEVBQ2RDLEVBQWMsRUFFbEIsTUFBTUMsRUFBVUMsU0FBU0MsY0FBYyxPQUdqQ0MsRUFBY0YsU0FBU0MsY0FBYyxTQUMzQ0MsRUFBWUMsYUFBYSxPQUFRLFFBQ2pDRCxFQUFZQyxhQUFhLE9BQVEsZUFDakNELEVBQVlDLGFBQWEsS0FBTSxlQUUvQixNQUFNQyxFQUFXSixTQUFTQyxjQUFjLFNBQ3hDRyxFQUFTRCxhQUFhLE1BQU8sZUFDN0JDLEVBQVNDLFVBQVksYUFFckJOLEVBQVFPLFVBQVVDLElBQUksV0FHdEIsTUFBTUMsRUFBY1IsU0FBU0MsY0FBYyxVQUMzQ08sRUFBWUwsYUFBYSxPQUFRLFdBQ2pDSyxFQUFZTCxhQUFhLEtBQU0sV0FFL0IsTUFBTU0sRUFBY1QsU0FBU0MsY0FBYyxVQUMzQ1EsRUFBWU4sYUFBYSxRQUFTLFFBQ2xDLE1BQU1PLEVBQWtCVixTQUFTVyxlQUFlLFFBRTFDQyxFQUFhWixTQUFTQyxjQUFjLFVBQzFDVyxFQUFXVCxhQUFhLFFBQVMsVUFDakMsTUFBTVUsRUFBaUJiLFNBQVNXLGVBQWUsVUFFekNHLEVBQWFkLFNBQVNDLGNBQWMsVUFDMUNhLEVBQVdYLGFBQWEsUUFBUyxPQUNqQyxNQUFNWSxFQUFpQmYsU0FBU1csZUFBZSxPQUUvQ0YsRUFBWU8sWUFBWU4sR0FDeEJFLEVBQVdJLFlBQVlILEdBQ3ZCQyxFQUFXRSxZQUFZRCxHQUN2QlAsRUFBWVEsWUFBWVAsR0FDeEJELEVBQVlRLFlBQVlKLEdBQ3hCSixFQUFZUSxZQUFZRixHQUV4QixNQUFNRyxFQUFlakIsU0FBU0MsY0FBYyxTQUM1Q2dCLEVBQWFkLGFBQWEsTUFBTyxXQUNqQ2MsRUFBYVosVUFBWSxlQUd6QixNQUFNYSxFQUFxQmxCLFNBQVNDLGNBQWMsU0FDbERpQixFQUFtQmYsYUFBYSxPQUFRLFFBQ3hDZSxFQUFtQmYsYUFBYSxPQUFRLGVBQ3hDZSxFQUFtQmYsYUFBYSxLQUFNLGVBQ3RDZSxFQUFtQmYsYUFBYSxXQUFZLElBRTVDLE1BQU1nQixFQUFzQm5CLFNBQVNDLGNBQWMsU0FDbkRrQixFQUFvQmhCLGFBQWEsTUFBTyxlQUN4Q2dCLEVBQW9CZCxVQUFZLFFBR2hDLE1BQU1lLEVBQVlwQixTQUFTQyxjQUFjLFVBQ3pDbUIsRUFBVWYsVUFBWSxNQUd0QixNQUFNZ0IsRUFBaUJyQixTQUFTQyxjQUFjLE9BdUg5QyxPQXRIQW9CLEVBQWVmLFVBQVVDLElBQUksZUFHN0JhLEVBQVVFLGlCQUFpQixTQUFTLEtBQ2hDLE1BQU1DLEVBQVlyQixFQUFZc0IsTUFDeEJDLEVBQVlqQixFQUFZZ0IsTUFDeEJFLEVBQWVSLEVBQW1CTSxNQU12QzVCLEVBQWlCbEMsUUFBUSxDQUN0QlMsWUFBYW9ELEVBQ2JsRCxTQUFVb0QsRUFDVmxELFFBQVNtRCxFQUNUakQsR0FBSW9CLE1BRVJDLElEaENELFNBQW9CNkIsRUFBV3BFLEdBQ2xDLElBQUlxQixFQUFtQkMsS0FBS0MsTUFBTUMsYUFBYUMsUUFBUSxjQUFnQixHQUV0RSxJQUFJLElBQUlDLEVBQUksRUFBR0EsRUFBSUwsRUFBaUJNLE9BQVFELElBQ3JDTCxFQUFpQkssR0FBRzFCLGNBQWdCQSxFQUFZQSxZQUNoRHFCLEVBQWlCSyxHQUFHeEIsS0FBT2tFLEVBRTFCNUQsUUFBUUMsSUFBSSxpQkFHcEJlLGFBQWFPLFFBQVEsV0FBWVQsS0FBS1UsVUFBVVgsR0FDckQsQ0NzQlFnRCxDQUFXaEMsRUFBaUJuQyxLQUFNbUMsR0FHbEMsTUFBTWlDLEVBQWtCN0IsU0FBU0MsY0FBYyxPQUMvQzRCLEVBQWdCdkIsVUFBVUMsSUFBSSxnQkFDOUJzQixFQUFnQjFCLGFBQWEsVUFBV0wsRUFBYSxHQUVyREksRUFBWXNCLE1BQVEsR0FDcEJ6RCxRQUFRQyxJQUFJNEIsR0FFWixNQUFNa0MsRUFBZUQsRUFBZ0JFLFFBQVF0RCxHQUU3Q1YsUUFBUUMsSUFBSThELEVBQWUsc0JBQzNCRCxFQUFnQnhCLFVBQ1osY0FBY1QsRUFBaUIzQixpQkFBaUIyQixFQUFpQm5DLEtBQUt5QixPQUFRLCtCQUNqRVUsRUFBaUJ4QixVQUFVd0IsRUFBaUJuQyxLQUFLeUIsT0FBUSxvQ0FDcERVLEVBQWlCdEIsYUFBYXNCLEVBQWlCbkMsS0FBS3lCLE9BQVEsS0FJbEYsTUFBTThDLEVBQWlCaEMsU0FBU0MsY0FBYyxVQUM5QytCLEVBQWUzQixVQUFXLG1CQUUxQjJCLEVBQWVWLGlCQUFpQixTQUFTLEtBQ3JDLElBQUssSUFBSXJDLEVBQUksRUFBR0EsRUFBSVcsRUFBaUJuQyxLQUFLeUIsT0FBUUQsSUFDM0NXLEVBQWlCbkMsS0FBS3dCLEdBQUdSLElBQU1xRCxJQUMzQkQsRUFBZ0J2QixVQUFVMkIsU0FBUyxZQUNsQ0osRUFBZ0J2QixVQUFVNEIsT0FBTyxZQUVqQ0wsRUFBZ0J2QixVQUFVQyxJQUFJLFlBRzFDLElBSUosTUFBTTRCLEVBQW1CbkMsU0FBU0MsY0FBYyxVQUNoRGtDLEVBQWlCN0IsVUFBVUMsSUFBSSxjQUMvQjRCLEVBQWlCOUIsVUFBWSxjQUU3QjhCLEVBQWlCYixpQkFBaUIsU0FBUyxLQUN2QyxJQUFLLElBQUlyQyxFQUFJLEVBQUdBLEVBQUlXLEVBQWlCbkMsS0FBS3lCLE9BQVFELElBQzNDVyxFQUFpQm5DLEtBQUt3QixHQUFHUixJQUFNcUQsSUFDOUJwRCxFQUFXa0IsRUFBaUJuQyxLQUFLd0IsR0FBSVcsR0FDckNBLEVBQWlCbkMsS0FBSzRCLE9BQU9KLEVBQUUsR0FHL0I0QyxFQUFnQnhCLFVBQ2hCLGNBQWNULEVBQWlCM0IsaUJBQWlCZ0IsdUNBQ25DVyxFQUFpQnhCLFVBQVVhLDRDQUN0QlcsRUFBaUJ0QixhQUFhVyxNQUd4RGMsRUFBUXFDLFlBQVlQLEVBQ3BCLElBSUosTUFBTVEsRUFBaUJyQyxTQUFTQyxjQUFjLFVBQzlDb0MsRUFBZWhDLFVBQVksWUFFM0JnQyxFQUFlZixpQkFBaUIsU0FBUyxLQUNyQyxJQUFJZ0IsRUFBZUMsT0FBTyxrQkFFMUIsSUFBSyxJQUFJdEQsRUFBSSxFQUFHQSxFQUFJVyxFQUFpQm5DLEtBQUt5QixPQUFRRCxJQUMzQ1csRUFBaUJuQyxLQUFLd0IsR0FBR1IsSUFBTXFELElBQzlCdEMsRUFBZUksRUFBaUJuQyxLQUFLd0IsR0FBR1csRUFBaUIwQyxHQUN6RDFDLEVBQWlCbkMsS0FBS3dCLEdBQUdkLFlBQWNtRSxFQUV2Q1QsRUFBZ0J4QixVQUNoQixjQUFjVCxFQUFpQjNCLGlCQUFpQmdCLHVDQUNuQ1csRUFBaUJ4QixVQUFVYSw0Q0FDdEJXLEVBQWlCdEIsYUFBYVcsTUFLNURsQixRQUFRQyxJQUFJNEIsR0FDWmlDLEVBQWdCYixZQUFZZ0IsR0FDNUJILEVBQWdCYixZQUFZcUIsR0FDNUJSLEVBQWdCYixZQUFZbUIsRUFBaUIsSUFJN0NwQyxFQUFRaUIsWUFBWWEsR0FDcEJBLEVBQWdCYixZQUFZZ0IsR0FDNUJILEVBQWdCYixZQUFZcUIsR0FDNUJSLEVBQWdCYixZQUFZbUIsRUFBaUIsSUFHakRkLEVBQWVMLFlBQVlaLEdBQzNCaUIsRUFBZUwsWUFBWWQsR0FDM0JtQixFQUFlTCxZQUFZQyxHQUMzQkksRUFBZUwsWUFBWVIsR0FDM0JhLEVBQWVMLFlBQVlHLEdBQzNCRSxFQUFlTCxZQUFZRSxHQUMzQkcsRUFBZUwsWUFBWUksR0FDM0JyQixFQUFRaUIsWUFBWUssR0FFYnRCLENBQ1gsQ0NwTEEsTUFBTXlDLEVBQVV4QyxTQUFTeUMsZUFBZSxXQUNsQ0MsRUFBa0IxQyxTQUFTeUMsZUFBZSxlQUM5QnpDLFNBQVN5QyxlQUFlLFVBRWhDbkIsaUJBQWlCLFNBQVMsS0FFaEMsTUFBTXFCLEVBQWlCM0MsU0FBU0MsY0FBYyxPQUM5QzBDLEVBQWV4QyxhQUFhLEtBQU0sa0JBQ2xDLE1BQU15QyxFQUFxQjVDLFNBQVNDLGNBQWMsT0FDbEQyQyxFQUFtQnpDLGFBQWEsS0FBTSxtQkFDdEMsTUFBTTBDLEVBQVk3QyxTQUFTQyxjQUFjLE1BQ3pDLElBQUk2QyxFQUFZSixFQUFnQmxCLE1BQzVCNUIsRUFBbUIsSUFBSXZDLEVBQVF5RixHQUVuQ0QsRUFBVXhDLFVBQVksaUJBQWlCeUMsSUFFdkMsTUFBTS9DLEVBQVVKLEVBQVdDLEdBRXJCbUQsRUFBbUIvQyxTQUFTQyxjQUFjLFVBQ2hEOEMsRUFBaUIxQyxVQUFZLGlCQUU3QixNQUFNMkMsRUFBaUJoRCxTQUFTQyxjQUFjLFVBQzlDK0MsRUFBZTNDLFVBQVksZ0JBRVUsSUY1QmxDLFNBQXNCNEMsR0FDekIsSUFBSXJFLEVBQW1CQyxLQUFLQyxNQUFNQyxhQUFhQyxRQUFRLGNBQWdCLEdBT3ZFLE9BSndCSixFQUFpQnNFLE1BQU1DLEdBQ3BDQSxFQUFXNUYsY0FBZ0IwRixFQUFRMUYsZUFLMUM2RixNQUFNLHVCQUNDLElBR1B4RSxFQUFpQmhCLEtBQUtxRixHQUN0QmxFLGFBQWFPLFFBQVEsV0FBWVQsS0FBS1UsVUFBVVgsSUFDaERiLFFBQVFDLElBQUksK0JBQ0wsRUFFZixDRVNPcUYsQ0FBYXpELElBQ1o0QyxFQUFReEIsWUFBWTJCLEdBRXhCQSxFQUFlM0IsWUFBWTRCLEdBQzNCQSxFQUFtQjVCLFlBQVk2QixHQUMvQkQsRUFBbUI1QixZQUFZK0IsR0FDL0JILEVBQW1CNUIsWUFBWWdDLEdBQy9CTCxFQUFlM0IsWUFBWWpCLEdBRTNCZ0QsRUFBaUJ6QixpQkFBaUIsU0FBUSxLQUN0Q2tCLEVBQVFKLFlBQVlPLEdGakJyQixTQUF1QlcsR0FFMUIsTUFBTTFFLEVBQW1CQyxLQUFLQyxNQUFNQyxhQUFhQyxRQUFRLGNBQWdCLEdBQ3pFakIsUUFBUUMsSUFBSWEsS0FBS1UsVUFBVVgsSUFDM0JiLFFBQVFDLElBQUlZLEVBQWlCTSxRQUU1QixJQUFJLElBQUlELEVBQUksRUFBR0EsRUFBSUwsRUFBaUJNLE9BQVFELElBQ3JDTCxFQUFpQkssR0FBRzFCLGNBQWMrRixFQUFnQi9GLGNBQ2xEUSxRQUFRQyxJQUFJLGlCQUNaWSxFQUFpQlMsT0FBT0osRUFBRyxHQUMzQkYsYUFBYU8sUUFBUSxXQUFZVCxLQUFLVSxVQUFVWCxJQUNoRGIsUUFBUUMsSUFBSVksR0FHeEIsQ0VJUTJFLENBQWMzRCxFQUFnQixJQUdsQ29ELEVBQWUxQixpQkFBaUIsU0FBUyxLQUNyQyxJQUFJa0MsRUFBWWpCLE9BQU8sNEJGTnhCLFNBQTJCa0IsRUFBZUQsR0FDN0MsTUFBTTVFLEVBQW1CQyxLQUFLQyxNQUFNQyxhQUFhQyxRQUFRLGNBQWdCLEdBRXpFLElBQUksSUFBSUMsRUFBSSxFQUFHQSxFQUFJTCxFQUFpQk0sT0FBUUQsSUFDckNMLEVBQWlCSyxHQUFHMUIsY0FBY2tHLEVBQWNsRyxjQUMvQ3FCLEVBQWlCSyxHQUFHMUIsWUFBY2lHLEVBQ2xDekYsUUFBUUMsSUFBSVksRUFBaUJLLEdBQUcxQixhQUNoQ3dCLGFBQWFPLFFBQVEsV0FBWVQsS0FBS1UsVUFBVVgsSUFLNUQsQ0VMUThFLENBQWtCOUQsRUFBa0I0RCxHQUNwQ3pGLFFBQVFDLElBQUl3RixHQUNaVixFQUFZVSxFQUNaNUQsRUFBaUJyQyxZQUFjdUYsRUFFL0JELEVBQVV4QyxVQUFZLG9CQUFvQnlDLElBQzFDRCxFQUFVN0IsWUFBWStCLEdBQ3RCRixFQUFVN0IsWUFBWWdDLEVBQWUsSUFHekNOLEVBQWdCbEIsTUFBUSxHQUN4QnpELFFBQVFDLElBQUk0QixFQUFpQixJQUtqQytELE9BQU9DLE9BQVMsWUFLaEIsU0FBd0JYLEdBQ3BCLE1BQU1OLEVBQWlCM0MsU0FBU0MsY0FBYyxPQUM5QzBDLEVBQWV4QyxhQUFhLEtBQU0sa0JBQ2xDLE1BQU15QyxFQUFxQjVDLFNBQVNDLGNBQWMsT0FDbEQyQyxFQUFtQnpDLGFBQWEsS0FBTSxtQkFDdEMsTUFBTTBDLEVBQVk3QyxTQUFTQyxjQUFjLE1BQ3pDNEMsRUFBVXhDLFVBQVksb0JBQW9CNEMsRUFBUTFGLGNBRWxELE1BQU13QyxFQUFVSixFQUFXc0QsR0FFckJGLEVBQW1CL0MsU0FBU0MsY0FBYyxVQUNoRDhDLEVBQWlCMUMsVUFBWSxpQkFFN0IsTUFBTTJDLEVBQWlCaEQsU0FBU0MsY0FBYyxVQUM5QytDLEVBQWUzQyxVQUFZLGVBRzNCbUMsRUFBUXhCLFlBQVkyQixHQUNwQkEsRUFBZTNCLFlBQVk0QixHQUMzQkEsRUFBbUI1QixZQUFZNkIsR0FFL0JELEVBQW1CNUIsWUFBWStCLEdBQy9CSCxFQUFtQjVCLFlBQVlnQyxHQUMvQkwsRUFBZTNCLFlBQVlqQixHQUUzQmdELEVBQWlCekIsaUJBQWlCLFNBQVMsS0FDdkNrQixFQUFRSixZQUFZTyxFQUFlLElBR3ZDSyxFQUFlMUIsaUJBQWlCLFNBQVMsS0FDckMsSUFBSWtDLEVBQVlqQixPQUFPLDJCQUN2QnhFLFFBQVFDLElBQUl3RixHQUNaUCxFQUFRMUYsWUFBY2lHLEVBQ3RCWCxFQUFVeEMsVUFBWSxvQkFBb0JtRCxJQUMxQ1gsRUFBVTdCLFlBQVkrQixHQUN0QkYsRUFBVTdCLFlBQVlnQyxFQUFlLEdBRTdDLENBeENJYSxDQUR1QixJQUFJeEcsRUFBUSxtQkFFdkMsQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tdG9wLy4vc3JjL2NvbnN0cnVjdG9yLmpzIiwid2VicGFjazovL3RvZG8tdG9wLy4vc3JjL3N0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vdG9kby10b3AvLi9zcmMvdGFza3MuanMiLCJ3ZWJwYWNrOi8vdG9kby10b3AvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFByb2plY3Qge1xuICAgIGNvbnN0cnVjdG9yKHByb2plY3ROYW1lKXtcbiAgICAgICAgdGhpcy5wcm9qZWN0TmFtZSA9IHByb2plY3ROYW1lO1xuICAgICAgICB0aGlzLnRhc2sgPSBbXTtcbiAgICB9XG5cbiAgICBhZGRUYXNrKG5ld1Rhc2spe1xuICAgICAgICB0aGlzLnRhc2sucHVzaChuZXdUYXNrKTtcbiAgICB9XG5cbiAgICBkaXNwbGF5VGFzayhpbmRleCl7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMudGFza1tpbmRleC0xXSlcbiAgICB9XG5cbiAgICBnZXREZXNjcmlwdGlvbigpe1xuICAgICAgICByZXR1cm4gdGhpcy50YXNrLm1hcCh0YXNrID0+IHRhc2suZGVzY3JpcHRpb24pOyBcbiAgICB9XG5cbiAgICBnZXRQcmlvKCl7XG4gICAgICAgIHJldHVybiB0aGlzLnRhc2subWFwKHRhc2sgPT4gdGFzay5wcmlvcml0eSk7IFxuICAgIH1cblxuICAgIGdldER1ZURhdGUoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFzay5tYXAodGFzayA9PiB0YXNrLmR1ZURhdGUpOyBcbiAgICB9XG5cbiAgICBnZXRJRCgpe1xuICAgICAgICByZXR1cm4gY29uc29sZS5sb2codGhpcy50YXNrLm1hcCh0YXNrID0+IHRhc2suaWQpKTtcbn1cbn0iLCJleHBvcnQgZnVuY3Rpb24gc3RvcmVQcm9qZWN0KHByb2plY3QpIHtcbiAgICBsZXQgZXhpc3RpbmdQcm9qZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJQcm9qZWN0c1wiKSkgfHwgW107XG5cbiAgICAvLyBDaGVjayBpZiB0aGUgcHJvamVjdCB3aXRoIHRoZSBzYW1lIG5hbWUgYWxyZWFkeSBleGlzdHNcbiAgICBjb25zdCBleGlzdGluZ1Byb2plY3QgPSBleGlzdGluZ1Byb2plY3RzLmZpbmQoKHByb2plY3RPYmopID0+IHtcbiAgICAgICAgcmV0dXJuIHByb2plY3RPYmoucHJvamVjdE5hbWUgPT09IHByb2plY3QucHJvamVjdE5hbWU7XG4gICAgfSk7XG5cbiAgICBpZiAoZXhpc3RpbmdQcm9qZWN0KSB7XG4gICAgICAgIC8vIElmIGEgcHJvamVjdCB3aXRoIHRoZSBzYW1lIG5hbWUgZXhpc3RzLCBzaG93IGFuIGFsZXJ0IGFuZCByZXR1cm5cbiAgICAgICAgYWxlcnQoXCJOYW1lcyBhcmUgdGhlIHNhbWVcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIElmIG5vIHByb2plY3Qgd2l0aCB0aGUgc2FtZSBuYW1lIGV4aXN0cywgYWRkIHRoZSBuZXcgcHJvamVjdFxuICAgICAgICBleGlzdGluZ1Byb2plY3RzLnB1c2gocHJvamVjdCk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiUHJvamVjdHNcIiwgSlNPTi5zdHJpbmdpZnkoZXhpc3RpbmdQcm9qZWN0cykpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIlByb2plY3QgYWRkZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlUHJvamVjdChwcm9qZWN0VG9EZWxldGUpIHtcblxuICAgIGNvbnN0IGV4aXN0aW5nUHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiUHJvamVjdHNcIikpIHx8IFtdO1xuICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGV4aXN0aW5nUHJvamVjdHMpKTtcbiAgICBjb25zb2xlLmxvZyhleGlzdGluZ1Byb2plY3RzLmxlbmd0aClcblxuICAgICBmb3IobGV0IGkgPSAwOyBpIDwgZXhpc3RpbmdQcm9qZWN0cy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICBpZihleGlzdGluZ1Byb2plY3RzW2ldLnByb2plY3ROYW1lPT09cHJvamVjdFRvRGVsZXRlLnByb2plY3ROYW1lKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZGVsZXRpbmcgdGhpc1wiKVxuICAgICAgICAgICAgZXhpc3RpbmdQcm9qZWN0cy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIlByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KGV4aXN0aW5nUHJvamVjdHMpKVxuICAgICAgICAgICAgY29uc29sZS5sb2coZXhpc3RpbmdQcm9qZWN0cylcbiAgICAgICAgIH1cbiAgICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUHJvamVjdE5hbWUocHJvamVjdFRvRWRpdCwgbmV3TmFtZUlzKXtcbiAgICBjb25zdCBleGlzdGluZ1Byb2plY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlByb2plY3RzXCIpKSB8fCBbXTtcblxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBleGlzdGluZ1Byb2plY3RzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgaWYoZXhpc3RpbmdQcm9qZWN0c1tpXS5wcm9qZWN0TmFtZT09PXByb2plY3RUb0VkaXQucHJvamVjdE5hbWUpe1xuICAgICAgICAgICAgZXhpc3RpbmdQcm9qZWN0c1tpXS5wcm9qZWN0TmFtZSA9IG5ld05hbWVJcztcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4aXN0aW5nUHJvamVjdHNbaV0ucHJvamVjdE5hbWUpXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIlByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KGV4aXN0aW5nUHJvamVjdHMpKVxuXG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0b3JlVGFza3Moc3RvcmVUYXNrLCBwcm9qZWN0TmFtZSl7XG4gICAgbGV0IGV4aXN0aW5nUHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiUHJvamVjdHNcIikpIHx8IFtdO1xuXG4gICAgIGZvcihsZXQgaSA9IDA7IGkgPCBleGlzdGluZ1Byb2plY3RzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgIGlmKGV4aXN0aW5nUHJvamVjdHNbaV0ucHJvamVjdE5hbWUgPT09IHByb2plY3ROYW1lLnByb2plY3ROYW1lKXtcbiAgICAgICAgICAgIGV4aXN0aW5nUHJvamVjdHNbaV0udGFzayA9IHN0b3JlVGFzaztcbiAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwid2UgZG9udCBtYXRjaFwiKVxuICAgICAgICAgfVxuICAgICB9XG4gICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiUHJvamVjdHNcIiwgSlNPTi5zdHJpbmdpZnkoZXhpc3RpbmdQcm9qZWN0cykpO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVUYXNrKHRhc2tUb0RlbGV0ZSwgcHJvamVjdE5hbWUpIHtcbiAgICBsZXQgZXhpc3RpbmdQcm9qZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJQcm9qZWN0c1wiKSkgfHwgW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV4aXN0aW5nUHJvamVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGV4aXN0aW5nUHJvamVjdHNbaV0ucHJvamVjdE5hbWUgPT09IHByb2plY3ROYW1lLnByb2plY3ROYW1lKSB7XG5cbiAgICAgICAgICAgIGNvbnN0IGluZGV4VG9EZWxldGUgPSBleGlzdGluZ1Byb2plY3RzW2ldLnRhc2suZmluZEluZGV4KHRhc2sgPT4gdGFzay5pZCA9PT0gdGFza1RvRGVsZXRlLmlkKTtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIHRhc2sgaXMgZm91bmQsIHJlbW92ZSBpdCBmcm9tIHRoZSAndGFzaycgYXJyYXlcbiAgICAgICAgICAgIGlmIChpbmRleFRvRGVsZXRlICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nUHJvamVjdHNbaV0udGFzay5zcGxpY2UoaW5kZXhUb0RlbGV0ZSwgMSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVcGRhdGVkIHRhc2tzOlwiLCBleGlzdGluZ1Byb2plY3RzW2ldLnRhc2spO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRhc2sgbm90IGZvdW5kOlwiLCB0YXNrVG9EZWxldGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJObyBtYXRjaCBmb3I6XCIsIHByb2plY3ROYW1lLnByb2plY3ROYW1lKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBsb2NhbCBzdG9yYWdlIHdpdGggdGhlIG1vZGlmaWVkIGFycmF5XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJQcm9qZWN0c1wiLCBKU09OLnN0cmluZ2lmeShleGlzdGluZ1Byb2plY3RzKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUYXNrTmFtZSh0YXNrVG9VcGRhdGUsIHByb2plY3ROYW1lLCBuZXdOYW1lKXtcbiAgICBsZXQgZXhpc3RpbmdQcm9qZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJQcm9qZWN0c1wiKSkgfHwgW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV4aXN0aW5nUHJvamVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGV4aXN0aW5nUHJvamVjdHNbaV0ucHJvamVjdE5hbWUgPT09IHByb2plY3ROYW1lLnByb2plY3ROYW1lKSB7XG5cbiAgICAgICAgICAgIGNvbnN0IGluZGV4VG9EZWxldGUgPSBleGlzdGluZ1Byb2plY3RzW2ldLnRhc2suZmluZEluZGV4KHRhc2sgPT4gdGFzay5pZCA9PT0gdGFza1RvVXBkYXRlLmlkKTtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIHRhc2sgaXMgZm91bmQsIHJlbW92ZSBpdCBmcm9tIHRoZSAndGFzaycgYXJyYXlcbiAgICAgICAgICAgIGlmIChpbmRleFRvRGVsZXRlICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nUHJvamVjdHNbaV0udGFzay5kZXNjcmlwdGlvbiA9IG5ld05hbWU7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVcGRhdGVkIHRhc2tzOlwiLCBleGlzdGluZ1Byb2plY3RzW2ldLnRhc2spO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiVGFzayBub3QgZm91bmQ6XCIsIHRhc2tUb0RlbGV0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5vIG1hdGNoIGZvcjpcIiwgcHJvamVjdE5hbWUucHJvamVjdE5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGxvY2FsIHN0b3JhZ2Ugd2l0aCB0aGUgbW9kaWZpZWQgYXJyYXlcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIlByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KGV4aXN0aW5nUHJvamVjdHMpKTtcblxufSIsImltcG9ydCB7IHN0b3JlVGFza3MsIGRlbGV0ZVRhc2ssIHVwZGF0ZVRhc2tOYW1lIH0gZnJvbSBcIi4vc3RvcmFnZVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGFzayhjcmVhdGVOZXdQcm9qZWN0KXtcbiAgICBsZXQgZGF0YUNvdW50ZXIgPSAwO1xuICAgIGxldCB0YXNrQ291bnRlciA9IDA7XG5cbiAgICBjb25zdCB0YXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBcbiAgICAvL0RPTSBmb3IgYWRkaW5nIFRhc2tzIGludG8gUHJvamVjdHNcbiAgICBjb25zdCBhZGRUYXNrRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBhZGRUYXNrRm9ybS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICBhZGRUYXNrRm9ybS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwic2V0UHJvcGVydHlcIik7XG4gICAgYWRkVGFza0Zvcm0uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJzZXRQcm9wZXJ0eVwiKTtcbiAgICBcbiAgICBjb25zdCBhZGRMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICBhZGRMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJzZXRQcm9wZXJ0eVwiKTtcbiAgICBhZGRMYWJlbC5pbm5lckhUTUwgPSBcIlRhc2sgTmFtZTpcIjtcbiAgICBcbiAgICB0YXNrRGl2LmNsYXNzTGlzdC5hZGQoXCJ0YXNrRGl2XCIpO1xuICAgIFxuICAgIC8vRE9NIGZvciBhZGRpbmcgcHJpb3JpdHkgb24gVGFza3NcbiAgICBjb25zdCBhZGRQcmlvRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7ICBcbiAgICBhZGRQcmlvRm9ybS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwic2V0UHJpb1wiKTtcbiAgICBhZGRQcmlvRm9ybS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInNldFByaW9cIik7XG4gICAgXG4gICAgY29uc3Qgb3B0aW9uc0hpZ2ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgIG9wdGlvbnNIaWdoLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIFwiaGlnaFwiKTtcbiAgICBjb25zdCBvcHRpb25zVGV4dEhpZ2ggPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIkhpZ2hcIik7XG4gICAgXG4gICAgY29uc3Qgb3B0aW9uc01lZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgb3B0aW9uc01lZC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBcIm1lZGl1bVwiKTtcbiAgICBjb25zdCBvcHRpb25zVGV4dE1lZCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiTWVkaXVtXCIpO1xuICAgIFxuICAgIGNvbnN0IG9wdGlvbnNMb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgIG9wdGlvbnNMb3cuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJsb3dcIik7XG4gICAgY29uc3Qgb3B0aW9uc1RleHRMb3cgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIkxvd1wiKTtcbiAgICBcbiAgICBvcHRpb25zSGlnaC5hcHBlbmRDaGlsZChvcHRpb25zVGV4dEhpZ2gpO1xuICAgIG9wdGlvbnNNZWQuYXBwZW5kQ2hpbGQob3B0aW9uc1RleHRNZWQpO1xuICAgIG9wdGlvbnNMb3cuYXBwZW5kQ2hpbGQob3B0aW9uc1RleHRMb3cpO1xuICAgIGFkZFByaW9Gb3JtLmFwcGVuZENoaWxkKG9wdGlvbnNIaWdoKTtcbiAgICBhZGRQcmlvRm9ybS5hcHBlbmRDaGlsZChvcHRpb25zTWVkKTtcbiAgICBhZGRQcmlvRm9ybS5hcHBlbmRDaGlsZChvcHRpb25zTG93KTtcbiAgICBcbiAgICBjb25zdCBhZGRMYWJlbFByaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgYWRkTGFiZWxQcmlvLnNldEF0dHJpYnV0ZShcImZvclwiLCBcInNldFByaW9cIik7XG4gICAgYWRkTGFiZWxQcmlvLmlubmVySFRNTCA9IFwiQWRkIFByaW9yaXR5XCI7XG4gICAgXG4gICAgLy9ET00gZm9yIGFkZGluZyBkdWUgZGF0ZSBvbiB0YXNrc1xuICAgIGNvbnN0IGFkZFRhc2tEdWVEYXRlRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBhZGRUYXNrRHVlRGF0ZUZvcm0uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImRhdGVcIik7XG4gICAgYWRkVGFza0R1ZURhdGVGb3JtLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJ0YXNrRHVlRGF0ZVwiKTtcbiAgICBhZGRUYXNrRHVlRGF0ZUZvcm0uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJ0YXNrRHVlRGF0ZVwiKTtcbiAgICBhZGRUYXNrRHVlRGF0ZUZvcm0uc2V0QXR0cmlidXRlKFwicmVxdWlyZWRcIiwgXCJcIilcbiAgICBcbiAgICBjb25zdCBhZGRUYXNrRHVlRGF0ZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgIGFkZFRhc2tEdWVEYXRlTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwidGFza0R1ZURhdGVcIik7XG4gICAgYWRkVGFza0R1ZURhdGVMYWJlbC5pbm5lckhUTUwgPSBcIkR1ZTogXCI7XG4gICAgXG4gICAgLy9ET00gZm9yIGFkZGluZyBidXR0b24gdG8gYWRkIFRhc2tzXG4gICAgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBhZGRCdXR0b24uaW5uZXJIVE1MID0gXCJhZGRcIlxuXG4gICAgLy9ET00gZm9yIGFkZGluZyB0YXNrcyBvcHRpb25zIGludG8gYSBkaXZcbiAgICBjb25zdCB0YXNrT3B0aW9uc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFza09wdGlvbnNEaXYuY2xhc3NMaXN0LmFkZChcInRhc2tPcHRpb25zXCIpICAgICAgXG4gICAgICAgIFxuICAgIC8vVGFza3MgYmVpbmcgYWRkZWQgdG8gYXJyYXlcbiAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XG4gICAgICAgIGNvbnN0IHRhc2tWYWx1ZSA9IGFkZFRhc2tGb3JtLnZhbHVlO1xuICAgICAgICBjb25zdCBwcmlvVmFsdWUgPSBhZGRQcmlvRm9ybS52YWx1ZTtcbiAgICAgICAgY29uc3QgZHVlRGF0ZVZhbHVlID0gYWRkVGFza0R1ZURhdGVGb3JtLnZhbHVlO1xuXG4gICAgICAgIC8vIGlmKHRhc2tWYWx1ZT09XCJcInx8cHJpb1ZhbHVlPT1cIlwifHxkdWVEYXRlVmFsdWU9PVwiXCIpe1xuICAgICAgICAvLyByZXR1cm4gYWxlcnQoXCJGaWxsIG91dCBhbGwgdGhlIGZpZWxkc1wiKVxuICAgICAgICAvLyB9XG4gICAgXG4gICAgICAgICBjcmVhdGVOZXdQcm9qZWN0LmFkZFRhc2soeyBcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0YXNrVmFsdWUsXG4gICAgICAgICAgICBwcmlvcml0eTogcHJpb1ZhbHVlLFxuICAgICAgICAgICAgZHVlRGF0ZTogZHVlRGF0ZVZhbHVlLFxuICAgICAgICAgICAgaWQ6IGRhdGFDb3VudGVyKyssXG4gICAgICAgIH0pO1xuICAgICAgICB0YXNrQ291bnRlcisrO1xuICAgICAgICBzdG9yZVRhc2tzKGNyZWF0ZU5ld1Byb2plY3QudGFzaywgY3JlYXRlTmV3UHJvamVjdCk7XG5cbiAgICAgICAgLy9ET00gZm9yIGRpc3BsYXlpbmcgdGFza3NcbiAgICAgICAgY29uc3QgY3VycmVudFRhc2tzRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY3VycmVudFRhc2tzRGl2LmNsYXNzTGlzdC5hZGQoXCJjdXJyZW50VGFza3NcIik7XG4gICAgICAgIGN1cnJlbnRUYXNrc0Rpdi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIsIHRhc2tDb3VudGVyIC0xKTtcbiAgICAgICAgICAgIFxuICAgICAgICBhZGRUYXNrRm9ybS52YWx1ZSA9IFwiXCI7XG4gICAgICAgIGNvbnNvbGUubG9nKGNyZWF0ZU5ld1Byb2plY3QpO1xuXG4gICAgICAgIGNvbnN0IGdldFRhc2tEaXZJZCA9IGN1cnJlbnRUYXNrc0Rpdi5kYXRhc2V0LmlkO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGdldFRhc2tEaXZJZCArIFwiZm9yIGN1cnJlbnR0YXNrRGl2XCIpXG4gICAgICAgIGN1cnJlbnRUYXNrc0Rpdi5pbm5lckhUTUwgPSBcbiAgICAgICAgICAgIGBUYXNrIG5hbWU6ICR7Y3JlYXRlTmV3UHJvamVjdC5nZXREZXNjcmlwdGlvbigpW2NyZWF0ZU5ld1Byb2plY3QudGFzay5sZW5ndGggLTFdfSxcbiAgICAgICAgICAgICBwcmlvcml0eTogJHtjcmVhdGVOZXdQcm9qZWN0LmdldFByaW8oKVtjcmVhdGVOZXdQcm9qZWN0LnRhc2subGVuZ3RoIC0xXX0sXG4gICAgICAgICAgICAgaXQgaXMgZHVlIHRpbGwgJHtjcmVhdGVOZXdQcm9qZWN0LmdldER1ZURhdGUoKVtjcmVhdGVOZXdQcm9qZWN0LnRhc2subGVuZ3RoIC0xXX1gO1xuXG5cbiAgICAgICAgLy9NYXJraW5nIGFzIGNvbXBsZXRlXG4gICAgICAgIGNvbnN0IGNvbXBsZXRlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgY29tcGxldGVCdXR0b24uaW5uZXJIVE1MPSBcIk1hcmsgYXMgY29tcGxldGVcIjtcblxuICAgICAgICBjb21wbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCk9PntcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3JlYXRlTmV3UHJvamVjdC50YXNrLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICBpZihjcmVhdGVOZXdQcm9qZWN0LnRhc2tbaV0uaWQgPT0gZ2V0VGFza0RpdklkKXsgXG4gICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRUYXNrc0Rpdi5jbGFzc0xpc3QuY29udGFpbnMoXCJjb21wbGV0ZVwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFza3NEaXYuY2xhc3NMaXN0LnJlbW92ZShcImNvbXBsZXRlXCIpXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFRhc2tzRGl2LmNsYXNzTGlzdC5hZGQoXCJjb21wbGV0ZVwiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIC8vRGVsZXRpbmcgVGFza3NcbiAgICAgICAgY29uc3QgZGVsZXRlVGFza0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGRlbGV0ZVRhc2tCdXR0b24uY2xhc3NMaXN0LmFkZChcImRlbGV0ZVRhc2tcIik7XG4gICAgICAgIGRlbGV0ZVRhc2tCdXR0b24uaW5uZXJIVE1MID0gXCJEZWxldGUgVGFza1wiO1xuXG4gICAgICAgIGRlbGV0ZVRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNyZWF0ZU5ld1Byb2plY3QudGFzay5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYoY3JlYXRlTmV3UHJvamVjdC50YXNrW2ldLmlkID09IGdldFRhc2tEaXZJZCl7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZVRhc2soY3JlYXRlTmV3UHJvamVjdC50YXNrW2ldLCBjcmVhdGVOZXdQcm9qZWN0KVxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVOZXdQcm9qZWN0LnRhc2suc3BsaWNlKGksMSk7ICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFza3NEaXYuaW5uZXJIVE1MID0gXG4gICAgICAgICAgICAgICAgICAgIGBUYXNrIG5hbWU6ICR7Y3JlYXRlTmV3UHJvamVjdC5nZXREZXNjcmlwdGlvbigpW2ldfSxcbiAgICAgICAgICAgICAgICAgICAgIHByaW9yaXR5OiAke2NyZWF0ZU5ld1Byb2plY3QuZ2V0UHJpbygpW2ldfSxcbiAgICAgICAgICAgICAgICAgICAgIGl0IGlzIGR1ZSB0aWxsICR7Y3JlYXRlTmV3UHJvamVjdC5nZXREdWVEYXRlKClbaV19YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YXNrRGl2LnJlbW92ZUNoaWxkKGN1cnJlbnRUYXNrc0Rpdik7XG4gICAgICAgICAgICA7IFxuICAgICAgICB9KTtcblxuICAgICAgICAvL0VkaXRpbmcgdGFza3NcbiAgICAgICAgY29uc3QgZWRpdFRhc2tCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICBlZGl0VGFza0J1dHRvbi5pbm5lckhUTUwgPSBcIkVkaXQgTmFtZVwiO1xuXG4gICAgICAgIGVkaXRUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+e1xuICAgICAgICAgICAgbGV0IGVkaXRUYXNrTmFtZSA9IHByb21wdChcIk5ldyBUYXNrIG5hbWU6XCIpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNyZWF0ZU5ld1Byb2plY3QudGFzay5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYoY3JlYXRlTmV3UHJvamVjdC50YXNrW2ldLmlkID09IGdldFRhc2tEaXZJZCl7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRhc2tOYW1lKGNyZWF0ZU5ld1Byb2plY3QudGFza1tpXSxjcmVhdGVOZXdQcm9qZWN0LGVkaXRUYXNrTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZU5ld1Byb2plY3QudGFza1tpXS5kZXNjcmlwdGlvbiA9IGVkaXRUYXNrTmFtZTtcblxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFza3NEaXYuaW5uZXJIVE1MID0gXG4gICAgICAgICAgICAgICAgICAgIGBUYXNrIG5hbWU6ICR7Y3JlYXRlTmV3UHJvamVjdC5nZXREZXNjcmlwdGlvbigpW2ldfSxcbiAgICAgICAgICAgICAgICAgICAgIHByaW9yaXR5OiAke2NyZWF0ZU5ld1Byb2plY3QuZ2V0UHJpbygpW2ldfSxcbiAgICAgICAgICAgICAgICAgICAgIGl0IGlzIGR1ZSB0aWxsICR7Y3JlYXRlTmV3UHJvamVjdC5nZXREdWVEYXRlKClbaV19YDsgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgY29uc29sZS5sb2coY3JlYXRlTmV3UHJvamVjdClcbiAgICAgICAgY3VycmVudFRhc2tzRGl2LmFwcGVuZENoaWxkKGNvbXBsZXRlQnV0dG9uKTtcbiAgICAgICAgY3VycmVudFRhc2tzRGl2LmFwcGVuZENoaWxkKGVkaXRUYXNrQnV0dG9uKTtcbiAgICAgICAgY3VycmVudFRhc2tzRGl2LmFwcGVuZENoaWxkKGRlbGV0ZVRhc2tCdXR0b24pO1xuICAgICAgICBcbiAgICAgICAgfSlcblxuICAgICAgICB0YXNrRGl2LmFwcGVuZENoaWxkKGN1cnJlbnRUYXNrc0Rpdik7XG4gICAgICAgIGN1cnJlbnRUYXNrc0Rpdi5hcHBlbmRDaGlsZChjb21wbGV0ZUJ1dHRvbik7XG4gICAgICAgIGN1cnJlbnRUYXNrc0Rpdi5hcHBlbmRDaGlsZChlZGl0VGFza0J1dHRvbik7XG4gICAgICAgIGN1cnJlbnRUYXNrc0Rpdi5hcHBlbmRDaGlsZChkZWxldGVUYXNrQnV0dG9uKTtcbn0pXG4gXG4gICAgdGFza09wdGlvbnNEaXYuYXBwZW5kQ2hpbGQoYWRkTGFiZWwpO1xuICAgIHRhc2tPcHRpb25zRGl2LmFwcGVuZENoaWxkKGFkZFRhc2tGb3JtKTtcbiAgICB0YXNrT3B0aW9uc0Rpdi5hcHBlbmRDaGlsZChhZGRMYWJlbFByaW8pO1xuICAgIHRhc2tPcHRpb25zRGl2LmFwcGVuZENoaWxkKGFkZFByaW9Gb3JtKTtcbiAgICB0YXNrT3B0aW9uc0Rpdi5hcHBlbmRDaGlsZChhZGRUYXNrRHVlRGF0ZUxhYmVsKTtcbiAgICB0YXNrT3B0aW9uc0Rpdi5hcHBlbmRDaGlsZChhZGRUYXNrRHVlRGF0ZUZvcm0pO1xuICAgIHRhc2tPcHRpb25zRGl2LmFwcGVuZENoaWxkKGFkZEJ1dHRvbik7XG4gICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrT3B0aW9uc0Rpdik7XG5cbiAgICByZXR1cm4gdGFza0Rpdjtcbn0iLCJpbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSBcIi4vY29uc3RydWN0b3JcIjtcbmltcG9ydCB7IGNyZWF0ZVRhc2sgfSBmcm9tIFwiLi90YXNrc1wiO1xuaW1wb3J0IHsgc3RvcmVQcm9qZWN0LCBkZWxldGVQcm9qZWN0LCB1cGRhdGVQcm9qZWN0TmFtZSwgY2hlY2tJZlVzZWR9IGZyb20gXCIuL3N0b3JhZ2VcIjtcblxuY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGVudFwiKTtcbmNvbnN0IHByb2plY3ROYW1lRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdE5hbWVcIik7XG5jb25zdCBzdWJCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN1Ym1pdFwiKTtcblxuc3ViQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+e1xuICAgIC8vRE9NIGZvciBhZGRpbmcgcHJvamVjdHNcbiAgICBjb25zdCBwcm9qZWN0TmFtZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgcHJvamVjdE5hbWVEaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwcm9qZWN0TmFtZURpdlwiKTtcbiAgICBjb25zdCBwcm9qZWN0SGVhZGxpbmVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBwcm9qZWN0SGVhZGxpbmVEaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwcm9qZWN0SGVhZGxpbmVcIik7XG4gICAgY29uc3QgcHJvamVjdEgzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xuICAgIGxldCB0aGVOYW1lSXMgPSBwcm9qZWN0TmFtZUZvcm0udmFsdWU7XG4gICAgbGV0IGNyZWF0ZU5ld1Byb2plY3QgPSBuZXcgUHJvamVjdCh0aGVOYW1lSXMpO1xuXG4gICAgcHJvamVjdEgzLmlubmVySFRNTCA9IGBQcm9qZWN0IG5hbWU6ICR7dGhlTmFtZUlzfWA7XG5cbiAgICBjb25zdCB0YXNrRGl2ID0gY3JlYXRlVGFzayhjcmVhdGVOZXdQcm9qZWN0KTtcblxuICAgIGNvbnN0IHJlbW92ZVByb2plY3RCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIHJlbW92ZVByb2plY3RCdG4uaW5uZXJIVE1MID0gXCJEZWxldGUgUHJvamVjdFwiOyAgIFxuXG4gICAgY29uc3QgZWRpdFByb2plY3RCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGVkaXRQcm9qZWN0QnRuLmlubmVySFRNTCA9IFwiRWRpdCBQcm9qZWN0XCI7XG5cbiAgICBpZihzdG9yZVByb2plY3QoY3JlYXRlTmV3UHJvamVjdCkgPT09ZmFsc2UgKXtcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChwcm9qZWN0TmFtZURpdik7XG4gICAgfTtcbiAgICBwcm9qZWN0TmFtZURpdi5hcHBlbmRDaGlsZChwcm9qZWN0SGVhZGxpbmVEaXYpO1xuICAgIHByb2plY3RIZWFkbGluZURpdi5hcHBlbmRDaGlsZChwcm9qZWN0SDMpXG4gICAgcHJvamVjdEhlYWRsaW5lRGl2LmFwcGVuZENoaWxkKHJlbW92ZVByb2plY3RCdG4pO1xuICAgIHByb2plY3RIZWFkbGluZURpdi5hcHBlbmRDaGlsZChlZGl0UHJvamVjdEJ0bik7XG4gICAgcHJvamVjdE5hbWVEaXYuYXBwZW5kQ2hpbGQodGFza0Rpdik7XG5cbiAgICByZW1vdmVQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCgpPT57XG4gICAgICAgIGNvbnRlbnQucmVtb3ZlQ2hpbGQocHJvamVjdE5hbWVEaXYpO1xuICAgICAgICBkZWxldGVQcm9qZWN0KGNyZWF0ZU5ld1Byb2plY3QpXG4gICAgfSlcblxuICAgIGVkaXRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+e1xuICAgICAgICBsZXQgbmV3TmFtZUlzID0gcHJvbXB0KFwiZW50ZXIgbmV3IHByb2plY3QgbmFtZTpcIik7XG4gICAgICAgIHVwZGF0ZVByb2plY3ROYW1lKGNyZWF0ZU5ld1Byb2plY3QsIG5ld05hbWVJcylcbiAgICAgICAgY29uc29sZS5sb2cobmV3TmFtZUlzKTtcbiAgICAgICAgdGhlTmFtZUlzID0gbmV3TmFtZUlzO1xuICAgICAgICBjcmVhdGVOZXdQcm9qZWN0LnByb2plY3ROYW1lID0gdGhlTmFtZUlzO1xuXG4gICAgICAgIHByb2plY3RIMy5pbm5lckhUTUwgPSBgUHJvamVjdCBuYW1lIGlzOiAke3RoZU5hbWVJc31gO1xuICAgICAgICBwcm9qZWN0SDMuYXBwZW5kQ2hpbGQocmVtb3ZlUHJvamVjdEJ0bik7XG4gICAgICAgIHByb2plY3RIMy5hcHBlbmRDaGlsZChlZGl0UHJvamVjdEJ0bik7XG4gICAgfSlcbiAgICBcbiAgICBwcm9qZWN0TmFtZUZvcm0udmFsdWUgPSBcIlwiO1xuICAgIGNvbnNvbGUubG9nKGNyZWF0ZU5ld1Byb2plY3QpO1xufSk7XG5cblxuLy9EdXBsaWNhdGUgY29kZSB0byBzaG93IGRlZmF1bHQgcHJvamVjdCBvbiBwYWdlIGxvYWRcbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpe1xuICAgIGNvbnN0IGRlZmF1bHRQcm9qZWN0ID0gbmV3IFByb2plY3QoXCJEZWZhdWx0IFByb2plY3RcIik7XG4gICAgZGlzcGxheVByb2plY3QoZGVmYXVsdFByb2plY3QpO1xufVxuXG5mdW5jdGlvbiBkaXNwbGF5UHJvamVjdChwcm9qZWN0KSB7XG4gICAgY29uc3QgcHJvamVjdE5hbWVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHByb2plY3ROYW1lRGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIFwicHJvamVjdE5hbWVEaXZcIik7XG4gICAgY29uc3QgcHJvamVjdEhlYWRsaW5lRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcHJvamVjdEhlYWRsaW5lRGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIFwicHJvamVjdEhlYWRsaW5lXCIpO1xuICAgIGNvbnN0IHByb2plY3RIMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbiAgICBwcm9qZWN0SDMuaW5uZXJIVE1MID0gYFByb2plY3QgbmFtZSBpczogJHtwcm9qZWN0LnByb2plY3ROYW1lfWA7XG5cbiAgICBjb25zdCB0YXNrRGl2ID0gY3JlYXRlVGFzayhwcm9qZWN0KTtcblxuICAgIGNvbnN0IHJlbW92ZVByb2plY3RCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIHJlbW92ZVByb2plY3RCdG4uaW5uZXJIVE1MID0gXCJEZWxldGUgUHJvamVjdFwiOyAgIFxuXG4gICAgY29uc3QgZWRpdFByb2plY3RCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGVkaXRQcm9qZWN0QnRuLmlubmVySFRNTCA9IFwiRWRpdCBQcm9qZWN0XCI7XG5cbiAgICBcbiAgICBjb250ZW50LmFwcGVuZENoaWxkKHByb2plY3ROYW1lRGl2KTtcbiAgICBwcm9qZWN0TmFtZURpdi5hcHBlbmRDaGlsZChwcm9qZWN0SGVhZGxpbmVEaXYpO1xuICAgIHByb2plY3RIZWFkbGluZURpdi5hcHBlbmRDaGlsZChwcm9qZWN0SDMpXG4gICAgLy9wcm9qZWN0TmFtZURpdi5hcHBlbmRDaGlsZChwcm9qZWN0SDMpO1xuICAgIHByb2plY3RIZWFkbGluZURpdi5hcHBlbmRDaGlsZChyZW1vdmVQcm9qZWN0QnRuKTtcbiAgICBwcm9qZWN0SGVhZGxpbmVEaXYuYXBwZW5kQ2hpbGQoZWRpdFByb2plY3RCdG4pO1xuICAgIHByb2plY3ROYW1lRGl2LmFwcGVuZENoaWxkKHRhc2tEaXYpO1xuXG4gICAgcmVtb3ZlUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb250ZW50LnJlbW92ZUNoaWxkKHByb2plY3ROYW1lRGl2KTtcbiAgICB9KTtcblxuICAgIGVkaXRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGxldCBuZXdOYW1lSXMgPSBwcm9tcHQoXCJFbnRlciBuZXcgcHJvamVjdCBuYW1lOlwiKTtcbiAgICAgICAgY29uc29sZS5sb2cobmV3TmFtZUlzKTtcbiAgICAgICAgcHJvamVjdC5wcm9qZWN0TmFtZSA9IG5ld05hbWVJcztcbiAgICAgICAgcHJvamVjdEgzLmlubmVySFRNTCA9IGBQcm9qZWN0IG5hbWUgaXM6ICR7bmV3TmFtZUlzfWA7XG4gICAgICAgIHByb2plY3RIMy5hcHBlbmRDaGlsZChyZW1vdmVQcm9qZWN0QnRuKTtcbiAgICAgICAgcHJvamVjdEgzLmFwcGVuZENoaWxkKGVkaXRQcm9qZWN0QnRuKTtcbiAgICB9KTtcbn1cblxuXG5cblxuIl0sIm5hbWVzIjpbIlByb2plY3QiLCJjb25zdHJ1Y3RvciIsInByb2plY3ROYW1lIiwidGhpcyIsInRhc2siLCJhZGRUYXNrIiwibmV3VGFzayIsInB1c2giLCJkaXNwbGF5VGFzayIsImluZGV4IiwiY29uc29sZSIsImxvZyIsImdldERlc2NyaXB0aW9uIiwibWFwIiwiZGVzY3JpcHRpb24iLCJnZXRQcmlvIiwicHJpb3JpdHkiLCJnZXREdWVEYXRlIiwiZHVlRGF0ZSIsImdldElEIiwiaWQiLCJkZWxldGVUYXNrIiwidGFza1RvRGVsZXRlIiwiZXhpc3RpbmdQcm9qZWN0cyIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJpIiwibGVuZ3RoIiwiaW5kZXhUb0RlbGV0ZSIsImZpbmRJbmRleCIsInNwbGljZSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJ1cGRhdGVUYXNrTmFtZSIsInRhc2tUb1VwZGF0ZSIsIm5ld05hbWUiLCJjcmVhdGVUYXNrIiwiY3JlYXRlTmV3UHJvamVjdCIsImRhdGFDb3VudGVyIiwidGFza0NvdW50ZXIiLCJ0YXNrRGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYWRkVGFza0Zvcm0iLCJzZXRBdHRyaWJ1dGUiLCJhZGRMYWJlbCIsImlubmVySFRNTCIsImNsYXNzTGlzdCIsImFkZCIsImFkZFByaW9Gb3JtIiwib3B0aW9uc0hpZ2giLCJvcHRpb25zVGV4dEhpZ2giLCJjcmVhdGVUZXh0Tm9kZSIsIm9wdGlvbnNNZWQiLCJvcHRpb25zVGV4dE1lZCIsIm9wdGlvbnNMb3ciLCJvcHRpb25zVGV4dExvdyIsImFwcGVuZENoaWxkIiwiYWRkTGFiZWxQcmlvIiwiYWRkVGFza0R1ZURhdGVGb3JtIiwiYWRkVGFza0R1ZURhdGVMYWJlbCIsImFkZEJ1dHRvbiIsInRhc2tPcHRpb25zRGl2IiwiYWRkRXZlbnRMaXN0ZW5lciIsInRhc2tWYWx1ZSIsInZhbHVlIiwicHJpb1ZhbHVlIiwiZHVlRGF0ZVZhbHVlIiwic3RvcmVUYXNrIiwic3RvcmVUYXNrcyIsImN1cnJlbnRUYXNrc0RpdiIsImdldFRhc2tEaXZJZCIsImRhdGFzZXQiLCJjb21wbGV0ZUJ1dHRvbiIsImNvbnRhaW5zIiwicmVtb3ZlIiwiZGVsZXRlVGFza0J1dHRvbiIsInJlbW92ZUNoaWxkIiwiZWRpdFRhc2tCdXR0b24iLCJlZGl0VGFza05hbWUiLCJwcm9tcHQiLCJjb250ZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJwcm9qZWN0TmFtZUZvcm0iLCJwcm9qZWN0TmFtZURpdiIsInByb2plY3RIZWFkbGluZURpdiIsInByb2plY3RIMyIsInRoZU5hbWVJcyIsInJlbW92ZVByb2plY3RCdG4iLCJlZGl0UHJvamVjdEJ0biIsInByb2plY3QiLCJmaW5kIiwicHJvamVjdE9iaiIsImFsZXJ0Iiwic3RvcmVQcm9qZWN0IiwicHJvamVjdFRvRGVsZXRlIiwiZGVsZXRlUHJvamVjdCIsIm5ld05hbWVJcyIsInByb2plY3RUb0VkaXQiLCJ1cGRhdGVQcm9qZWN0TmFtZSIsIndpbmRvdyIsIm9ubG9hZCIsImRpc3BsYXlQcm9qZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==