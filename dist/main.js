(()=>{"use strict";class e{constructor(e){this.projectName=e,this.task=[]}addTask(e){this.task.push(e)}displayTask(e){console.log(this.task[e-1])}getDescription(){return this.task.map((e=>e.description))}getPrio(){return this.task.map((e=>e.priority))}getDueDate(){return this.task.map((e=>e.dueDate))}getID(){return console.log(this.task.map((e=>e.id)))}}function t(e){const t=JSON.parse(localStorage.getItem("Projects"))||[];console.log(JSON.stringify(t)),console.log(t.length);for(let n=0;n<t.length;n++)t[n].projectName===e.projectName&&(console.log("deleting this"),t.splice(n,1),localStorage.setItem("Projects",JSON.stringify(t)),console.log(t))}function n(e,t){const n=JSON.parse(localStorage.getItem("Projects"))||[];for(let o=0;o<n.length;o++)n[o].projectName===e.projectName&&(n[o].projectName=t,console.log(n[o].projectName),localStorage.setItem("Projects",JSON.stringify(n)))}function o(e,t){let n=JSON.parse(localStorage.getItem("Projects"))||[];for(let o=0;o<n.length;o++)if(n[o].projectName===t.projectName){const t=n[o].task.findIndex((t=>t.id===e.id));-1!==t?(n[o].task.splice(t,1),console.log("Updated tasks:",n[o].task)):console.log("Task not found:",e)}else console.log("No match for:",t.projectName);localStorage.setItem("Projects",JSON.stringify(n))}function a(e,t,n){let o=JSON.parse(localStorage.getItem("Projects"))||[];for(let a=0;a<o.length;a++)if(o[a].projectName===t.projectName)for(let t=0;t<o[a].task.length;t++)o[a].task[t].id===e.id&&(console.log("match"),o[a].task[t].description=n,localStorage.setItem("Projects",JSON.stringify(o)))}function r(e){let t=0,n=0;const r=document.createElement("div"),c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("name","setProperty"),c.setAttribute("id","setProperty");const i=document.createElement("label");i.setAttribute("for","setProperty"),i.innerHTML="Task Name:",r.classList.add("taskDiv");const s=document.createElement("select");s.setAttribute("name","setPrio"),s.setAttribute("id","setPrio");const l=document.createElement("option");l.setAttribute("value","high");const d=document.createTextNode("High"),p=document.createElement("option");p.setAttribute("value","medium");const m=document.createTextNode("Medium"),u=document.createElement("option");u.setAttribute("value","low");const g=document.createTextNode("Low");l.appendChild(d),p.appendChild(m),u.appendChild(g),s.appendChild(l),s.appendChild(p),s.appendChild(u);const h=document.createElement("label");h.setAttribute("for","setPrio"),h.innerHTML="Add Priority";const k=document.createElement("input");k.setAttribute("type","date"),k.setAttribute("name","taskDueDate"),k.setAttribute("id","taskDueDate"),k.setAttribute("required","");const j=document.createElement("label");j.setAttribute("for","taskDueDate"),j.innerHTML="Due: ";const N=document.createElement("button");N.innerHTML="add";const E=document.createElement("div");return E.classList.add("taskOptions"),N.addEventListener("click",(()=>{const i=c.value,l=s.value,d=k.value;e.addTask({description:i,priority:l,dueDate:d,id:t++}),n++,function(e,t){let n=JSON.parse(localStorage.getItem("Projects"))||[];for(let o=0;o<n.length;o++)n[o].projectName===t.projectName?n[o].task=e:console.log("we dont match");localStorage.setItem("Projects",JSON.stringify(n))}(e.task,e);const p=document.createElement("div");p.classList.add("currentTasks"),p.setAttribute("data-id",n-1),c.value="",console.log(e);const m=p.dataset.id;console.log(m+"for currenttaskDiv"),p.innerHTML=`Task name: ${e.getDescription()[e.task.length-1]},\n             priority: ${e.getPrio()[e.task.length-1]},\n             it is due till ${e.getDueDate()[e.task.length-1]}`;const u=document.createElement("button");u.innerHTML="Mark as complete",u.addEventListener("click",(()=>{for(let t=0;t<e.task.length;t++)e.task[t].id==m&&(p.classList.contains("complete")?p.classList.remove("complete"):p.classList.add("complete"))}));const g=document.createElement("button");g.classList.add("deleteTask"),g.innerHTML="Delete Task",g.addEventListener("click",(()=>{for(let t=0;t<e.task.length;t++)e.task[t].id==m&&(o(e.task[t],e),e.task.splice(t,1),p.innerHTML=`Task name: ${e.getDescription()[t]},\n                     priority: ${e.getPrio()[t]},\n                     it is due till ${e.getDueDate()[t]}`);r.removeChild(p)}));const h=document.createElement("button");h.innerHTML="Edit Name",h.addEventListener("click",(()=>{let t=prompt("New Task name:");for(let n=0;n<e.task.length;n++)e.task[n].id==m&&(a(e.task[n],e,t),e.task[n].description=t,p.innerHTML=`Task name: ${e.getDescription()[n]},\n                     priority: ${e.getPrio()[n]},\n                     it is due till ${e.getDueDate()[n]}`);console.log(e),p.appendChild(u),p.appendChild(h),p.appendChild(g)})),r.appendChild(p),p.appendChild(u),p.appendChild(h),p.appendChild(g)})),E.appendChild(i),E.appendChild(c),E.appendChild(h),E.appendChild(s),E.appendChild(j),E.appendChild(k),E.appendChild(N),r.appendChild(E),r}function c(e){let t=JSON.parse(localStorage.getItem("Projects"))||[];if(t.length>0){for(let n=0;n<t.length;n++)if(t[n].projectName===e)return e;return t[t.length-1].projectName}return e}const i=document.getElementById("content"),s=document.getElementById("projectName"),l=document.getElementById("submit");window.onload=function(){(function(){const e=localStorage.getItem("Projects");return e?JSON.parse(e):[]})().forEach((e=>{!function(e){const o=document.createElement("div");o.setAttribute("id","projectNameDiv");const a=document.createElement("div");a.setAttribute("id","projectHeadline");const s=document.createElement("h3");s.innerHTML=`Project name: ${c(e.projectName)}`;const l=r(e),d=document.createElement("button");d.innerHTML="Delete Project";const p=document.createElement("button");p.innerHTML="Edit Project",o.appendChild(a),a.appendChild(s),a.appendChild(d),a.appendChild(p),o.appendChild(l),d.addEventListener("click",(()=>{i.removeChild(o),t(e)})),p.addEventListener("click",(()=>{let t=prompt("Enter new project name:");n(e,t),s.innerHTML=`Project name: ${c(t)}`})),i.appendChild(o)}(e)}))},l.addEventListener("click",(()=>{const o=document.createElement("div");o.setAttribute("id","projectNameDiv");const a=document.createElement("div");a.setAttribute("id","projectHeadline");const l=document.createElement("h3");let d=s.value,p=new e(d);!1===function(e){let t=JSON.parse(localStorage.getItem("Projects"))||[];return t.find((t=>t.projectName===e.projectName))?(alert("Names are the same"),!0):(t.push(e),localStorage.setItem("Projects",JSON.stringify(t)),console.log("Project added successfully"),!1)}(p)&&(i.appendChild(o),JSON.parse(localStorage.getItem("Projects"))),l.innerHTML="Project name: "+c(d);const m=r(p),u=document.createElement("button");u.innerHTML="Delete Project";const g=document.createElement("button");g.innerHTML="Edit Project",o.appendChild(a),a.appendChild(l),a.appendChild(u),a.appendChild(g),o.appendChild(m),u.addEventListener("click",(()=>{i.removeChild(o),t(p)})),g.addEventListener("click",(()=>{let e=prompt("enter new project name:");n(p,e),console.log(e),d=e,p.projectName=d,l.innerHTML=`Project name is: ${d}`,l.appendChild(u),l.appendChild(g)})),s.value="",console.log(p)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QmMsRUFBVWxELFVBQVksb0JBQW9Cb0MsSUFDMUNjLEVBQVV2QyxZQUFZd0MsR0FDdEJELEVBQVV2QyxZQUFZeUMsRUFBZSxJQUd6Q2IsRUFBZ0JwQixNQUFRLEdBQ3hCL0QsUUFBUUMsSUFBSWtDLEVBQWlCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLXRvcC8uL3NyYy9jb25zdHJ1Y3Rvci5qcyIsIndlYnBhY2s6Ly90b2RvLXRvcC8uL3NyYy9zdG9yYWdlLmpzIiwid2VicGFjazovL3RvZG8tdG9wLy4vc3JjL3Rhc2tzLmpzIiwid2VicGFjazovL3RvZG8tdG9wLy4vc3JjL2Rpc3BsYXkuanMiLCJ3ZWJwYWNrOi8vdG9kby10b3AvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFByb2plY3Qge1xuICAgIGNvbnN0cnVjdG9yKHByb2plY3ROYW1lKXtcbiAgICAgICAgdGhpcy5wcm9qZWN0TmFtZSA9IHByb2plY3ROYW1lO1xuICAgICAgICB0aGlzLnRhc2sgPSBbXTtcbiAgICB9XG5cbiAgICBhZGRUYXNrKG5ld1Rhc2spe1xuICAgICAgICB0aGlzLnRhc2sucHVzaChuZXdUYXNrKTtcbiAgICB9XG5cbiAgICBkaXNwbGF5VGFzayhpbmRleCl7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMudGFza1tpbmRleC0xXSlcbiAgICB9XG5cbiAgICBnZXREZXNjcmlwdGlvbigpe1xuICAgICAgICByZXR1cm4gdGhpcy50YXNrLm1hcCh0YXNrID0+IHRhc2suZGVzY3JpcHRpb24pOyBcbiAgICB9XG5cbiAgICBnZXRQcmlvKCl7XG4gICAgICAgIHJldHVybiB0aGlzLnRhc2subWFwKHRhc2sgPT4gdGFzay5wcmlvcml0eSk7IFxuICAgIH1cblxuICAgIGdldER1ZURhdGUoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFzay5tYXAodGFzayA9PiB0YXNrLmR1ZURhdGUpOyBcbiAgICB9XG5cbiAgICBnZXRJRCgpe1xuICAgICAgICByZXR1cm4gY29uc29sZS5sb2codGhpcy50YXNrLm1hcCh0YXNrID0+IHRhc2suaWQpKTtcbn1cbn0iLCJcbmV4cG9ydCBmdW5jdGlvbiBzdG9yZVByb2plY3QocHJvamVjdCkge1xuICAgIGxldCBleGlzdGluZ1Byb2plY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlByb2plY3RzXCIpKSB8fCBbXTtcblxuICAgIC8vIENoZWNrIGlmIHRoZSBwcm9qZWN0IHdpdGggdGhlIHNhbWUgbmFtZSBhbHJlYWR5IGV4aXN0c1xuICAgIGNvbnN0IGV4aXN0aW5nUHJvamVjdCA9IGV4aXN0aW5nUHJvamVjdHMuZmluZCgocHJvamVjdE9iaikgPT4ge1xuICAgICAgICByZXR1cm4gcHJvamVjdE9iai5wcm9qZWN0TmFtZSA9PT0gcHJvamVjdC5wcm9qZWN0TmFtZTtcbiAgICB9KTtcblxuICAgIGlmIChleGlzdGluZ1Byb2plY3QpIHtcbiAgICAgICAgLy8gSWYgYSBwcm9qZWN0IHdpdGggdGhlIHNhbWUgbmFtZSBleGlzdHMsIHNob3cgYW4gYWxlcnQgYW5kIHJldHVyblxuICAgICAgICBhbGVydChcIk5hbWVzIGFyZSB0aGUgc2FtZVwiKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgbm8gcHJvamVjdCB3aXRoIHRoZSBzYW1lIG5hbWUgZXhpc3RzLCBhZGQgdGhlIG5ldyBwcm9qZWN0XG4gICAgICAgIGV4aXN0aW5nUHJvamVjdHMucHVzaChwcm9qZWN0KTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJQcm9qZWN0c1wiLCBKU09OLnN0cmluZ2lmeShleGlzdGluZ1Byb2plY3RzKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiUHJvamVjdCBhZGRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVQcm9qZWN0KHByb2plY3RUb0RlbGV0ZSkge1xuXG4gICAgY29uc3QgZXhpc3RpbmdQcm9qZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJQcm9qZWN0c1wiKSkgfHwgW107XG4gICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoZXhpc3RpbmdQcm9qZWN0cykpO1xuICAgIGNvbnNvbGUubG9nKGV4aXN0aW5nUHJvamVjdHMubGVuZ3RoKVxuXG4gICAgIGZvcihsZXQgaSA9IDA7IGkgPCBleGlzdGluZ1Byb2plY3RzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgIGlmKGV4aXN0aW5nUHJvamVjdHNbaV0ucHJvamVjdE5hbWU9PT1wcm9qZWN0VG9EZWxldGUucHJvamVjdE5hbWUpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJkZWxldGluZyB0aGlzXCIpXG4gICAgICAgICAgICBleGlzdGluZ1Byb2plY3RzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiUHJvamVjdHNcIiwgSlNPTi5zdHJpbmdpZnkoZXhpc3RpbmdQcm9qZWN0cykpXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhleGlzdGluZ1Byb2plY3RzKVxuICAgICAgICAgfVxuICAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVQcm9qZWN0TmFtZShwcm9qZWN0VG9FZGl0LCBuZXdOYW1lSXMpe1xuICAgIGNvbnN0IGV4aXN0aW5nUHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiUHJvamVjdHNcIikpIHx8IFtdO1xuXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGV4aXN0aW5nUHJvamVjdHMubGVuZ3RoOyBpKyspe1xuICAgICAgICBpZihleGlzdGluZ1Byb2plY3RzW2ldLnByb2plY3ROYW1lPT09cHJvamVjdFRvRWRpdC5wcm9qZWN0TmFtZSl7XG4gICAgICAgICAgICBleGlzdGluZ1Byb2plY3RzW2ldLnByb2plY3ROYW1lID0gbmV3TmFtZUlzO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXhpc3RpbmdQcm9qZWN0c1tpXS5wcm9qZWN0TmFtZSlcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiUHJvamVjdHNcIiwgSlNPTi5zdHJpbmdpZnkoZXhpc3RpbmdQcm9qZWN0cykpXG5cbiAgICAgICAgfVxuICAgIH1cblxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcmVUYXNrcyhzdG9yZVRhc2ssIHByb2plY3ROYW1lKXtcbiAgICBsZXQgZXhpc3RpbmdQcm9qZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJQcm9qZWN0c1wiKSkgfHwgW107XG5cbiAgICAgZm9yKGxldCBpID0gMDsgaSA8IGV4aXN0aW5nUHJvamVjdHMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgaWYoZXhpc3RpbmdQcm9qZWN0c1tpXS5wcm9qZWN0TmFtZSA9PT0gcHJvamVjdE5hbWUucHJvamVjdE5hbWUpe1xuICAgICAgICAgICAgZXhpc3RpbmdQcm9qZWN0c1tpXS50YXNrID0gc3RvcmVUYXNrO1xuICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgY29uc29sZS5sb2coXCJ3ZSBkb250IG1hdGNoXCIpXG4gICAgICAgICB9XG4gICAgIH1cbiAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJQcm9qZWN0c1wiLCBKU09OLnN0cmluZ2lmeShleGlzdGluZ1Byb2plY3RzKSk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVRhc2sodGFza1RvRGVsZXRlLCBwcm9qZWN0TmFtZSkge1xuICAgIGxldCBleGlzdGluZ1Byb2plY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlByb2plY3RzXCIpKSB8fCBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXhpc3RpbmdQcm9qZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZXhpc3RpbmdQcm9qZWN0c1tpXS5wcm9qZWN0TmFtZSA9PT0gcHJvamVjdE5hbWUucHJvamVjdE5hbWUpIHtcblxuICAgICAgICAgICAgY29uc3QgaW5kZXhUb0RlbGV0ZSA9IGV4aXN0aW5nUHJvamVjdHNbaV0udGFzay5maW5kSW5kZXgodGFzayA9PiB0YXNrLmlkID09PSB0YXNrVG9EZWxldGUuaWQpO1xuXG4gICAgICAgICAgICAvLyBJZiB0aGUgdGFzayBpcyBmb3VuZCwgcmVtb3ZlIGl0IGZyb20gdGhlICd0YXNrJyBhcnJheVxuICAgICAgICAgICAgaWYgKGluZGV4VG9EZWxldGUgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgZXhpc3RpbmdQcm9qZWN0c1tpXS50YXNrLnNwbGljZShpbmRleFRvRGVsZXRlLCAxKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVwZGF0ZWQgdGFza3M6XCIsIGV4aXN0aW5nUHJvamVjdHNbaV0udGFzayk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGFzayBub3QgZm91bmQ6XCIsIHRhc2tUb0RlbGV0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5vIG1hdGNoIGZvcjpcIiwgcHJvamVjdE5hbWUucHJvamVjdE5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGxvY2FsIHN0b3JhZ2Ugd2l0aCB0aGUgbW9kaWZpZWQgYXJyYXlcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIlByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KGV4aXN0aW5nUHJvamVjdHMpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVRhc2tOYW1lKHRhc2tUb1VwZGF0ZSwgcHJvamVjdE5hbWUsIG5ld05hbWUpe1xuICAgIGxldCBleGlzdGluZ1Byb2plY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlByb2plY3RzXCIpKSB8fCBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXhpc3RpbmdQcm9qZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZXhpc3RpbmdQcm9qZWN0c1tpXS5wcm9qZWN0TmFtZSA9PT0gcHJvamVjdE5hbWUucHJvamVjdE5hbWUpIHtcbiAgICAgICAgICAgIC8vcnVuIGZvciBsb29wIG9uIGV4aXN0aW5nUHJvamVjdHNbaV0udGFzayBhbmQgbWF0Y2ggaXQgYWdhaW5zIHRhc2tUb1VwZGF0ZVxuICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IGV4aXN0aW5nUHJvamVjdHNbaV0udGFzay5sZW5ndGg7IGorKyl7XG4gICAgICAgICAgICAgICAgaWYoZXhpc3RpbmdQcm9qZWN0c1tpXS50YXNrW2pdLmlkID09PSB0YXNrVG9VcGRhdGUuaWQpe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm1hdGNoXCIpO1xuICAgICAgICAgICAgICAgICAgICBleGlzdGluZ1Byb2plY3RzW2ldLnRhc2tbal0uZGVzY3JpcHRpb24gPSBuZXdOYW1lO1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIlByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KGV4aXN0aW5nUHJvamVjdHMpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9qZWN0c0Zyb21TdG9yYWdlKCkge1xuICAgIGNvbnN0IHN0b3JlZFByb2plY3RzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJQcm9qZWN0c1wiKTtcbiAgICByZXR1cm4gc3RvcmVkUHJvamVjdHMgPyBKU09OLnBhcnNlKHN0b3JlZFByb2plY3RzKSA6IFtdO1xufSIsImltcG9ydCB7IHN0b3JlVGFza3MsIGRlbGV0ZVRhc2ssIHVwZGF0ZVRhc2tOYW1lIH0gZnJvbSBcIi4vc3RvcmFnZVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGFzayhjcmVhdGVOZXdQcm9qZWN0KXtcbiAgICBsZXQgZGF0YUNvdW50ZXIgPSAwO1xuICAgIGxldCB0YXNrQ291bnRlciA9IDA7XG5cbiAgICBjb25zdCB0YXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBcbiAgICAvL0RPTSBmb3IgYWRkaW5nIFRhc2tzIGludG8gUHJvamVjdHNcbiAgICBjb25zdCBhZGRUYXNrRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBhZGRUYXNrRm9ybS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICBhZGRUYXNrRm9ybS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwic2V0UHJvcGVydHlcIik7XG4gICAgYWRkVGFza0Zvcm0uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJzZXRQcm9wZXJ0eVwiKTtcbiAgICBcbiAgICBjb25zdCBhZGRMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICBhZGRMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJzZXRQcm9wZXJ0eVwiKTtcbiAgICBhZGRMYWJlbC5pbm5lckhUTUwgPSBcIlRhc2sgTmFtZTpcIjtcbiAgICBcbiAgICB0YXNrRGl2LmNsYXNzTGlzdC5hZGQoXCJ0YXNrRGl2XCIpO1xuICAgIFxuICAgIC8vRE9NIGZvciBhZGRpbmcgcHJpb3JpdHkgb24gVGFza3NcbiAgICBjb25zdCBhZGRQcmlvRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7ICBcbiAgICBhZGRQcmlvRm9ybS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwic2V0UHJpb1wiKTtcbiAgICBhZGRQcmlvRm9ybS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInNldFByaW9cIik7XG4gICAgXG4gICAgY29uc3Qgb3B0aW9uc0hpZ2ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgIG9wdGlvbnNIaWdoLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIFwiaGlnaFwiKTtcbiAgICBjb25zdCBvcHRpb25zVGV4dEhpZ2ggPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIkhpZ2hcIik7XG4gICAgXG4gICAgY29uc3Qgb3B0aW9uc01lZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgb3B0aW9uc01lZC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBcIm1lZGl1bVwiKTtcbiAgICBjb25zdCBvcHRpb25zVGV4dE1lZCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiTWVkaXVtXCIpO1xuICAgIFxuICAgIGNvbnN0IG9wdGlvbnNMb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgIG9wdGlvbnNMb3cuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJsb3dcIik7XG4gICAgY29uc3Qgb3B0aW9uc1RleHRMb3cgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIkxvd1wiKTtcbiAgICBcbiAgICBvcHRpb25zSGlnaC5hcHBlbmRDaGlsZChvcHRpb25zVGV4dEhpZ2gpO1xuICAgIG9wdGlvbnNNZWQuYXBwZW5kQ2hpbGQob3B0aW9uc1RleHRNZWQpO1xuICAgIG9wdGlvbnNMb3cuYXBwZW5kQ2hpbGQob3B0aW9uc1RleHRMb3cpO1xuICAgIGFkZFByaW9Gb3JtLmFwcGVuZENoaWxkKG9wdGlvbnNIaWdoKTtcbiAgICBhZGRQcmlvRm9ybS5hcHBlbmRDaGlsZChvcHRpb25zTWVkKTtcbiAgICBhZGRQcmlvRm9ybS5hcHBlbmRDaGlsZChvcHRpb25zTG93KTtcbiAgICBcbiAgICBjb25zdCBhZGRMYWJlbFByaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgYWRkTGFiZWxQcmlvLnNldEF0dHJpYnV0ZShcImZvclwiLCBcInNldFByaW9cIik7XG4gICAgYWRkTGFiZWxQcmlvLmlubmVySFRNTCA9IFwiQWRkIFByaW9yaXR5XCI7XG4gICAgXG4gICAgLy9ET00gZm9yIGFkZGluZyBkdWUgZGF0ZSBvbiB0YXNrc1xuICAgIGNvbnN0IGFkZFRhc2tEdWVEYXRlRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBhZGRUYXNrRHVlRGF0ZUZvcm0uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImRhdGVcIik7XG4gICAgYWRkVGFza0R1ZURhdGVGb3JtLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJ0YXNrRHVlRGF0ZVwiKTtcbiAgICBhZGRUYXNrRHVlRGF0ZUZvcm0uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJ0YXNrRHVlRGF0ZVwiKTtcbiAgICBhZGRUYXNrRHVlRGF0ZUZvcm0uc2V0QXR0cmlidXRlKFwicmVxdWlyZWRcIiwgXCJcIilcbiAgICBcbiAgICBjb25zdCBhZGRUYXNrRHVlRGF0ZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgIGFkZFRhc2tEdWVEYXRlTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwidGFza0R1ZURhdGVcIik7XG4gICAgYWRkVGFza0R1ZURhdGVMYWJlbC5pbm5lckhUTUwgPSBcIkR1ZTogXCI7XG4gICAgXG4gICAgLy9ET00gZm9yIGFkZGluZyBidXR0b24gdG8gYWRkIFRhc2tzXG4gICAgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBhZGRCdXR0b24uaW5uZXJIVE1MID0gXCJhZGRcIlxuXG4gICAgLy9ET00gZm9yIGFkZGluZyB0YXNrcyBvcHRpb25zIGludG8gYSBkaXZcbiAgICBjb25zdCB0YXNrT3B0aW9uc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFza09wdGlvbnNEaXYuY2xhc3NMaXN0LmFkZChcInRhc2tPcHRpb25zXCIpICAgICAgXG4gICAgICAgIFxuICAgIC8vVGFza3MgYmVpbmcgYWRkZWQgdG8gYXJyYXlcbiAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XG4gICAgICAgIGNvbnN0IHRhc2tWYWx1ZSA9IGFkZFRhc2tGb3JtLnZhbHVlO1xuICAgICAgICBjb25zdCBwcmlvVmFsdWUgPSBhZGRQcmlvRm9ybS52YWx1ZTtcbiAgICAgICAgY29uc3QgZHVlRGF0ZVZhbHVlID0gYWRkVGFza0R1ZURhdGVGb3JtLnZhbHVlO1xuXG4gICAgICAgIC8vIGlmKHRhc2tWYWx1ZT09XCJcInx8cHJpb1ZhbHVlPT1cIlwifHxkdWVEYXRlVmFsdWU9PVwiXCIpe1xuICAgICAgICAvLyByZXR1cm4gYWxlcnQoXCJGaWxsIG91dCBhbGwgdGhlIGZpZWxkc1wiKVxuICAgICAgICAvLyB9XG4gICAgXG4gICAgICAgICBjcmVhdGVOZXdQcm9qZWN0LmFkZFRhc2soeyBcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0YXNrVmFsdWUsXG4gICAgICAgICAgICBwcmlvcml0eTogcHJpb1ZhbHVlLFxuICAgICAgICAgICAgZHVlRGF0ZTogZHVlRGF0ZVZhbHVlLFxuICAgICAgICAgICAgaWQ6IGRhdGFDb3VudGVyKyssXG4gICAgICAgIH0pO1xuICAgICAgICB0YXNrQ291bnRlcisrO1xuICAgICAgICBzdG9yZVRhc2tzKGNyZWF0ZU5ld1Byb2plY3QudGFzaywgY3JlYXRlTmV3UHJvamVjdCk7XG5cbiAgICAgICAgLy9ET00gZm9yIGRpc3BsYXlpbmcgdGFza3NcbiAgICAgICAgY29uc3QgY3VycmVudFRhc2tzRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY3VycmVudFRhc2tzRGl2LmNsYXNzTGlzdC5hZGQoXCJjdXJyZW50VGFza3NcIik7XG4gICAgICAgIGN1cnJlbnRUYXNrc0Rpdi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIsIHRhc2tDb3VudGVyIC0xKTtcbiAgICAgICAgICAgIFxuICAgICAgICBhZGRUYXNrRm9ybS52YWx1ZSA9IFwiXCI7XG4gICAgICAgIGNvbnNvbGUubG9nKGNyZWF0ZU5ld1Byb2plY3QpO1xuXG4gICAgICAgIGNvbnN0IGdldFRhc2tEaXZJZCA9IGN1cnJlbnRUYXNrc0Rpdi5kYXRhc2V0LmlkO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKGdldFRhc2tEaXZJZCArIFwiZm9yIGN1cnJlbnR0YXNrRGl2XCIpXG4gICAgICAgIGN1cnJlbnRUYXNrc0Rpdi5pbm5lckhUTUwgPSBcbiAgICAgICAgICAgIGBUYXNrIG5hbWU6ICR7Y3JlYXRlTmV3UHJvamVjdC5nZXREZXNjcmlwdGlvbigpW2NyZWF0ZU5ld1Byb2plY3QudGFzay5sZW5ndGggLTFdfSxcbiAgICAgICAgICAgICBwcmlvcml0eTogJHtjcmVhdGVOZXdQcm9qZWN0LmdldFByaW8oKVtjcmVhdGVOZXdQcm9qZWN0LnRhc2subGVuZ3RoIC0xXX0sXG4gICAgICAgICAgICAgaXQgaXMgZHVlIHRpbGwgJHtjcmVhdGVOZXdQcm9qZWN0LmdldER1ZURhdGUoKVtjcmVhdGVOZXdQcm9qZWN0LnRhc2subGVuZ3RoIC0xXX1gO1xuXG5cbiAgICAgICAgLy9NYXJraW5nIGFzIGNvbXBsZXRlXG4gICAgICAgIGNvbnN0IGNvbXBsZXRlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgY29tcGxldGVCdXR0b24uaW5uZXJIVE1MPSBcIk1hcmsgYXMgY29tcGxldGVcIjtcblxuICAgICAgICBjb21wbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCk9PntcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3JlYXRlTmV3UHJvamVjdC50YXNrLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICBpZihjcmVhdGVOZXdQcm9qZWN0LnRhc2tbaV0uaWQgPT0gZ2V0VGFza0RpdklkKXsgXG4gICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRUYXNrc0Rpdi5jbGFzc0xpc3QuY29udGFpbnMoXCJjb21wbGV0ZVwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFza3NEaXYuY2xhc3NMaXN0LnJlbW92ZShcImNvbXBsZXRlXCIpXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFRhc2tzRGl2LmNsYXNzTGlzdC5hZGQoXCJjb21wbGV0ZVwiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIC8vRGVsZXRpbmcgVGFza3NcbiAgICAgICAgY29uc3QgZGVsZXRlVGFza0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGRlbGV0ZVRhc2tCdXR0b24uY2xhc3NMaXN0LmFkZChcImRlbGV0ZVRhc2tcIik7XG4gICAgICAgIGRlbGV0ZVRhc2tCdXR0b24uaW5uZXJIVE1MID0gXCJEZWxldGUgVGFza1wiO1xuXG4gICAgICAgIGRlbGV0ZVRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNyZWF0ZU5ld1Byb2plY3QudGFzay5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYoY3JlYXRlTmV3UHJvamVjdC50YXNrW2ldLmlkID09IGdldFRhc2tEaXZJZCl7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZVRhc2soY3JlYXRlTmV3UHJvamVjdC50YXNrW2ldLCBjcmVhdGVOZXdQcm9qZWN0KVxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVOZXdQcm9qZWN0LnRhc2suc3BsaWNlKGksMSk7ICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFza3NEaXYuaW5uZXJIVE1MID0gXG4gICAgICAgICAgICAgICAgICAgIGBUYXNrIG5hbWU6ICR7Y3JlYXRlTmV3UHJvamVjdC5nZXREZXNjcmlwdGlvbigpW2ldfSxcbiAgICAgICAgICAgICAgICAgICAgIHByaW9yaXR5OiAke2NyZWF0ZU5ld1Byb2plY3QuZ2V0UHJpbygpW2ldfSxcbiAgICAgICAgICAgICAgICAgICAgIGl0IGlzIGR1ZSB0aWxsICR7Y3JlYXRlTmV3UHJvamVjdC5nZXREdWVEYXRlKClbaV19YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YXNrRGl2LnJlbW92ZUNoaWxkKGN1cnJlbnRUYXNrc0Rpdik7XG4gICAgICAgICAgICA7IFxuICAgICAgICB9KTtcblxuICAgICAgICAvL0VkaXRpbmcgdGFza3NcbiAgICAgICAgY29uc3QgZWRpdFRhc2tCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICBlZGl0VGFza0J1dHRvbi5pbm5lckhUTUwgPSBcIkVkaXQgTmFtZVwiO1xuXG4gICAgICAgIGVkaXRUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+e1xuICAgICAgICAgICAgbGV0IGVkaXRUYXNrTmFtZSA9IHByb21wdChcIk5ldyBUYXNrIG5hbWU6XCIpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNyZWF0ZU5ld1Byb2plY3QudGFzay5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYoY3JlYXRlTmV3UHJvamVjdC50YXNrW2ldLmlkID09IGdldFRhc2tEaXZJZCl7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRhc2tOYW1lKGNyZWF0ZU5ld1Byb2plY3QudGFza1tpXSxjcmVhdGVOZXdQcm9qZWN0LGVkaXRUYXNrTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZU5ld1Byb2plY3QudGFza1tpXS5kZXNjcmlwdGlvbiA9IGVkaXRUYXNrTmFtZTtcblxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFza3NEaXYuaW5uZXJIVE1MID0gXG4gICAgICAgICAgICAgICAgICAgIGBUYXNrIG5hbWU6ICR7Y3JlYXRlTmV3UHJvamVjdC5nZXREZXNjcmlwdGlvbigpW2ldfSxcbiAgICAgICAgICAgICAgICAgICAgIHByaW9yaXR5OiAke2NyZWF0ZU5ld1Byb2plY3QuZ2V0UHJpbygpW2ldfSxcbiAgICAgICAgICAgICAgICAgICAgIGl0IGlzIGR1ZSB0aWxsICR7Y3JlYXRlTmV3UHJvamVjdC5nZXREdWVEYXRlKClbaV19YDsgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgY29uc29sZS5sb2coY3JlYXRlTmV3UHJvamVjdClcbiAgICAgICAgY3VycmVudFRhc2tzRGl2LmFwcGVuZENoaWxkKGNvbXBsZXRlQnV0dG9uKTtcbiAgICAgICAgY3VycmVudFRhc2tzRGl2LmFwcGVuZENoaWxkKGVkaXRUYXNrQnV0dG9uKTtcbiAgICAgICAgY3VycmVudFRhc2tzRGl2LmFwcGVuZENoaWxkKGRlbGV0ZVRhc2tCdXR0b24pO1xuICAgICAgICBcbiAgICAgICAgfSlcblxuICAgICAgICB0YXNrRGl2LmFwcGVuZENoaWxkKGN1cnJlbnRUYXNrc0Rpdik7XG4gICAgICAgIGN1cnJlbnRUYXNrc0Rpdi5hcHBlbmRDaGlsZChjb21wbGV0ZUJ1dHRvbik7XG4gICAgICAgIGN1cnJlbnRUYXNrc0Rpdi5hcHBlbmRDaGlsZChlZGl0VGFza0J1dHRvbik7XG4gICAgICAgIGN1cnJlbnRUYXNrc0Rpdi5hcHBlbmRDaGlsZChkZWxldGVUYXNrQnV0dG9uKTtcbn0pXG4gXG4gICAgdGFza09wdGlvbnNEaXYuYXBwZW5kQ2hpbGQoYWRkTGFiZWwpO1xuICAgIHRhc2tPcHRpb25zRGl2LmFwcGVuZENoaWxkKGFkZFRhc2tGb3JtKTtcbiAgICB0YXNrT3B0aW9uc0Rpdi5hcHBlbmRDaGlsZChhZGRMYWJlbFByaW8pO1xuICAgIHRhc2tPcHRpb25zRGl2LmFwcGVuZENoaWxkKGFkZFByaW9Gb3JtKTtcbiAgICB0YXNrT3B0aW9uc0Rpdi5hcHBlbmRDaGlsZChhZGRUYXNrRHVlRGF0ZUxhYmVsKTtcbiAgICB0YXNrT3B0aW9uc0Rpdi5hcHBlbmRDaGlsZChhZGRUYXNrRHVlRGF0ZUZvcm0pO1xuICAgIHRhc2tPcHRpb25zRGl2LmFwcGVuZENoaWxkKGFkZEJ1dHRvbik7XG4gICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrT3B0aW9uc0Rpdik7XG5cbiAgICByZXR1cm4gdGFza0Rpdjtcbn0iLCJleHBvcnQgZnVuY3Rpb24gZGlzcGxheVByb2plY3RGcm9tU3RvcmFnZSh0aGVOYW1lSXMpe1xuXG4gICAgbGV0IGV4aXN0aW5nUHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiUHJvamVjdHNcIikpIHx8IFtdO1xuXG4gICAgaWYgKGV4aXN0aW5nUHJvamVjdHMubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV4aXN0aW5nUHJvamVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBwcm9qZWN0IG5hbWUgbWF0Y2hlcyB0aGUgcHJvdmlkZWQgbmFtZVxuICAgICAgICAgICAgaWYgKGV4aXN0aW5nUHJvamVjdHNbaV0ucHJvamVjdE5hbWUgPT09IHRoZU5hbWVJcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGVOYW1lSXM7IC8vIFJldHVybiB0aGUgcHJvdmlkZWQgbmFtZSBpZiBmb3VuZFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgdGhlIHByb3ZpZGVkIG5hbWUgaXMgbm90IGZvdW5kLCByZXR1cm4gdGhlIG5hbWUgb2YgdGhlIGxhc3QgcHJvamVjdFxuICAgICAgICByZXR1cm4gZXhpc3RpbmdQcm9qZWN0c1tleGlzdGluZ1Byb2plY3RzLmxlbmd0aCAtIDFdLnByb2plY3ROYW1lO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGVOYW1lSXM7XG4gICAgfVxufSIsImltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9jb25zdHJ1Y3RvclwiO1xuaW1wb3J0IHsgY3JlYXRlVGFzayB9IGZyb20gXCIuL3Rhc2tzXCI7XG5pbXBvcnQgeyBzdG9yZVByb2plY3QsIGRlbGV0ZVByb2plY3QsIHVwZGF0ZVByb2plY3ROYW1lLCBnZXRQcm9qZWN0c0Zyb21TdG9yYWdlfSBmcm9tIFwiLi9zdG9yYWdlXCI7XG5pbXBvcnQgeyBkaXNwbGF5UHJvamVjdEZyb21TdG9yYWdlIH0gZnJvbSBcIi4vZGlzcGxheVwiO1xuXG5cbmNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRlbnRcIik7XG5jb25zdCBwcm9qZWN0TmFtZUZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3ROYW1lXCIpO1xuY29uc3Qgc3ViQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJtaXRcIik7XG5cbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3Qgc3RvcmVkUHJvamVjdHMgPSBnZXRQcm9qZWN0c0Zyb21TdG9yYWdlKCk7XG4gICAgc3RvcmVkUHJvamVjdHMuZm9yRWFjaCgoc3RvcmVkUHJvamVjdCkgPT4ge1xuICAgICAgICBkaXNwbGF5UHJvamVjdChzdG9yZWRQcm9qZWN0KTtcbiAgICB9KTtcbn07XG5cbnN1YkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCk9PntcbiAgICAvL0RPTSBmb3IgYWRkaW5nIHByb2plY3RzXG4gICAgY29uc3QgcHJvamVjdE5hbWVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHByb2plY3ROYW1lRGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIFwicHJvamVjdE5hbWVEaXZcIik7XG4gICAgY29uc3QgcHJvamVjdEhlYWRsaW5lRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcHJvamVjdEhlYWRsaW5lRGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIFwicHJvamVjdEhlYWRsaW5lXCIpO1xuICAgIGNvbnN0IHByb2plY3RIMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbiAgICBsZXQgdGhlTmFtZUlzID0gcHJvamVjdE5hbWVGb3JtLnZhbHVlO1xuICAgIGxldCBjcmVhdGVOZXdQcm9qZWN0ID0gbmV3IFByb2plY3QodGhlTmFtZUlzKTtcblxuICAgIGlmKHN0b3JlUHJvamVjdChjcmVhdGVOZXdQcm9qZWN0KSA9PT1mYWxzZSApe1xuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKHByb2plY3ROYW1lRGl2KTtcbiAgICAgICAgbGV0IGV4aXN0aW5nUHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiUHJvamVjdHNcIikpIHx8IFtdOyAgICAgICAgXG4gICAgfTtcblxuICAgIC8vcHJvamVjdEgzLmlubmVySFRNTCA9IGBQcm9qZWN0IG5hbWU6ICR7dGhlTmFtZUlzfWA7XG4gICAgcHJvamVjdEgzLmlubmVySFRNTCA9IGBQcm9qZWN0IG5hbWU6IGAgKyBkaXNwbGF5UHJvamVjdEZyb21TdG9yYWdlKHRoZU5hbWVJcyk7XG5cblxuICAgIGNvbnN0IHRhc2tEaXYgPSBjcmVhdGVUYXNrKGNyZWF0ZU5ld1Byb2plY3QpO1xuXG4gICAgY29uc3QgcmVtb3ZlUHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgcmVtb3ZlUHJvamVjdEJ0bi5pbm5lckhUTUwgPSBcIkRlbGV0ZSBQcm9qZWN0XCI7ICAgXG5cbiAgICBjb25zdCBlZGl0UHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgZWRpdFByb2plY3RCdG4uaW5uZXJIVE1MID0gXCJFZGl0IFByb2plY3RcIjtcblxuICAgXG5cbiAgICBwcm9qZWN0TmFtZURpdi5hcHBlbmRDaGlsZChwcm9qZWN0SGVhZGxpbmVEaXYpO1xuICAgIHByb2plY3RIZWFkbGluZURpdi5hcHBlbmRDaGlsZChwcm9qZWN0SDMpXG4gICAgcHJvamVjdEhlYWRsaW5lRGl2LmFwcGVuZENoaWxkKHJlbW92ZVByb2plY3RCdG4pO1xuICAgIHByb2plY3RIZWFkbGluZURpdi5hcHBlbmRDaGlsZChlZGl0UHJvamVjdEJ0bik7XG4gICAgcHJvamVjdE5hbWVEaXYuYXBwZW5kQ2hpbGQodGFza0Rpdik7XG5cbiAgICByZW1vdmVQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCgpPT57XG4gICAgICAgIGNvbnRlbnQucmVtb3ZlQ2hpbGQocHJvamVjdE5hbWVEaXYpO1xuICAgICAgICBkZWxldGVQcm9qZWN0KGNyZWF0ZU5ld1Byb2plY3QpXG4gICAgfSlcblxuICAgIGVkaXRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+e1xuICAgICAgICBsZXQgbmV3TmFtZUlzID0gcHJvbXB0KFwiZW50ZXIgbmV3IHByb2plY3QgbmFtZTpcIik7XG4gICAgICAgIHVwZGF0ZVByb2plY3ROYW1lKGNyZWF0ZU5ld1Byb2plY3QsIG5ld05hbWVJcylcbiAgICAgICAgY29uc29sZS5sb2cobmV3TmFtZUlzKTtcbiAgICAgICAgdGhlTmFtZUlzID0gbmV3TmFtZUlzO1xuICAgICAgICBjcmVhdGVOZXdQcm9qZWN0LnByb2plY3ROYW1lID0gdGhlTmFtZUlzO1xuXG4gICAgICAgIHByb2plY3RIMy5pbm5lckhUTUwgPSBgUHJvamVjdCBuYW1lIGlzOiAke3RoZU5hbWVJc31gO1xuICAgICAgICBwcm9qZWN0SDMuYXBwZW5kQ2hpbGQocmVtb3ZlUHJvamVjdEJ0bik7XG4gICAgICAgIHByb2plY3RIMy5hcHBlbmRDaGlsZChlZGl0UHJvamVjdEJ0bik7XG4gICAgfSlcbiAgICBcbiAgICBwcm9qZWN0TmFtZUZvcm0udmFsdWUgPSBcIlwiO1xuICAgIGNvbnNvbGUubG9nKGNyZWF0ZU5ld1Byb2plY3QpO1xufSk7XG5cblxuLy9EdXBsaWNhdGUgY29kZSB0byBzaG93IGRlZmF1bHQgcHJvamVjdCBvbiBwYWdlIGxvYWRcbi8vIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpe1xuLy8gICAgIGNvbnN0IGRlZmF1bHRQcm9qZWN0ID0gbmV3IFByb2plY3QoXCJEZWZhdWx0IFByb2plY3RcIik7XG4vLyAgICAgZGlzcGxheVByb2plY3QoZGVmYXVsdFByb2plY3QpO1xuLy8gfVxuXG4vLyBmdW5jdGlvbiBkaXNwbGF5UHJvamVjdChwcm9qZWN0KSB7XG4vLyAgICAgY29uc3QgcHJvamVjdE5hbWVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuLy8gICAgIHByb2plY3ROYW1lRGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIFwicHJvamVjdE5hbWVEaXZcIik7XG4vLyAgICAgY29uc3QgcHJvamVjdEhlYWRsaW5lRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4vLyAgICAgcHJvamVjdEhlYWRsaW5lRGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIFwicHJvamVjdEhlYWRsaW5lXCIpO1xuLy8gICAgIGNvbnN0IHByb2plY3RIMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbi8vICAgICBwcm9qZWN0SDMuaW5uZXJIVE1MID0gYFByb2plY3QgbmFtZSBpczogJHtwcm9qZWN0LnByb2plY3ROYW1lfWA7XG5cbi8vICAgICBjb25zdCB0YXNrRGl2ID0gY3JlYXRlVGFzayhwcm9qZWN0KTtcblxuLy8gICAgIGNvbnN0IHJlbW92ZVByb2plY3RCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuLy8gICAgIHJlbW92ZVByb2plY3RCdG4uaW5uZXJIVE1MID0gXCJEZWxldGUgUHJvamVjdFwiOyAgIFxuXG4vLyAgICAgY29uc3QgZWRpdFByb2plY3RCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuLy8gICAgIGVkaXRQcm9qZWN0QnRuLmlubmVySFRNTCA9IFwiRWRpdCBQcm9qZWN0XCI7XG5cbiAgICBcbi8vICAgICBjb250ZW50LmFwcGVuZENoaWxkKHByb2plY3ROYW1lRGl2KTtcbi8vICAgICBwcm9qZWN0TmFtZURpdi5hcHBlbmRDaGlsZChwcm9qZWN0SGVhZGxpbmVEaXYpO1xuLy8gICAgIHByb2plY3RIZWFkbGluZURpdi5hcHBlbmRDaGlsZChwcm9qZWN0SDMpXG4vLyAgICAgLy9wcm9qZWN0TmFtZURpdi5hcHBlbmRDaGlsZChwcm9qZWN0SDMpO1xuLy8gICAgIHByb2plY3RIZWFkbGluZURpdi5hcHBlbmRDaGlsZChyZW1vdmVQcm9qZWN0QnRuKTtcbi8vICAgICBwcm9qZWN0SGVhZGxpbmVEaXYuYXBwZW5kQ2hpbGQoZWRpdFByb2plY3RCdG4pO1xuLy8gICAgIHByb2plY3ROYW1lRGl2LmFwcGVuZENoaWxkKHRhc2tEaXYpO1xuXG4vLyAgICAgcmVtb3ZlUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuLy8gICAgICAgICBjb250ZW50LnJlbW92ZUNoaWxkKHByb2plY3ROYW1lRGl2KTtcbi8vICAgICB9KTtcblxuLy8gICAgIGVkaXRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4vLyAgICAgICAgIGxldCBuZXdOYW1lSXMgPSBwcm9tcHQoXCJFbnRlciBuZXcgcHJvamVjdCBuYW1lOlwiKTtcbi8vICAgICAgICAgY29uc29sZS5sb2cobmV3TmFtZUlzKTtcbi8vICAgICAgICAgcHJvamVjdC5wcm9qZWN0TmFtZSA9IG5ld05hbWVJcztcbi8vICAgICAgICAgcHJvamVjdEgzLmlubmVySFRNTCA9IGBQcm9qZWN0IG5hbWUgaXM6ICR7bmV3TmFtZUlzfWA7XG4vLyAgICAgICAgIHByb2plY3RIMy5hcHBlbmRDaGlsZChyZW1vdmVQcm9qZWN0QnRuKTtcbi8vICAgICAgICAgcHJvamVjdEgzLmFwcGVuZENoaWxkKGVkaXRQcm9qZWN0QnRuKTtcbi8vICAgICB9KTtcbi8vIH1cblxuXG5mdW5jdGlvbiBkaXNwbGF5UHJvamVjdChwcm9qZWN0KSB7XG4gICAgY29uc3QgcHJvamVjdE5hbWVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHByb2plY3ROYW1lRGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIFwicHJvamVjdE5hbWVEaXZcIik7XG4gICAgY29uc3QgcHJvamVjdEhlYWRsaW5lRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcHJvamVjdEhlYWRsaW5lRGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIFwicHJvamVjdEhlYWRsaW5lXCIpO1xuICAgIGNvbnN0IHByb2plY3RIMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcblxuICAgIC8vIERpc3BsYXkgcHJvamVjdCBuYW1lIGZyb20gc3RvcmFnZVxuICAgIHByb2plY3RIMy5pbm5lckhUTUwgPSBgUHJvamVjdCBuYW1lOiAke2Rpc3BsYXlQcm9qZWN0RnJvbVN0b3JhZ2UocHJvamVjdC5wcm9qZWN0TmFtZSl9YDtcblxuICAgIGNvbnN0IHRhc2tEaXYgPSBjcmVhdGVUYXNrKHByb2plY3QpO1xuXG4gICAgY29uc3QgcmVtb3ZlUHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgcmVtb3ZlUHJvamVjdEJ0bi5pbm5lckhUTUwgPSBcIkRlbGV0ZSBQcm9qZWN0XCI7XG5cbiAgICBjb25zdCBlZGl0UHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgZWRpdFByb2plY3RCdG4uaW5uZXJIVE1MID0gXCJFZGl0IFByb2plY3RcIjtcblxuICAgIHByb2plY3ROYW1lRGl2LmFwcGVuZENoaWxkKHByb2plY3RIZWFkbGluZURpdik7XG4gICAgcHJvamVjdEhlYWRsaW5lRGl2LmFwcGVuZENoaWxkKHByb2plY3RIMyk7XG4gICAgcHJvamVjdEhlYWRsaW5lRGl2LmFwcGVuZENoaWxkKHJlbW92ZVByb2plY3RCdG4pO1xuICAgIHByb2plY3RIZWFkbGluZURpdi5hcHBlbmRDaGlsZChlZGl0UHJvamVjdEJ0bik7XG4gICAgcHJvamVjdE5hbWVEaXYuYXBwZW5kQ2hpbGQodGFza0Rpdik7XG5cbiAgICByZW1vdmVQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGNvbnRlbnQucmVtb3ZlQ2hpbGQocHJvamVjdE5hbWVEaXYpO1xuICAgICAgICBkZWxldGVQcm9qZWN0KHByb2plY3QpO1xuICAgIH0pO1xuXG4gICAgZWRpdFByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgbGV0IG5ld05hbWVJcyA9IHByb21wdChcIkVudGVyIG5ldyBwcm9qZWN0IG5hbWU6XCIpO1xuICAgICAgICB1cGRhdGVQcm9qZWN0TmFtZShwcm9qZWN0LCBuZXdOYW1lSXMpO1xuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgZGlzcGxheWVkIHByb2plY3QgbmFtZVxuICAgICAgICBwcm9qZWN0SDMuaW5uZXJIVE1MID0gYFByb2plY3QgbmFtZTogJHtkaXNwbGF5UHJvamVjdEZyb21TdG9yYWdlKG5ld05hbWVJcyl9YDtcbiAgICB9KTtcblxuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQocHJvamVjdE5hbWVEaXYpO1xufVxuXG5cblxuIl0sIm5hbWVzIjpbIlByb2plY3QiLCJjb25zdHJ1Y3RvciIsInByb2plY3ROYW1lIiwidGhpcyIsInRhc2siLCJhZGRUYXNrIiwibmV3VGFzayIsInB1c2giLCJkaXNwbGF5VGFzayIsImluZGV4IiwiY29uc29sZSIsImxvZyIsImdldERlc2NyaXB0aW9uIiwibWFwIiwiZGVzY3JpcHRpb24iLCJnZXRQcmlvIiwicHJpb3JpdHkiLCJnZXREdWVEYXRlIiwiZHVlRGF0ZSIsImdldElEIiwiaWQiLCJkZWxldGVQcm9qZWN0IiwicHJvamVjdFRvRGVsZXRlIiwiZXhpc3RpbmdQcm9qZWN0cyIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzdHJpbmdpZnkiLCJsZW5ndGgiLCJpIiwic3BsaWNlIiwic2V0SXRlbSIsInVwZGF0ZVByb2plY3ROYW1lIiwicHJvamVjdFRvRWRpdCIsIm5ld05hbWVJcyIsImRlbGV0ZVRhc2siLCJ0YXNrVG9EZWxldGUiLCJpbmRleFRvRGVsZXRlIiwiZmluZEluZGV4IiwidXBkYXRlVGFza05hbWUiLCJ0YXNrVG9VcGRhdGUiLCJuZXdOYW1lIiwiaiIsImNyZWF0ZVRhc2siLCJjcmVhdGVOZXdQcm9qZWN0IiwiZGF0YUNvdW50ZXIiLCJ0YXNrQ291bnRlciIsInRhc2tEaXYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhZGRUYXNrRm9ybSIsInNldEF0dHJpYnV0ZSIsImFkZExhYmVsIiwiaW5uZXJIVE1MIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkUHJpb0Zvcm0iLCJvcHRpb25zSGlnaCIsIm9wdGlvbnNUZXh0SGlnaCIsImNyZWF0ZVRleHROb2RlIiwib3B0aW9uc01lZCIsIm9wdGlvbnNUZXh0TWVkIiwib3B0aW9uc0xvdyIsIm9wdGlvbnNUZXh0TG93IiwiYXBwZW5kQ2hpbGQiLCJhZGRMYWJlbFByaW8iLCJhZGRUYXNrRHVlRGF0ZUZvcm0iLCJhZGRUYXNrRHVlRGF0ZUxhYmVsIiwiYWRkQnV0dG9uIiwidGFza09wdGlvbnNEaXYiLCJhZGRFdmVudExpc3RlbmVyIiwidGFza1ZhbHVlIiwidmFsdWUiLCJwcmlvVmFsdWUiLCJkdWVEYXRlVmFsdWUiLCJzdG9yZVRhc2siLCJzdG9yZVRhc2tzIiwiY3VycmVudFRhc2tzRGl2IiwiZ2V0VGFza0RpdklkIiwiZGF0YXNldCIsImNvbXBsZXRlQnV0dG9uIiwiY29udGFpbnMiLCJyZW1vdmUiLCJkZWxldGVUYXNrQnV0dG9uIiwicmVtb3ZlQ2hpbGQiLCJlZGl0VGFza0J1dHRvbiIsImVkaXRUYXNrTmFtZSIsInByb21wdCIsImRpc3BsYXlQcm9qZWN0RnJvbVN0b3JhZ2UiLCJ0aGVOYW1lSXMiLCJjb250ZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJwcm9qZWN0TmFtZUZvcm0iLCJzdWJCdXR0b24iLCJ3aW5kb3ciLCJvbmxvYWQiLCJzdG9yZWRQcm9qZWN0cyIsImdldFByb2plY3RzRnJvbVN0b3JhZ2UiLCJmb3JFYWNoIiwic3RvcmVkUHJvamVjdCIsInByb2plY3QiLCJwcm9qZWN0TmFtZURpdiIsInByb2plY3RIZWFkbGluZURpdiIsInByb2plY3RIMyIsInJlbW92ZVByb2plY3RCdG4iLCJlZGl0UHJvamVjdEJ0biIsImRpc3BsYXlQcm9qZWN0IiwiZmluZCIsInByb2plY3RPYmoiLCJhbGVydCIsInN0b3JlUHJvamVjdCJdLCJzb3VyY2VSb290IjoiIn0=