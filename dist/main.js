(()=>{"use strict";class e{constructor(e){this.projectName=e,this.task=[]}addTask(e){this.task.push(e)}displayTask(e){console.log(this.task[e-1])}getDescription(){return this.task.map((e=>e.description))}getPrio(){return this.task.map((e=>e.priority))}getDueDate(){return this.task.map((e=>e.dueDate))}getID(){return console.log(this.task.map((e=>e.id)))}}function t(e){const t=JSON.parse(localStorage.getItem("Projects"))||[];console.log(JSON.stringify(t)),console.log(t.length);for(let n=0;n<t.length;n++)t[n].projectName===e.projectName&&(console.log("deleting this"),t.splice(n,1),localStorage.setItem("Projects",JSON.stringify(t)),console.log(t))}function n(e,t){const n=JSON.parse(localStorage.getItem("Projects"))||[];for(let o=0;o<n.length;o++)n[o].projectName===e.projectName&&(n[o].projectName=t,console.log(n[o].projectName),localStorage.setItem("Projects",JSON.stringify(n)))}function o(e,t){let n=JSON.parse(localStorage.getItem("Projects"))||[];for(let o=0;o<n.length;o++)if(n[o].projectName===t.projectName){const t=n[o].task.findIndex((t=>t.id===e.id));-1!==t?(n[o].task.splice(t,1),console.log("Updated tasks:",n[o].task)):console.log("Task not found:",e)}else console.log("No match for:",t.projectName);localStorage.setItem("Projects",JSON.stringify(n))}function a(e,t,n){let o=JSON.parse(localStorage.getItem("Projects"))||[];for(let a=0;a<o.length;a++)if(o[a].projectName===t.projectName)for(let t=0;t<o[a].task.length;t++)o[a].task[t].id===e.id&&(console.log("match"),o[a].task[t].description=n,localStorage.setItem("Projects",JSON.stringify(o)))}function s(e){let t=0,n=0;const s=document.createElement("div"),c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("name","setProperty"),c.setAttribute("id","setProperty");const r=document.createElement("label");r.setAttribute("for","setProperty"),r.innerHTML="Task Name:",s.classList.add("taskDiv");const i=document.createElement("select");i.setAttribute("name","setPrio"),i.setAttribute("id","setPrio");const l=document.createElement("option");l.setAttribute("value","high");const d=document.createTextNode("High"),p=document.createElement("option");p.setAttribute("value","medium");const m=document.createTextNode("Medium"),u=document.createElement("option");u.setAttribute("value","low");const g=document.createTextNode("Low");l.appendChild(d),p.appendChild(m),u.appendChild(g),i.appendChild(l),i.appendChild(p),i.appendChild(u);const h=document.createElement("label");h.setAttribute("for","setPrio"),h.innerHTML="Add Priority";const k=document.createElement("input");k.setAttribute("type","date"),k.setAttribute("name","taskDueDate"),k.setAttribute("id","taskDueDate"),k.setAttribute("required","");const j=document.createElement("label");j.setAttribute("for","taskDueDate"),j.innerHTML="Due: ";const N=document.createElement("button");N.innerHTML="add";const f=document.createElement("div");return f.classList.add("taskOptions"),console.log("in tasks"),console.log(e),N.addEventListener("click",(()=>{const r=c.value,l=i.value,d=k.value;e.addTask({description:r,priority:l,dueDate:d,id:t++}),n++,function(e,t){let n=JSON.parse(localStorage.getItem("Projects"))||[];for(let o=0;o<n.length;o++)n[o].projectName===t.projectName?n[o].task=e:console.log("we dont match");localStorage.setItem("Projects",JSON.stringify(n))}(e.task,e);const p=document.createElement("div");p.classList.add("currentTasks"),p.setAttribute("data-id",n-1),c.value="",console.log(e);const m=p.dataset.id;console.log(m+"for currenttaskDiv"),p.innerHTML=`Task name: ${e.getDescription()[e.task.length-1]},\n             priority: ${e.getPrio()[e.task.length-1]},\n             it is due till ${e.getDueDate()[e.task.length-1]}`;const u=function(e,t,n){const o=document.createElement("button");return o.innerHTML="Mark as complete",o.addEventListener("click",(()=>{for(let o=0;o<e.task.length;o++)e.task[o].id==t&&(n.classList.contains("complete")?n.classList.remove("complete"):n.classList.add("complete"))})),o}(e,m,p),g=document.createElement("button");g.classList.add("deleteTask"),g.innerHTML="Delete Task",g.addEventListener("click",(()=>{for(let t=0;t<e.task.length;t++)e.task[t].id==m&&(o(e.task[t],e),e.task.splice(t,1),p.innerHTML=`Task name: ${e.getDescription()[t]},\n                     priority: ${e.getPrio()[t]},\n                     it is due till ${e.getDueDate()[t]}`);s.removeChild(p)}));const h=document.createElement("button");h.innerHTML="Edit Name",h.addEventListener("click",(()=>{let t=prompt("New Task name:");for(let n=0;n<e.task.length;n++)e.task[n].id==m&&(a(e.task[n],e,t),e.task[n].description=t,p.innerHTML=`Task name: ${e.getDescription()[n]},\n                     priority: ${e.getPrio()[n]},\n                     it is due till ${e.getDueDate()[n]}`);console.log(e),p.appendChild(u),p.appendChild(h),p.appendChild(g)})),s.appendChild(p),p.appendChild(u),p.appendChild(h),p.appendChild(g)})),f.appendChild(r),f.appendChild(c),f.appendChild(h),f.appendChild(i),f.appendChild(j),f.appendChild(k),f.appendChild(N),s.appendChild(f),s}function c(e){let t=JSON.parse(localStorage.getItem("Projects"))||[];if(t.length>0){for(let n=0;n<t.length;n++)if(t[n].projectName===e)return e;return t[t.length-1].projectName}return e}const r=document.getElementById("content"),i=document.getElementById("projectName"),l=document.getElementById("submit");window.onload=function(){const o=function(){const e=localStorage.getItem("Projects");return e?JSON.parse(e):[]}();console.log("getting tasks"),console.log(o[0].task),o.forEach((o=>{console.log("tasksins"),console.log(o.task);const a=new e(o.projectName);console.log(a),console.log("before tasks"),console.log(a),o.task.forEach((e=>{a.addTask({description:e.description,priority:e.priority,dueDate:e.dueDate,id:e.id})})),console.log("after tasks"),console.log(a),function(e){console.log("here"),console.log(e);const o=document.createElement("div");o.setAttribute("id","projectNameDiv");const a=document.createElement("div");a.setAttribute("id","projectHeadline");const i=document.createElement("h3");i.innerHTML=`Project name: ${c(e.projectName)}`;const l=s(e),d=document.createElement("button");d.innerHTML="Delete Project";const p=document.createElement("button");p.innerHTML="Edit Project",o.appendChild(a),a.appendChild(i),a.appendChild(d),a.appendChild(p),o.appendChild(l),e.task.forEach((e=>{const t=document.createElement("div");t.classList.add("currentTasks"),t.innerHTML=`\n            Task name: ${e.description},\n            priority: ${e.priority},\n            it is due till ${e.dueDate}`,l.appendChild(t)})),d.addEventListener("click",(()=>{r.removeChild(o),t(e)})),p.addEventListener("click",(()=>{let t=prompt("Enter new project name:");n(e,t),i.innerHTML=`Project name: ${c(t)}`})),r.appendChild(o)}(a)}))},l.addEventListener("click",(()=>{const o=document.createElement("div");o.setAttribute("id","projectNameDiv");const a=document.createElement("div");a.setAttribute("id","projectHeadline");const l=document.createElement("h3");let d=i.value,p=new e(d);!1===function(e){let t=JSON.parse(localStorage.getItem("Projects"))||[];return t.find((t=>t.projectName===e.projectName))?(alert("Names are the same"),!0):(t.push(e),localStorage.setItem("Projects",JSON.stringify(t)),console.log("Project added successfully"),!1)}(p)&&(r.appendChild(o),JSON.parse(localStorage.getItem("Projects"))),l.innerHTML="Project name: "+c(d);const m=s(p),u=document.createElement("button");u.innerHTML="Delete Project";const g=document.createElement("button");g.innerHTML="Edit Project",o.appendChild(a),a.appendChild(l),a.appendChild(u),a.appendChild(g),o.appendChild(m),u.addEventListener("click",(()=>{r.removeChild(o),t(p)})),g.addEventListener("click",(()=>{let e=prompt("enter new project name:");n(p,e),console.log(e),d=e,p.projectName=d,l.innerHTML=`Project name is: ${d}`,l.appendChild(u),l.appendChild(g)})),i.value="",console.log(p)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L3RvZG8tdG9wLy4vc3JjL3N0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vdG9kby10b3AvLi9zcmMvdGFza3MuanMiLCJ3ZWJwYWNrOi8vdG9kby10b3AvLi9zcmMvYnV0dG9ucy5qcyIsIndlYnBhY2s6Ly90b2RvLXRvcC8uL3NyYy9kaXNwbGF5LmpzIiwid2VicGFjazovL3RvZG8tdG9wLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBQcm9qZWN0IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9qZWN0TmFtZSl7XG4gICAgICAgIHRoaXMucHJvamVjdE5hbWUgPSBwcm9qZWN0TmFtZTtcbiAgICAgICAgdGhpcy50YXNrID0gW107XG4gICAgfVxuXG4gICAgYWRkVGFzayhuZXdUYXNrKXtcbiAgICAgICAgdGhpcy50YXNrLnB1c2gobmV3VGFzayk7XG4gICAgfVxuXG4gICAgZGlzcGxheVRhc2soaW5kZXgpe1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnRhc2tbaW5kZXgtMV0pXG4gICAgfVxuXG4gICAgZ2V0RGVzY3JpcHRpb24oKXtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFzay5tYXAodGFzayA9PiB0YXNrLmRlc2NyaXB0aW9uKTsgXG4gICAgfVxuXG4gICAgZ2V0UHJpbygpe1xuICAgICAgICByZXR1cm4gdGhpcy50YXNrLm1hcCh0YXNrID0+IHRhc2sucHJpb3JpdHkpOyBcbiAgICB9XG5cbiAgICBnZXREdWVEYXRlKCl7XG4gICAgICAgIHJldHVybiB0aGlzLnRhc2subWFwKHRhc2sgPT4gdGFzay5kdWVEYXRlKTsgXG4gICAgfVxuXG4gICAgZ2V0SUQoKXtcbiAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKHRoaXMudGFzay5tYXAodGFzayA9PiB0YXNrLmlkKSk7XG59XG59IiwiXG5leHBvcnQgZnVuY3Rpb24gc3RvcmVQcm9qZWN0KHByb2plY3QpIHtcbiAgICBcbiAgICBsZXQgZXhpc3RpbmdQcm9qZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJQcm9qZWN0c1wiKSkgfHwgW107XG5cbiAgICAvLyBDaGVjayBpZiB0aGUgcHJvamVjdCB3aXRoIHRoZSBzYW1lIG5hbWUgYWxyZWFkeSBleGlzdHNcbiAgICBjb25zdCBleGlzdGluZ1Byb2plY3QgPSBleGlzdGluZ1Byb2plY3RzLmZpbmQoKHByb2plY3RPYmopID0+IHtcbiAgICAgICAgcmV0dXJuIHByb2plY3RPYmoucHJvamVjdE5hbWUgPT09IHByb2plY3QucHJvamVjdE5hbWU7XG4gICAgfSk7XG5cbiAgICBpZiAoZXhpc3RpbmdQcm9qZWN0KSB7XG4gICAgICAgIC8vIElmIGEgcHJvamVjdCB3aXRoIHRoZSBzYW1lIG5hbWUgZXhpc3RzLCBzaG93IGFuIGFsZXJ0IGFuZCByZXR1cm5cbiAgICAgICAgYWxlcnQoXCJOYW1lcyBhcmUgdGhlIHNhbWVcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIElmIG5vIHByb2plY3Qgd2l0aCB0aGUgc2FtZSBuYW1lIGV4aXN0cywgYWRkIHRoZSBuZXcgcHJvamVjdFxuICAgICAgICBleGlzdGluZ1Byb2plY3RzLnB1c2gocHJvamVjdCk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiUHJvamVjdHNcIiwgSlNPTi5zdHJpbmdpZnkoZXhpc3RpbmdQcm9qZWN0cykpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIlByb2plY3QgYWRkZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlUHJvamVjdChwcm9qZWN0VG9EZWxldGUpIHtcblxuICAgIGNvbnN0IGV4aXN0aW5nUHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiUHJvamVjdHNcIikpIHx8IFtdO1xuICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGV4aXN0aW5nUHJvamVjdHMpKTtcbiAgICBjb25zb2xlLmxvZyhleGlzdGluZ1Byb2plY3RzLmxlbmd0aClcblxuICAgICBmb3IobGV0IGkgPSAwOyBpIDwgZXhpc3RpbmdQcm9qZWN0cy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICBpZihleGlzdGluZ1Byb2plY3RzW2ldLnByb2plY3ROYW1lPT09cHJvamVjdFRvRGVsZXRlLnByb2plY3ROYW1lKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZGVsZXRpbmcgdGhpc1wiKVxuICAgICAgICAgICAgZXhpc3RpbmdQcm9qZWN0cy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIlByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KGV4aXN0aW5nUHJvamVjdHMpKVxuICAgICAgICAgICAgY29uc29sZS5sb2coZXhpc3RpbmdQcm9qZWN0cylcbiAgICAgICAgIH1cbiAgICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUHJvamVjdE5hbWUocHJvamVjdFRvRWRpdCwgbmV3TmFtZUlzKXtcbiAgICBjb25zdCBleGlzdGluZ1Byb2plY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlByb2plY3RzXCIpKSB8fCBbXTtcblxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBleGlzdGluZ1Byb2plY3RzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgaWYoZXhpc3RpbmdQcm9qZWN0c1tpXS5wcm9qZWN0TmFtZT09PXByb2plY3RUb0VkaXQucHJvamVjdE5hbWUpe1xuICAgICAgICAgICAgZXhpc3RpbmdQcm9qZWN0c1tpXS5wcm9qZWN0TmFtZSA9IG5ld05hbWVJcztcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4aXN0aW5nUHJvamVjdHNbaV0ucHJvamVjdE5hbWUpXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIlByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KGV4aXN0aW5nUHJvamVjdHMpKVxuXG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0b3JlVGFza3Moc3RvcmVUYXNrLCBwcm9qZWN0TmFtZSl7XG4gICAgbGV0IGV4aXN0aW5nUHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiUHJvamVjdHNcIikpIHx8IFtdO1xuXG4gICAgIGZvcihsZXQgaSA9IDA7IGkgPCBleGlzdGluZ1Byb2plY3RzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgIGlmKGV4aXN0aW5nUHJvamVjdHNbaV0ucHJvamVjdE5hbWUgPT09IHByb2plY3ROYW1lLnByb2plY3ROYW1lKXtcbiAgICAgICAgICAgIGV4aXN0aW5nUHJvamVjdHNbaV0udGFzayA9IHN0b3JlVGFzaztcbiAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwid2UgZG9udCBtYXRjaFwiKVxuICAgICAgICAgfVxuICAgICB9XG4gICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiUHJvamVjdHNcIiwgSlNPTi5zdHJpbmdpZnkoZXhpc3RpbmdQcm9qZWN0cykpO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVUYXNrKHRhc2tUb0RlbGV0ZSwgcHJvamVjdE5hbWUpIHtcbiAgICBsZXQgZXhpc3RpbmdQcm9qZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJQcm9qZWN0c1wiKSkgfHwgW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV4aXN0aW5nUHJvamVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGV4aXN0aW5nUHJvamVjdHNbaV0ucHJvamVjdE5hbWUgPT09IHByb2plY3ROYW1lLnByb2plY3ROYW1lKSB7XG5cbiAgICAgICAgICAgIGNvbnN0IGluZGV4VG9EZWxldGUgPSBleGlzdGluZ1Byb2plY3RzW2ldLnRhc2suZmluZEluZGV4KHRhc2sgPT4gdGFzay5pZCA9PT0gdGFza1RvRGVsZXRlLmlkKTtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIHRhc2sgaXMgZm91bmQsIHJlbW92ZSBpdCBmcm9tIHRoZSAndGFzaycgYXJyYXlcbiAgICAgICAgICAgIGlmIChpbmRleFRvRGVsZXRlICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nUHJvamVjdHNbaV0udGFzay5zcGxpY2UoaW5kZXhUb0RlbGV0ZSwgMSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVcGRhdGVkIHRhc2tzOlwiLCBleGlzdGluZ1Byb2plY3RzW2ldLnRhc2spO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRhc2sgbm90IGZvdW5kOlwiLCB0YXNrVG9EZWxldGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJObyBtYXRjaCBmb3I6XCIsIHByb2plY3ROYW1lLnByb2plY3ROYW1lKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBsb2NhbCBzdG9yYWdlIHdpdGggdGhlIG1vZGlmaWVkIGFycmF5XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJQcm9qZWN0c1wiLCBKU09OLnN0cmluZ2lmeShleGlzdGluZ1Byb2plY3RzKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUYXNrTmFtZSh0YXNrVG9VcGRhdGUsIHByb2plY3ROYW1lLCBuZXdOYW1lKXtcbiAgICBsZXQgZXhpc3RpbmdQcm9qZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJQcm9qZWN0c1wiKSkgfHwgW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV4aXN0aW5nUHJvamVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGV4aXN0aW5nUHJvamVjdHNbaV0ucHJvamVjdE5hbWUgPT09IHByb2plY3ROYW1lLnByb2plY3ROYW1lKSB7XG4gICAgICAgICAgICAvL3J1biBmb3IgbG9vcCBvbiBleGlzdGluZ1Byb2plY3RzW2ldLnRhc2sgYW5kIG1hdGNoIGl0IGFnYWlucyB0YXNrVG9VcGRhdGVcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBleGlzdGluZ1Byb2plY3RzW2ldLnRhc2subGVuZ3RoOyBqKyspe1xuICAgICAgICAgICAgICAgIGlmKGV4aXN0aW5nUHJvamVjdHNbaV0udGFza1tqXS5pZCA9PT0gdGFza1RvVXBkYXRlLmlkKXtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJtYXRjaFwiKTtcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdQcm9qZWN0c1tpXS50YXNrW2pdLmRlc2NyaXB0aW9uID0gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJQcm9qZWN0c1wiLCBKU09OLnN0cmluZ2lmeShleGlzdGluZ1Byb2plY3RzKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJvamVjdHNGcm9tU3RvcmFnZSgpIHtcbiAgICBjb25zdCBzdG9yZWRQcm9qZWN0cyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiUHJvamVjdHNcIik7XG4gICAgcmV0dXJuIHN0b3JlZFByb2plY3RzID8gSlNPTi5wYXJzZShzdG9yZWRQcm9qZWN0cykgOiBbXTtcbn0iLCJpbXBvcnQgeyBzdG9yZVRhc2tzLCBkZWxldGVUYXNrLCB1cGRhdGVUYXNrTmFtZSB9IGZyb20gXCIuL3N0b3JhZ2VcIjtcbmltcG9ydCB7IGFkZENvbXBsZXRlQnV0dG9uIH0gZnJvbSBcIi4vYnV0dG9uc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGFzayhjcmVhdGVOZXdQcm9qZWN0KXtcbiAgICBsZXQgZGF0YUNvdW50ZXIgPSAwO1xuICAgIGxldCB0YXNrQ291bnRlciA9IDA7XG5cbiAgICBjb25zdCB0YXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBcbiAgICAvL0RPTSBmb3IgYWRkaW5nIFRhc2tzIGludG8gUHJvamVjdHNcbiAgICBjb25zdCBhZGRUYXNrRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBhZGRUYXNrRm9ybS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICBhZGRUYXNrRm9ybS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwic2V0UHJvcGVydHlcIik7XG4gICAgYWRkVGFza0Zvcm0uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJzZXRQcm9wZXJ0eVwiKTtcbiAgICBcbiAgICBjb25zdCBhZGRMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICBhZGRMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJzZXRQcm9wZXJ0eVwiKTtcbiAgICBhZGRMYWJlbC5pbm5lckhUTUwgPSBcIlRhc2sgTmFtZTpcIjtcbiAgICBcbiAgICB0YXNrRGl2LmNsYXNzTGlzdC5hZGQoXCJ0YXNrRGl2XCIpO1xuICAgIFxuICAgIC8vRE9NIGZvciBhZGRpbmcgcHJpb3JpdHkgb24gVGFza3NcbiAgICBjb25zdCBhZGRQcmlvRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7ICBcbiAgICBhZGRQcmlvRm9ybS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwic2V0UHJpb1wiKTtcbiAgICBhZGRQcmlvRm9ybS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInNldFByaW9cIik7XG4gICAgXG4gICAgY29uc3Qgb3B0aW9uc0hpZ2ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgIG9wdGlvbnNIaWdoLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIFwiaGlnaFwiKTtcbiAgICBjb25zdCBvcHRpb25zVGV4dEhpZ2ggPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIkhpZ2hcIik7XG4gICAgXG4gICAgY29uc3Qgb3B0aW9uc01lZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgb3B0aW9uc01lZC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBcIm1lZGl1bVwiKTtcbiAgICBjb25zdCBvcHRpb25zVGV4dE1lZCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiTWVkaXVtXCIpO1xuICAgIFxuICAgIGNvbnN0IG9wdGlvbnNMb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgIG9wdGlvbnNMb3cuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJsb3dcIik7XG4gICAgY29uc3Qgb3B0aW9uc1RleHRMb3cgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIkxvd1wiKTtcbiAgICBcbiAgICBvcHRpb25zSGlnaC5hcHBlbmRDaGlsZChvcHRpb25zVGV4dEhpZ2gpO1xuICAgIG9wdGlvbnNNZWQuYXBwZW5kQ2hpbGQob3B0aW9uc1RleHRNZWQpO1xuICAgIG9wdGlvbnNMb3cuYXBwZW5kQ2hpbGQob3B0aW9uc1RleHRMb3cpO1xuICAgIGFkZFByaW9Gb3JtLmFwcGVuZENoaWxkKG9wdGlvbnNIaWdoKTtcbiAgICBhZGRQcmlvRm9ybS5hcHBlbmRDaGlsZChvcHRpb25zTWVkKTtcbiAgICBhZGRQcmlvRm9ybS5hcHBlbmRDaGlsZChvcHRpb25zTG93KTtcbiAgICBcbiAgICBjb25zdCBhZGRMYWJlbFByaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgYWRkTGFiZWxQcmlvLnNldEF0dHJpYnV0ZShcImZvclwiLCBcInNldFByaW9cIik7XG4gICAgYWRkTGFiZWxQcmlvLmlubmVySFRNTCA9IFwiQWRkIFByaW9yaXR5XCI7XG4gICAgXG4gICAgLy9ET00gZm9yIGFkZGluZyBkdWUgZGF0ZSBvbiB0YXNrc1xuICAgIGNvbnN0IGFkZFRhc2tEdWVEYXRlRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBhZGRUYXNrRHVlRGF0ZUZvcm0uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImRhdGVcIik7XG4gICAgYWRkVGFza0R1ZURhdGVGb3JtLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJ0YXNrRHVlRGF0ZVwiKTtcbiAgICBhZGRUYXNrRHVlRGF0ZUZvcm0uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJ0YXNrRHVlRGF0ZVwiKTtcbiAgICBhZGRUYXNrRHVlRGF0ZUZvcm0uc2V0QXR0cmlidXRlKFwicmVxdWlyZWRcIiwgXCJcIilcbiAgICBcbiAgICBjb25zdCBhZGRUYXNrRHVlRGF0ZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgIGFkZFRhc2tEdWVEYXRlTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwidGFza0R1ZURhdGVcIik7XG4gICAgYWRkVGFza0R1ZURhdGVMYWJlbC5pbm5lckhUTUwgPSBcIkR1ZTogXCI7XG4gICAgXG4gICAgLy9ET00gZm9yIGFkZGluZyBidXR0b24gdG8gYWRkIFRhc2tzXG4gICAgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBhZGRCdXR0b24uaW5uZXJIVE1MID0gXCJhZGRcIlxuXG4gICAgLy9ET00gZm9yIGFkZGluZyB0YXNrcyBvcHRpb25zIGludG8gYSBkaXZcbiAgICBjb25zdCB0YXNrT3B0aW9uc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFza09wdGlvbnNEaXYuY2xhc3NMaXN0LmFkZChcInRhc2tPcHRpb25zXCIpICAgICAgXG5cbiAgICBjb25zb2xlLmxvZyhcImluIHRhc2tzXCIpXG4gICAgY29uc29sZS5sb2coY3JlYXRlTmV3UHJvamVjdClcbiAgICAgICAgXG4gICAgLy9UYXNrcyBiZWluZyBhZGRlZCB0byBhcnJheVxuICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCk9PntcbiAgICAgICAgY29uc3QgdGFza1ZhbHVlID0gYWRkVGFza0Zvcm0udmFsdWU7XG4gICAgICAgIGNvbnN0IHByaW9WYWx1ZSA9IGFkZFByaW9Gb3JtLnZhbHVlO1xuICAgICAgICBjb25zdCBkdWVEYXRlVmFsdWUgPSBhZGRUYXNrRHVlRGF0ZUZvcm0udmFsdWU7XG5cbiAgICAgICAgLy8gaWYodGFza1ZhbHVlPT1cIlwifHxwcmlvVmFsdWU9PVwiXCJ8fGR1ZURhdGVWYWx1ZT09XCJcIil7XG4gICAgICAgIC8vIHJldHVybiBhbGVydChcIkZpbGwgb3V0IGFsbCB0aGUgZmllbGRzXCIpXG4gICAgICAgIC8vIH1cbiAgICBcbiAgICAgICAgIGNyZWF0ZU5ld1Byb2plY3QuYWRkVGFzayh7IFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRhc2tWYWx1ZSxcbiAgICAgICAgICAgIHByaW9yaXR5OiBwcmlvVmFsdWUsXG4gICAgICAgICAgICBkdWVEYXRlOiBkdWVEYXRlVmFsdWUsXG4gICAgICAgICAgICBpZDogZGF0YUNvdW50ZXIrKyxcbiAgICAgICAgfSk7XG4gICAgICAgIHRhc2tDb3VudGVyKys7XG4gICAgICAgIHN0b3JlVGFza3MoY3JlYXRlTmV3UHJvamVjdC50YXNrLCBjcmVhdGVOZXdQcm9qZWN0KTtcblxuICAgICAgICAvL0RPTSBmb3IgZGlzcGxheWluZyB0YXNrc1xuICAgICAgICBjb25zdCBjdXJyZW50VGFza3NEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjdXJyZW50VGFza3NEaXYuY2xhc3NMaXN0LmFkZChcImN1cnJlbnRUYXNrc1wiKTtcbiAgICAgICAgY3VycmVudFRhc2tzRGl2LnNldEF0dHJpYnV0ZShcImRhdGEtaWRcIiwgdGFza0NvdW50ZXIgLTEpO1xuICAgICAgICAgICAgXG4gICAgICAgIGFkZFRhc2tGb3JtLnZhbHVlID0gXCJcIjtcbiAgICAgICAgY29uc29sZS5sb2coY3JlYXRlTmV3UHJvamVjdCk7XG5cbiAgICAgICAgY29uc3QgZ2V0VGFza0RpdklkID0gY3VycmVudFRhc2tzRGl2LmRhdGFzZXQuaWQ7XG5cbiAgICAgICAgY29uc29sZS5sb2coZ2V0VGFza0RpdklkICsgXCJmb3IgY3VycmVudHRhc2tEaXZcIilcbiAgICAgICAgY3VycmVudFRhc2tzRGl2LmlubmVySFRNTCA9IFxuICAgICAgICAgICAgYFRhc2sgbmFtZTogJHtjcmVhdGVOZXdQcm9qZWN0LmdldERlc2NyaXB0aW9uKClbY3JlYXRlTmV3UHJvamVjdC50YXNrLmxlbmd0aCAtMV19LFxuICAgICAgICAgICAgIHByaW9yaXR5OiAke2NyZWF0ZU5ld1Byb2plY3QuZ2V0UHJpbygpW2NyZWF0ZU5ld1Byb2plY3QudGFzay5sZW5ndGggLTFdfSxcbiAgICAgICAgICAgICBpdCBpcyBkdWUgdGlsbCAke2NyZWF0ZU5ld1Byb2plY3QuZ2V0RHVlRGF0ZSgpW2NyZWF0ZU5ld1Byb2plY3QudGFzay5sZW5ndGggLTFdfWA7XG5cblxuICAgICAgICBjb25zdCBjb21wbGV0ZUJ1dHRvbiA9IGFkZENvbXBsZXRlQnV0dG9uKGNyZWF0ZU5ld1Byb2plY3QsIGdldFRhc2tEaXZJZCwgY3VycmVudFRhc2tzRGl2KVxuXG4gICAgICAgIC8vRGVsZXRpbmcgVGFza3NcbiAgICAgICAgY29uc3QgZGVsZXRlVGFza0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGRlbGV0ZVRhc2tCdXR0b24uY2xhc3NMaXN0LmFkZChcImRlbGV0ZVRhc2tcIik7XG4gICAgICAgIGRlbGV0ZVRhc2tCdXR0b24uaW5uZXJIVE1MID0gXCJEZWxldGUgVGFza1wiO1xuXG4gICAgICAgIGRlbGV0ZVRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNyZWF0ZU5ld1Byb2plY3QudGFzay5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYoY3JlYXRlTmV3UHJvamVjdC50YXNrW2ldLmlkID09IGdldFRhc2tEaXZJZCl7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZVRhc2soY3JlYXRlTmV3UHJvamVjdC50YXNrW2ldLCBjcmVhdGVOZXdQcm9qZWN0KVxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVOZXdQcm9qZWN0LnRhc2suc3BsaWNlKGksMSk7ICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFza3NEaXYuaW5uZXJIVE1MID0gXG4gICAgICAgICAgICAgICAgICAgIGBUYXNrIG5hbWU6ICR7Y3JlYXRlTmV3UHJvamVjdC5nZXREZXNjcmlwdGlvbigpW2ldfSxcbiAgICAgICAgICAgICAgICAgICAgIHByaW9yaXR5OiAke2NyZWF0ZU5ld1Byb2plY3QuZ2V0UHJpbygpW2ldfSxcbiAgICAgICAgICAgICAgICAgICAgIGl0IGlzIGR1ZSB0aWxsICR7Y3JlYXRlTmV3UHJvamVjdC5nZXREdWVEYXRlKClbaV19YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YXNrRGl2LnJlbW92ZUNoaWxkKGN1cnJlbnRUYXNrc0Rpdik7XG4gXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vRWRpdGluZyB0YXNrc1xuICAgICAgICBjb25zdCBlZGl0VGFza0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGVkaXRUYXNrQnV0dG9uLmlubmVySFRNTCA9IFwiRWRpdCBOYW1lXCI7XG5cbiAgICAgICAgZWRpdFRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XG4gICAgICAgICAgICBsZXQgZWRpdFRhc2tOYW1lID0gcHJvbXB0KFwiTmV3IFRhc2sgbmFtZTpcIik7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3JlYXRlTmV3UHJvamVjdC50YXNrLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICBpZihjcmVhdGVOZXdQcm9qZWN0LnRhc2tbaV0uaWQgPT0gZ2V0VGFza0RpdklkKXtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGFza05hbWUoY3JlYXRlTmV3UHJvamVjdC50YXNrW2ldLGNyZWF0ZU5ld1Byb2plY3QsZWRpdFRhc2tOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlTmV3UHJvamVjdC50YXNrW2ldLmRlc2NyaXB0aW9uID0gZWRpdFRhc2tOYW1lO1xuXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUYXNrc0Rpdi5pbm5lckhUTUwgPSBcbiAgICAgICAgICAgICAgICAgICAgYFRhc2sgbmFtZTogJHtjcmVhdGVOZXdQcm9qZWN0LmdldERlc2NyaXB0aW9uKClbaV19LFxuICAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHk6ICR7Y3JlYXRlTmV3UHJvamVjdC5nZXRQcmlvKClbaV19LFxuICAgICAgICAgICAgICAgICAgICAgaXQgaXMgZHVlIHRpbGwgJHtjcmVhdGVOZXdQcm9qZWN0LmdldER1ZURhdGUoKVtpXX1gOyAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICBjb25zb2xlLmxvZyhjcmVhdGVOZXdQcm9qZWN0KVxuICAgICAgICBjdXJyZW50VGFza3NEaXYuYXBwZW5kQ2hpbGQoY29tcGxldGVCdXR0b24pO1xuICAgICAgICBjdXJyZW50VGFza3NEaXYuYXBwZW5kQ2hpbGQoZWRpdFRhc2tCdXR0b24pO1xuICAgICAgICBjdXJyZW50VGFza3NEaXYuYXBwZW5kQ2hpbGQoZGVsZXRlVGFza0J1dHRvbik7XG4gICAgICAgIFxuICAgICAgICB9KVxuXG4gICAgICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQoY3VycmVudFRhc2tzRGl2KTtcbiAgICAgICAgY3VycmVudFRhc2tzRGl2LmFwcGVuZENoaWxkKGNvbXBsZXRlQnV0dG9uKTtcbiAgICAgICAgY3VycmVudFRhc2tzRGl2LmFwcGVuZENoaWxkKGVkaXRUYXNrQnV0dG9uKTtcbiAgICAgICAgY3VycmVudFRhc2tzRGl2LmFwcGVuZENoaWxkKGRlbGV0ZVRhc2tCdXR0b24pO1xufSlcbiBcbiAgICB0YXNrT3B0aW9uc0Rpdi5hcHBlbmRDaGlsZChhZGRMYWJlbCk7XG4gICAgdGFza09wdGlvbnNEaXYuYXBwZW5kQ2hpbGQoYWRkVGFza0Zvcm0pO1xuICAgIHRhc2tPcHRpb25zRGl2LmFwcGVuZENoaWxkKGFkZExhYmVsUHJpbyk7XG4gICAgdGFza09wdGlvbnNEaXYuYXBwZW5kQ2hpbGQoYWRkUHJpb0Zvcm0pO1xuICAgIHRhc2tPcHRpb25zRGl2LmFwcGVuZENoaWxkKGFkZFRhc2tEdWVEYXRlTGFiZWwpO1xuICAgIHRhc2tPcHRpb25zRGl2LmFwcGVuZENoaWxkKGFkZFRhc2tEdWVEYXRlRm9ybSk7XG4gICAgdGFza09wdGlvbnNEaXYuYXBwZW5kQ2hpbGQoYWRkQnV0dG9uKTtcbiAgICB0YXNrRGl2LmFwcGVuZENoaWxkKHRhc2tPcHRpb25zRGl2KTtcblxuICAgIHJldHVybiB0YXNrRGl2O1xufSIsIiBpbXBvcnQgeyBkZWxldGVUYXNrIH0gZnJvbSBcIi4vc3RvcmFnZVwiO1xuIFxuIGV4cG9ydCBmdW5jdGlvbiBhZGRDb21wbGV0ZUJ1dHRvbihjcmVhdGVOZXdQcm9qZWN0LGdldFRhc2tEaXZJZCwgY3VycmVudFRhc2tzRGl2KXtcbiAvL01hcmtpbmcgYXMgY29tcGxldGVcbiAgICAgICAgY29uc3QgY29tcGxldGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICBjb21wbGV0ZUJ1dHRvbi5pbm5lckhUTUw9IFwiTWFyayBhcyBjb21wbGV0ZVwiO1xuXG4gICAgICAgIGNvbXBsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoICk9PntcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3JlYXRlTmV3UHJvamVjdC50YXNrLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICBpZihjcmVhdGVOZXdQcm9qZWN0LnRhc2tbaV0uaWQgPT0gZ2V0VGFza0RpdklkKXsgXG4gICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRUYXNrc0Rpdi5jbGFzc0xpc3QuY29udGFpbnMoXCJjb21wbGV0ZVwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFza3NEaXYuY2xhc3NMaXN0LnJlbW92ZShcImNvbXBsZXRlXCIpXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFRhc2tzRGl2LmNsYXNzTGlzdC5hZGQoXCJjb21wbGV0ZVwiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4oY29tcGxldGVCdXR0b24pXG59XG5cblxuLy8gZXhwb3J0IGZ1bmN0aW9uIGFkZERlbGV0ZUJ1dHRvbihjcmVhdGVOZXdQcm9qZWN0LCBnZXRUYXNrRGl2SWQsIGN1cnJlbnRUYXNrc0Rpdil7XG4vLyAgICAgICAgICAgICAvL0RlbGV0aW5nIFRhc2tzXG4vLyAgICAgICAgICAgICBjb25zdCBkZWxldGVUYXNrQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbi8vICAgICAgICAgICAgIGRlbGV0ZVRhc2tCdXR0b24uY2xhc3NMaXN0LmFkZChcImRlbGV0ZVRhc2tcIik7XG4vLyAgICAgICAgICAgICBkZWxldGVUYXNrQnV0dG9uLmlubmVySFRNTCA9IFwiRGVsZXRlIFRhc2tcIjtcbiAgICBcbi8vICAgICAgICAgICAgIGRlbGV0ZVRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XG4vLyAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjcmVhdGVOZXdQcm9qZWN0LnRhc2subGVuZ3RoOyBpKyspe1xuLy8gICAgICAgICAgICAgICAgICAgICBpZihjcmVhdGVOZXdQcm9qZWN0LnRhc2tbaV0uaWQgPT0gZ2V0VGFza0RpdklkKXtcbi8vICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZVRhc2soY3JlYXRlTmV3UHJvamVjdC50YXNrW2ldLCBjcmVhdGVOZXdQcm9qZWN0KVxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlTmV3UHJvamVjdC50YXNrLnNwbGljZShpLDEpOyAgXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFRhc2tzRGl2LmlubmVySFRNTCA9IFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgYFRhc2sgbmFtZTogJHtjcmVhdGVOZXdQcm9qZWN0LmdldERlc2NyaXB0aW9uKClbaV19LFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgIHByaW9yaXR5OiAke2NyZWF0ZU5ld1Byb2plY3QuZ2V0UHJpbygpW2ldfSxcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICBpdCBpcyBkdWUgdGlsbCAke2NyZWF0ZU5ld1Byb2plY3QuZ2V0RHVlRGF0ZSgpW2ldfWA7XG4vLyAgICAgICAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICAgdGFza0Rpdi5yZW1vdmVDaGlsZChjdXJyZW50VGFza3NEaXYpOyBcbi8vICAgICAgICAgICAgIH0pO1xuLy8gICAgICAgICAgICAgcmV0dXJuKGRlbGV0ZVRhc2tCdXR0b24pXG5cbi8vIH1cblxuIiwiZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlQcm9qZWN0RnJvbVN0b3JhZ2UodGhlTmFtZUlzKXtcblxuICAgIGxldCBleGlzdGluZ1Byb2plY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlByb2plY3RzXCIpKSB8fCBbXTtcblxuICAgIGlmIChleGlzdGluZ1Byb2plY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBleGlzdGluZ1Byb2plY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgcHJvamVjdCBuYW1lIG1hdGNoZXMgdGhlIHByb3ZpZGVkIG5hbWVcbiAgICAgICAgICAgIGlmIChleGlzdGluZ1Byb2plY3RzW2ldLnByb2plY3ROYW1lID09PSB0aGVOYW1lSXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhlTmFtZUlzOyAvLyBSZXR1cm4gdGhlIHByb3ZpZGVkIG5hbWUgaWYgZm91bmRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRoZSBwcm92aWRlZCBuYW1lIGlzIG5vdCBmb3VuZCwgcmV0dXJuIHRoZSBuYW1lIG9mIHRoZSBsYXN0IHByb2plY3RcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nUHJvamVjdHNbZXhpc3RpbmdQcm9qZWN0cy5sZW5ndGggLSAxXS5wcm9qZWN0TmFtZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhlTmFtZUlzO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSBcIi4vY29uc3RydWN0b3JcIjtcbmltcG9ydCB7IGNyZWF0ZVRhc2sgfSBmcm9tIFwiLi90YXNrc1wiO1xuaW1wb3J0IHsgc3RvcmVQcm9qZWN0LCBkZWxldGVQcm9qZWN0LCB1cGRhdGVQcm9qZWN0TmFtZSwgZ2V0UHJvamVjdHNGcm9tU3RvcmFnZX0gZnJvbSBcIi4vc3RvcmFnZVwiO1xuaW1wb3J0IHsgZGlzcGxheVByb2plY3RGcm9tU3RvcmFnZSB9IGZyb20gXCIuL2Rpc3BsYXlcIjtcbmltcG9ydCB7IGFkZENvbXBsZXRlQnV0dG9uIH0gZnJvbSBcIi4vYnV0dG9uc1wiO1xuXG5cbmNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRlbnRcIik7XG5jb25zdCBwcm9qZWN0TmFtZUZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3ROYW1lXCIpO1xuY29uc3Qgc3ViQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJtaXRcIik7XG5cbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3Qgc3RvcmVkUHJvamVjdHMgPSBnZXRQcm9qZWN0c0Zyb21TdG9yYWdlKCk7XG4gICAgY29uc29sZS5sb2coXCJnZXR0aW5nIHRhc2tzXCIpXG4gICAgY29uc29sZS5sb2coc3RvcmVkUHJvamVjdHNbMF0udGFzaylcblxuICAgIHN0b3JlZFByb2plY3RzLmZvckVhY2goKHN0b3JlZFByb2plY3QpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJ0YXNrc2luc1wiKVxuICAgICAgICBjb25zb2xlLmxvZyhzdG9yZWRQcm9qZWN0LnRhc2spXG4gICAgICAgIGNvbnN0IHByb2plY3RJbnN0YW5jZSA9IG5ldyBQcm9qZWN0KHN0b3JlZFByb2plY3QucHJvamVjdE5hbWUpO1xuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0SW5zdGFuY2UpXG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhcImJlZm9yZSB0YXNrc1wiKVxuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0SW5zdGFuY2UpXG4gICAgICAgIHN0b3JlZFByb2plY3QudGFzay5mb3JFYWNoKCh0YXNrKT0+e1xuICAgICAgICAgICAgcHJvamVjdEluc3RhbmNlLmFkZFRhc2soe1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0YXNrLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIHByaW9yaXR5OiB0YXNrLnByaW9yaXR5LFxuICAgICAgICAgICAgICAgIGR1ZURhdGU6IHRhc2suZHVlRGF0ZSxcbiAgICAgICAgICAgICAgICBpZDogdGFzay5pZCxcbiAgICAgICAgICAgIH0pICAgXG4gICAgICAgIFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coXCJhZnRlciB0YXNrc1wiKVxuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0SW5zdGFuY2UpXG4gICAgICAgIGRpc3BsYXlQcm9qZWN0KHByb2plY3RJbnN0YW5jZSk7XG5cbiAgICB9KTtcbiAgIFxufVxuXG4gICAvLyBwcm9qZWN0SW5zdGFuY2UuYWRkVGFzayh7ICBcbiAgICAgICAgLy8gICAgIGRlc2NyaXB0aW9uOiBwcm9qZWN0SW5zdGFuY2UudGFzay5kZXNjcmlwdGlvbixcbiAgICAgICAgLy8gICAgIHByaW9yaXR5OiBwcm9qZWN0SW5zdGFuY2UudGFzay5wcmlvcml0eSxcbiAgICAgICAgLy8gICAgIGR1ZURhdGU6IHByb2plY3RJbnN0YW5jZS50YXNrLmR1ZURhdGUsXG4gICAgICAgIC8vICAgICBpZDogcHJvamVjdEluc3RhbmNlLnRhc2suaWQsXG5cbiAgICAgICAgLy8gfSlcblxuc3ViQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+e1xuICAgIC8vRE9NIGZvciBhZGRpbmcgcHJvamVjdHNcbiAgICBjb25zdCBwcm9qZWN0TmFtZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgcHJvamVjdE5hbWVEaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwcm9qZWN0TmFtZURpdlwiKTtcbiAgICBjb25zdCBwcm9qZWN0SGVhZGxpbmVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBwcm9qZWN0SGVhZGxpbmVEaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwcm9qZWN0SGVhZGxpbmVcIik7XG4gICAgY29uc3QgcHJvamVjdEgzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xuICAgIGxldCB0aGVOYW1lSXMgPSBwcm9qZWN0TmFtZUZvcm0udmFsdWU7XG4gICAgbGV0IGNyZWF0ZU5ld1Byb2plY3QgPSBuZXcgUHJvamVjdCh0aGVOYW1lSXMpO1xuXG4gICAgaWYoc3RvcmVQcm9qZWN0KGNyZWF0ZU5ld1Byb2plY3QpID09PWZhbHNlICl7XG4gICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQocHJvamVjdE5hbWVEaXYpO1xuICAgICAgICBsZXQgZXhpc3RpbmdQcm9qZWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJQcm9qZWN0c1wiKSkgfHwgW107ICAgICAgICBcbiAgICB9O1xuXG4gICAgLy9wcm9qZWN0SDMuaW5uZXJIVE1MID0gYFByb2plY3QgbmFtZTogJHt0aGVOYW1lSXN9YDtcbiAgICBwcm9qZWN0SDMuaW5uZXJIVE1MID0gYFByb2plY3QgbmFtZTogYCArIGRpc3BsYXlQcm9qZWN0RnJvbVN0b3JhZ2UodGhlTmFtZUlzKTtcblxuXG4gICAgY29uc3QgdGFza0RpdiA9IGNyZWF0ZVRhc2soY3JlYXRlTmV3UHJvamVjdCk7XG5cbiAgICBjb25zdCByZW1vdmVQcm9qZWN0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICByZW1vdmVQcm9qZWN0QnRuLmlubmVySFRNTCA9IFwiRGVsZXRlIFByb2plY3RcIjsgICBcblxuICAgIGNvbnN0IGVkaXRQcm9qZWN0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBlZGl0UHJvamVjdEJ0bi5pbm5lckhUTUwgPSBcIkVkaXQgUHJvamVjdFwiO1xuXG4gICBcblxuICAgIHByb2plY3ROYW1lRGl2LmFwcGVuZENoaWxkKHByb2plY3RIZWFkbGluZURpdik7XG4gICAgcHJvamVjdEhlYWRsaW5lRGl2LmFwcGVuZENoaWxkKHByb2plY3RIMylcbiAgICBwcm9qZWN0SGVhZGxpbmVEaXYuYXBwZW5kQ2hpbGQocmVtb3ZlUHJvamVjdEJ0bik7XG4gICAgcHJvamVjdEhlYWRsaW5lRGl2LmFwcGVuZENoaWxkKGVkaXRQcm9qZWN0QnRuKTtcbiAgICBwcm9qZWN0TmFtZURpdi5hcHBlbmRDaGlsZCh0YXNrRGl2KTtcblxuICAgIHJlbW92ZVByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsKCk9PntcbiAgICAgICAgY29udGVudC5yZW1vdmVDaGlsZChwcm9qZWN0TmFtZURpdik7XG4gICAgICAgIGRlbGV0ZVByb2plY3QoY3JlYXRlTmV3UHJvamVjdClcbiAgICB9KVxuXG4gICAgZWRpdFByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XG4gICAgICAgIGxldCBuZXdOYW1lSXMgPSBwcm9tcHQoXCJlbnRlciBuZXcgcHJvamVjdCBuYW1lOlwiKTtcbiAgICAgICAgdXBkYXRlUHJvamVjdE5hbWUoY3JlYXRlTmV3UHJvamVjdCwgbmV3TmFtZUlzKVxuICAgICAgICBjb25zb2xlLmxvZyhuZXdOYW1lSXMpO1xuICAgICAgICB0aGVOYW1lSXMgPSBuZXdOYW1lSXM7XG4gICAgICAgIGNyZWF0ZU5ld1Byb2plY3QucHJvamVjdE5hbWUgPSB0aGVOYW1lSXM7XG5cbiAgICAgICAgcHJvamVjdEgzLmlubmVySFRNTCA9IGBQcm9qZWN0IG5hbWUgaXM6ICR7dGhlTmFtZUlzfWA7XG4gICAgICAgIHByb2plY3RIMy5hcHBlbmRDaGlsZChyZW1vdmVQcm9qZWN0QnRuKTtcbiAgICAgICAgcHJvamVjdEgzLmFwcGVuZENoaWxkKGVkaXRQcm9qZWN0QnRuKTtcbiAgICB9KVxuICAgIFxuICAgIHByb2plY3ROYW1lRm9ybS52YWx1ZSA9IFwiXCI7XG4gICAgY29uc29sZS5sb2coY3JlYXRlTmV3UHJvamVjdCk7XG59KTtcblxuXG4vL0R1cGxpY2F0ZSBjb2RlIHRvIHNob3cgZGVmYXVsdCBwcm9qZWN0IG9uIHBhZ2UgbG9hZFxuLy8gd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCl7XG4vLyAgICAgY29uc3QgZGVmYXVsdFByb2plY3QgPSBuZXcgUHJvamVjdChcIkRlZmF1bHQgUHJvamVjdFwiKTtcbi8vICAgICBkaXNwbGF5UHJvamVjdChkZWZhdWx0UHJvamVjdCk7XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGRpc3BsYXlQcm9qZWN0KHByb2plY3QpIHtcbi8vICAgICBjb25zdCBwcm9qZWN0TmFtZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4vLyAgICAgcHJvamVjdE5hbWVEaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwcm9qZWN0TmFtZURpdlwiKTtcbi8vICAgICBjb25zdCBwcm9qZWN0SGVhZGxpbmVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbi8vICAgICBwcm9qZWN0SGVhZGxpbmVEaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwcm9qZWN0SGVhZGxpbmVcIik7XG4vLyAgICAgY29uc3QgcHJvamVjdEgzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xuLy8gICAgIHByb2plY3RIMy5pbm5lckhUTUwgPSBgUHJvamVjdCBuYW1lIGlzOiAke3Byb2plY3QucHJvamVjdE5hbWV9YDtcblxuLy8gICAgIGNvbnN0IHRhc2tEaXYgPSBjcmVhdGVUYXNrKHByb2plY3QpO1xuXG4vLyAgICAgY29uc3QgcmVtb3ZlUHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4vLyAgICAgcmVtb3ZlUHJvamVjdEJ0bi5pbm5lckhUTUwgPSBcIkRlbGV0ZSBQcm9qZWN0XCI7ICAgXG5cbi8vICAgICBjb25zdCBlZGl0UHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4vLyAgICAgZWRpdFByb2plY3RCdG4uaW5uZXJIVE1MID0gXCJFZGl0IFByb2plY3RcIjtcblxuICAgIFxuLy8gICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQocHJvamVjdE5hbWVEaXYpO1xuLy8gICAgIHByb2plY3ROYW1lRGl2LmFwcGVuZENoaWxkKHByb2plY3RIZWFkbGluZURpdik7XG4vLyAgICAgcHJvamVjdEhlYWRsaW5lRGl2LmFwcGVuZENoaWxkKHByb2plY3RIMylcbi8vICAgICAvL3Byb2plY3ROYW1lRGl2LmFwcGVuZENoaWxkKHByb2plY3RIMyk7XG4vLyAgICAgcHJvamVjdEhlYWRsaW5lRGl2LmFwcGVuZENoaWxkKHJlbW92ZVByb2plY3RCdG4pO1xuLy8gICAgIHByb2plY3RIZWFkbGluZURpdi5hcHBlbmRDaGlsZChlZGl0UHJvamVjdEJ0bik7XG4vLyAgICAgcHJvamVjdE5hbWVEaXYuYXBwZW5kQ2hpbGQodGFza0Rpdik7XG5cbi8vICAgICByZW1vdmVQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4vLyAgICAgICAgIGNvbnRlbnQucmVtb3ZlQ2hpbGQocHJvamVjdE5hbWVEaXYpO1xuLy8gICAgIH0pO1xuXG4vLyAgICAgZWRpdFByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbi8vICAgICAgICAgbGV0IG5ld05hbWVJcyA9IHByb21wdChcIkVudGVyIG5ldyBwcm9qZWN0IG5hbWU6XCIpO1xuLy8gICAgICAgICBjb25zb2xlLmxvZyhuZXdOYW1lSXMpO1xuLy8gICAgICAgICBwcm9qZWN0LnByb2plY3ROYW1lID0gbmV3TmFtZUlzO1xuLy8gICAgICAgICBwcm9qZWN0SDMuaW5uZXJIVE1MID0gYFByb2plY3QgbmFtZSBpczogJHtuZXdOYW1lSXN9YDtcbi8vICAgICAgICAgcHJvamVjdEgzLmFwcGVuZENoaWxkKHJlbW92ZVByb2plY3RCdG4pO1xuLy8gICAgICAgICBwcm9qZWN0SDMuYXBwZW5kQ2hpbGQoZWRpdFByb2plY3RCdG4pO1xuLy8gICAgIH0pO1xuLy8gfVxuXG5cbmZ1bmN0aW9uIGRpc3BsYXlQcm9qZWN0KHByb2plY3RJbnN0YW5jZSkge1xuICAgIGNvbnNvbGUubG9nKFwiaGVyZVwiKVxuICAgIGNvbnNvbGUubG9nKHByb2plY3RJbnN0YW5jZSlcbiAgICBjb25zdCBwcm9qZWN0TmFtZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgcHJvamVjdE5hbWVEaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwcm9qZWN0TmFtZURpdlwiKTtcbiAgICBjb25zdCBwcm9qZWN0SGVhZGxpbmVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBwcm9qZWN0SGVhZGxpbmVEaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwcm9qZWN0SGVhZGxpbmVcIik7XG4gICAgY29uc3QgcHJvamVjdEgzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xuXG4gICAgLy8gRGlzcGxheSBwcm9qZWN0IG5hbWUgZnJvbSBzdG9yYWdlXG4gICAgcHJvamVjdEgzLmlubmVySFRNTCA9IGBQcm9qZWN0IG5hbWU6ICR7ZGlzcGxheVByb2plY3RGcm9tU3RvcmFnZShwcm9qZWN0SW5zdGFuY2UucHJvamVjdE5hbWUpfWA7XG5cbiAgICBjb25zdCB0YXNrRGl2ID0gY3JlYXRlVGFzayhwcm9qZWN0SW5zdGFuY2UpO1xuXG4gICAgY29uc3QgcmVtb3ZlUHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgcmVtb3ZlUHJvamVjdEJ0bi5pbm5lckhUTUwgPSBcIkRlbGV0ZSBQcm9qZWN0XCI7XG5cbiAgICBjb25zdCBlZGl0UHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgZWRpdFByb2plY3RCdG4uaW5uZXJIVE1MID0gXCJFZGl0IFByb2plY3RcIjtcblxuICAgIHByb2plY3ROYW1lRGl2LmFwcGVuZENoaWxkKHByb2plY3RIZWFkbGluZURpdik7XG4gICAgcHJvamVjdEhlYWRsaW5lRGl2LmFwcGVuZENoaWxkKHByb2plY3RIMyk7XG4gICAgcHJvamVjdEhlYWRsaW5lRGl2LmFwcGVuZENoaWxkKHJlbW92ZVByb2plY3RCdG4pO1xuICAgIHByb2plY3RIZWFkbGluZURpdi5hcHBlbmRDaGlsZChlZGl0UHJvamVjdEJ0bik7XG4gICAgcHJvamVjdE5hbWVEaXYuYXBwZW5kQ2hpbGQodGFza0Rpdik7XG5cbiAgICBwcm9qZWN0SW5zdGFuY2UudGFzay5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGFza0VsZW1lbnQuY2xhc3NMaXN0LmFkZChcImN1cnJlbnRUYXNrc1wiKTtcbiAgICAgICAgXG4gICAgICAgIHRhc2tFbGVtZW50LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIFRhc2sgbmFtZTogJHt0YXNrLmRlc2NyaXB0aW9ufSxcbiAgICAgICAgICAgIHByaW9yaXR5OiAke3Rhc2sucHJpb3JpdHl9LFxuICAgICAgICAgICAgaXQgaXMgZHVlIHRpbGwgJHt0YXNrLmR1ZURhdGV9YDtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBhZGRpdGlvbmFsIGJ1dHRvbnMgb3IgZnVuY3Rpb25hbGl0eSByZWxhdGVkIHRvIHRhc2tzIGlmIG5lZWRlZFxuICAgICAgICBcbiAgICAgICAgdGFza0Rpdi5hcHBlbmRDaGlsZCh0YXNrRWxlbWVudCk7XG4gICAgfSk7XG5cbiAgICByZW1vdmVQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGNvbnRlbnQucmVtb3ZlQ2hpbGQocHJvamVjdE5hbWVEaXYpO1xuICAgICAgICBkZWxldGVQcm9qZWN0KHByb2plY3RJbnN0YW5jZSk7XG4gICAgfSk7XG5cbiAgICBlZGl0UHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBsZXQgbmV3TmFtZUlzID0gcHJvbXB0KFwiRW50ZXIgbmV3IHByb2plY3QgbmFtZTpcIik7XG4gICAgICAgIHVwZGF0ZVByb2plY3ROYW1lKHByb2plY3RJbnN0YW5jZSwgbmV3TmFtZUlzKTtcblxuICAgICAgICAvLyBVcGRhdGUgdGhlIGRpc3BsYXllZCBwcm9qZWN0IG5hbWVcbiAgICAgICAgcHJvamVjdEgzLmlubmVySFRNTCA9IGBQcm9qZWN0IG5hbWU6ICR7ZGlzcGxheVByb2plY3RGcm9tU3RvcmFnZShuZXdOYW1lSXMpfWA7XG4gICAgfSk7XG5cbiAgICBjb250ZW50LmFwcGVuZENoaWxkKHByb2plY3ROYW1lRGl2KTtcbn1cblxuXG5cbiJdLCJuYW1lcyI6WyJQcm9qZWN0IiwiY29uc3RydWN0b3IiLCJwcm9qZWN0TmFtZSIsInRoaXMiLCJ0YXNrIiwiYWRkVGFzayIsIm5ld1Rhc2siLCJwdXNoIiwiZGlzcGxheVRhc2siLCJpbmRleCIsImNvbnNvbGUiLCJsb2ciLCJnZXREZXNjcmlwdGlvbiIsIm1hcCIsImRlc2NyaXB0aW9uIiwiZ2V0UHJpbyIsInByaW9yaXR5IiwiZ2V0RHVlRGF0ZSIsImR1ZURhdGUiLCJnZXRJRCIsImlkIiwiZGVsZXRlUHJvamVjdCIsInByb2plY3RUb0RlbGV0ZSIsImV4aXN0aW5nUHJvamVjdHMiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic3RyaW5naWZ5IiwibGVuZ3RoIiwiaSIsInNwbGljZSIsInNldEl0ZW0iLCJ1cGRhdGVQcm9qZWN0TmFtZSIsInByb2plY3RUb0VkaXQiLCJuZXdOYW1lSXMiLCJkZWxldGVUYXNrIiwidGFza1RvRGVsZXRlIiwiaW5kZXhUb0RlbGV0ZSIsImZpbmRJbmRleCIsInVwZGF0ZVRhc2tOYW1lIiwidGFza1RvVXBkYXRlIiwibmV3TmFtZSIsImoiLCJjcmVhdGVUYXNrIiwiY3JlYXRlTmV3UHJvamVjdCIsImRhdGFDb3VudGVyIiwidGFza0NvdW50ZXIiLCJ0YXNrRGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYWRkVGFza0Zvcm0iLCJzZXRBdHRyaWJ1dGUiLCJhZGRMYWJlbCIsImlubmVySFRNTCIsImNsYXNzTGlzdCIsImFkZCIsImFkZFByaW9Gb3JtIiwib3B0aW9uc0hpZ2giLCJvcHRpb25zVGV4dEhpZ2giLCJjcmVhdGVUZXh0Tm9kZSIsIm9wdGlvbnNNZWQiLCJvcHRpb25zVGV4dE1lZCIsIm9wdGlvbnNMb3ciLCJvcHRpb25zVGV4dExvdyIsImFwcGVuZENoaWxkIiwiYWRkTGFiZWxQcmlvIiwiYWRkVGFza0R1ZURhdGVGb3JtIiwiYWRkVGFza0R1ZURhdGVMYWJlbCIsImFkZEJ1dHRvbiIsInRhc2tPcHRpb25zRGl2IiwiYWRkRXZlbnRMaXN0ZW5lciIsInRhc2tWYWx1ZSIsInZhbHVlIiwicHJpb1ZhbHVlIiwiZHVlRGF0ZVZhbHVlIiwic3RvcmVUYXNrIiwic3RvcmVUYXNrcyIsImN1cnJlbnRUYXNrc0RpdiIsImdldFRhc2tEaXZJZCIsImRhdGFzZXQiLCJjb21wbGV0ZUJ1dHRvbiIsImNvbnRhaW5zIiwicmVtb3ZlIiwiYWRkQ29tcGxldGVCdXR0b24iLCJkZWxldGVUYXNrQnV0dG9uIiwicmVtb3ZlQ2hpbGQiLCJlZGl0VGFza0J1dHRvbiIsImVkaXRUYXNrTmFtZSIsInByb21wdCIsImRpc3BsYXlQcm9qZWN0RnJvbVN0b3JhZ2UiLCJ0aGVOYW1lSXMiLCJjb250ZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJwcm9qZWN0TmFtZUZvcm0iLCJzdWJCdXR0b24iLCJ3aW5kb3ciLCJvbmxvYWQiLCJzdG9yZWRQcm9qZWN0cyIsImdldFByb2plY3RzRnJvbVN0b3JhZ2UiLCJmb3JFYWNoIiwic3RvcmVkUHJvamVjdCIsInByb2plY3RJbnN0YW5jZSIsInByb2plY3ROYW1lRGl2IiwicHJvamVjdEhlYWRsaW5lRGl2IiwicHJvamVjdEgzIiwicmVtb3ZlUHJvamVjdEJ0biIsImVkaXRQcm9qZWN0QnRuIiwidGFza0VsZW1lbnQiLCJkaXNwbGF5UHJvamVjdCIsInByb2plY3QiLCJmaW5kIiwicHJvamVjdE9iaiIsImFsZXJ0Iiwic3RvcmVQcm9qZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==