(()=>{"use strict";class e{constructor(e){this.projectName=e,this.task=[]}addTask(e){this.task.push(e)}displayTask(e){console.log(this.task[e-1])}getDescription(){return this.task.map((e=>e.description))}getPrio(){return this.task.map((e=>e.priority))}getDueDate(){return this.task.map((e=>e.dueDate))}getID(){return console.log(this.task.map((e=>e.id)))}}function t(e){let t=0,n=0;const o=document.createElement("div"),i=document.createElement("input");i.setAttribute("type","text"),i.setAttribute("name","setProperty"),i.setAttribute("id","setProperty");const a=document.createElement("label");a.setAttribute("for","setProperty"),a.innerHTML="Task Name:",o.classList.add("taskDiv");const c=document.createElement("select");c.setAttribute("name","setPrio"),c.setAttribute("id","setPrio");const d=document.createElement("option");d.setAttribute("value","high");const r=document.createTextNode("High"),s=document.createElement("option");s.setAttribute("value","medium");const l=document.createTextNode("Medium"),p=document.createElement("option");p.setAttribute("value","low");const m=document.createTextNode("Low");d.appendChild(r),s.appendChild(l),p.appendChild(m),c.appendChild(d),c.appendChild(s),c.appendChild(p);const u=document.createElement("label");u.setAttribute("for","setPrio"),u.innerHTML="Add Priority";const h=document.createElement("input");h.setAttribute("type","date"),h.setAttribute("name","taskDueDate"),h.setAttribute("id","taskDueDate"),h.setAttribute("required","");const g=document.createElement("label");g.setAttribute("for","taskDueDate"),g.innerHTML="Due: ";const k=document.createElement("button");k.innerHTML="add";const E=document.createElement("div");return E.classList.add("taskOptions"),k.addEventListener("click",(()=>{const a=i.value,d=c.value,r=h.value;e.addTask({description:a,priority:d,dueDate:r,id:t++}),n++;const s=document.createElement("div");s.classList.add("currentTasks"),s.setAttribute("data-id",n-1),i.value="",console.log(e);const l=s.dataset.id;console.log(l+"for currenttaskDiv"),s.innerHTML=`Task name: ${e.getDescription()[e.task.length-1]},\n             priority: ${e.getPrio()[e.task.length-1]},\n             it is due till ${e.getDueDate()[e.task.length-1]}`;const p=document.createElement("button");p.innerHTML="Mark as complete",p.addEventListener("click",(()=>{for(let t=0;t<e.task.length;t++)e.task[t].id==l&&(s.classList.contains("complete")?s.classList.remove("complete"):s.classList.add("complete"))}));const m=document.createElement("button");m.classList.add("deleteTask"),m.innerHTML="Delete Task",m.addEventListener("click",(()=>{for(let t=0;t<e.task.length;t++)e.task[t].id==l&&(e.task.splice(t,1),s.innerHTML=`Task name: ${e.getDescription()[t]},\n                     priority: ${e.getPrio()[t]},\n                     it is due till ${e.getDueDate()[t]}`);o.removeChild(s)}));const u=document.createElement("button");u.innerHTML="Edit Name",u.addEventListener("click",(()=>{let t=prompt("New Task name:");for(let n=0;n<e.task.length;n++)e.task[n].id==l&&(e.task[n].description=t,s.innerHTML=`Task name: ${e.getDescription()[n]},\n                     priority: ${e.getPrio()[n]},\n                     it is due till ${e.getDueDate()[n]}`);console.log(e),s.appendChild(p),s.appendChild(u),s.appendChild(m)})),o.appendChild(s),s.appendChild(p),s.appendChild(u),s.appendChild(m)})),E.appendChild(a),E.appendChild(i),E.appendChild(u),E.appendChild(c),E.appendChild(g),E.appendChild(h),E.appendChild(k),o.appendChild(E),o}const n=document.getElementById("content"),o=document.getElementById("projectName");document.getElementById("submit").addEventListener("click",(()=>{const i=document.createElement("div");i.setAttribute("id","projectNameDiv");const a=document.createElement("div");a.setAttribute("id","projectHeadline");const c=document.createElement("h3");let d=o.value,r=new e(d);c.innerHTML=`Project name: ${d}`;const s=t(r),l=document.createElement("button");l.innerHTML="Delete Project";const p=document.createElement("button");p.innerHTML="Edit Project",!1===function(e){let t=JSON.parse(localStorage.getItem("Projects"))||[];return t.find((t=>t.projectName===e.projectName))?(alert("Names are the same"),!0):(t.push(e),localStorage.setItem("Projects",JSON.stringify(t)),console.log("Project added successfully"),!1)}(r)&&n.appendChild(i),i.appendChild(a),a.appendChild(c),a.appendChild(l),a.appendChild(p),i.appendChild(s),l.addEventListener("click",(()=>{n.removeChild(i),function(e){const t=JSON.parse(localStorage.getItem("Projects"))||[];console.log(JSON.stringify(t)),console.log(t.length);for(let n=0;n<t.length;n++)t[n].projectName===e.projectName&&(console.log("deleting this"),t.splice(n,1),localStorage.setItem("Projects",JSON.stringify(t)),console.log(t))}(r)})),p.addEventListener("click",(()=>{let e=prompt("enter new project name:");!function(e,t){const n=JSON.parse(localStorage.getItem("Projects"))||[];for(let o=0;o<n.length;o++)n[o].projectName===e.projectName&&(n[o].projectName=t,console.log(n[o].projectName),localStorage.setItem("Projects",JSON.stringify(n)))}(r,e),console.log(e),d=e,r.projectName=d,c.innerHTML=`Project name is: ${d}`,c.appendChild(l),c.appendChild(p)})),o.value="",console.log(r)})),window.onload=function(){!function(e){const o=document.createElement("div");o.setAttribute("id","projectNameDiv");const i=document.createElement("div");i.setAttribute("id","projectHeadline");const a=document.createElement("h3");a.innerHTML=`Project name is: ${e.projectName}`;const c=t(e),d=document.createElement("button");d.innerHTML="Delete Project";const r=document.createElement("button");r.innerHTML="Edit Project",n.appendChild(o),o.appendChild(i),i.appendChild(a),i.appendChild(d),i.appendChild(r),o.appendChild(c),d.addEventListener("click",(()=>{n.removeChild(o)})),r.addEventListener("click",(()=>{let t=prompt("Enter new project name:");console.log(t),e.projectName=t,a.innerHTML=`Project name is: ${t}`,a.appendChild(d),a.appendChild(r)}))}(new e("Default Project"))}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQU8sTUFBTUEsRUFDVCxXQUFBQyxDQUFZQyxHQUNSQyxLQUFLRCxZQUFjQSxFQUNuQkMsS0FBS0MsS0FBTyxFQUNoQixDQUVBLE9BQUFDLENBQVFDLEdBQ0pILEtBQUtDLEtBQUtHLEtBQUtELEVBQ25CLENBRUEsV0FBQUUsQ0FBWUMsR0FDUkMsUUFBUUMsSUFBSVIsS0FBS0MsS0FBS0ssRUFBTSxHQUNoQyxDQUVBLGNBQUFHLEdBQ0ksT0FBT1QsS0FBS0MsS0FBS1MsS0FBSVQsR0FBUUEsRUFBS1UsYUFDdEMsQ0FFQSxPQUFBQyxHQUNJLE9BQU9aLEtBQUtDLEtBQUtTLEtBQUlULEdBQVFBLEVBQUtZLFVBQ3RDLENBRUEsVUFBQUMsR0FDSSxPQUFPZCxLQUFLQyxLQUFLUyxLQUFJVCxHQUFRQSxFQUFLYyxTQUN0QyxDQUVBLEtBQUFDLEdBQ0ksT0FBT1QsUUFBUUMsSUFBSVIsS0FBS0MsS0FBS1MsS0FBSVQsR0FBUUEsRUFBS2dCLEtBQ3RELEVDMUJPLFNBQVNDLEVBQVdDLEdBQ3ZCLElBQUlDLEVBQWMsRUFDZEMsRUFBYyxFQUVsQixNQUFNQyxFQUFVQyxTQUFTQyxjQUFjLE9BR2pDQyxFQUFjRixTQUFTQyxjQUFjLFNBQzNDQyxFQUFZQyxhQUFhLE9BQVEsUUFDakNELEVBQVlDLGFBQWEsT0FBUSxlQUNqQ0QsRUFBWUMsYUFBYSxLQUFNLGVBRS9CLE1BQU1DLEVBQVdKLFNBQVNDLGNBQWMsU0FDeENHLEVBQVNELGFBQWEsTUFBTyxlQUM3QkMsRUFBU0MsVUFBWSxhQUVyQk4sRUFBUU8sVUFBVUMsSUFBSSxXQUd0QixNQUFNQyxFQUFjUixTQUFTQyxjQUFjLFVBQzNDTyxFQUFZTCxhQUFhLE9BQVEsV0FDakNLLEVBQVlMLGFBQWEsS0FBTSxXQUUvQixNQUFNTSxFQUFjVCxTQUFTQyxjQUFjLFVBQzNDUSxFQUFZTixhQUFhLFFBQVMsUUFDbEMsTUFBTU8sRUFBa0JWLFNBQVNXLGVBQWUsUUFFMUNDLEVBQWFaLFNBQVNDLGNBQWMsVUFDMUNXLEVBQVdULGFBQWEsUUFBUyxVQUNqQyxNQUFNVSxFQUFpQmIsU0FBU1csZUFBZSxVQUV6Q0csRUFBYWQsU0FBU0MsY0FBYyxVQUMxQ2EsRUFBV1gsYUFBYSxRQUFTLE9BQ2pDLE1BQU1ZLEVBQWlCZixTQUFTVyxlQUFlLE9BRS9DRixFQUFZTyxZQUFZTixHQUN4QkUsRUFBV0ksWUFBWUgsR0FDdkJDLEVBQVdFLFlBQVlELEdBQ3ZCUCxFQUFZUSxZQUFZUCxHQUN4QkQsRUFBWVEsWUFBWUosR0FDeEJKLEVBQVlRLFlBQVlGLEdBRXhCLE1BQU1HLEVBQWVqQixTQUFTQyxjQUFjLFNBQzVDZ0IsRUFBYWQsYUFBYSxNQUFPLFdBQ2pDYyxFQUFhWixVQUFZLGVBR3pCLE1BQU1hLEVBQXFCbEIsU0FBU0MsY0FBYyxTQUNsRGlCLEVBQW1CZixhQUFhLE9BQVEsUUFDeENlLEVBQW1CZixhQUFhLE9BQVEsZUFDeENlLEVBQW1CZixhQUFhLEtBQU0sZUFDdENlLEVBQW1CZixhQUFhLFdBQVksSUFFNUMsTUFBTWdCLEVBQXNCbkIsU0FBU0MsY0FBYyxTQUNuRGtCLEVBQW9CaEIsYUFBYSxNQUFPLGVBQ3hDZ0IsRUFBb0JkLFVBQVksUUFHaEMsTUFBTWUsRUFBWXBCLFNBQVNDLGNBQWMsVUFDekNtQixFQUFVZixVQUFZLE1BR3RCLE1BQU1nQixFQUFpQnJCLFNBQVNDLGNBQWMsT0FtSDlDLE9BbEhBb0IsRUFBZWYsVUFBVUMsSUFBSSxlQUc3QmEsRUFBVUUsaUJBQWlCLFNBQVMsS0FDaEMsTUFBTUMsRUFBWXJCLEVBQVlzQixNQUN4QkMsRUFBWWpCLEVBQVlnQixNQUN4QkUsRUFBZVIsRUFBbUJNLE1BTXZDNUIsRUFBaUJqQixRQUFRLENBQ3RCUyxZQUFhbUMsRUFDYmpDLFNBQVVtQyxFQUNWakMsUUFBU2tDLEVBQ1RoQyxHQUFJRyxNQUVSQyxJQUdBLE1BQU02QixFQUFrQjNCLFNBQVNDLGNBQWMsT0FDL0MwQixFQUFnQnJCLFVBQVVDLElBQUksZ0JBQzlCb0IsRUFBZ0J4QixhQUFhLFVBQVdMLEVBQWEsR0FFckRJLEVBQVlzQixNQUFRLEdBQ3BCeEMsUUFBUUMsSUFBSVcsR0FFWixNQUFNZ0MsRUFBZUQsRUFBZ0JFLFFBQVFuQyxHQUU3Q1YsUUFBUUMsSUFBSTJDLEVBQWUsc0JBQzNCRCxFQUFnQnRCLFVBQ1osY0FBY1QsRUFBaUJWLGlCQUFpQlUsRUFBaUJsQixLQUFLb0QsT0FBUSwrQkFDakVsQyxFQUFpQlAsVUFBVU8sRUFBaUJsQixLQUFLb0QsT0FBUSxvQ0FDcERsQyxFQUFpQkwsYUFBYUssRUFBaUJsQixLQUFLb0QsT0FBUSxLQUlsRixNQUFNQyxFQUFpQi9CLFNBQVNDLGNBQWMsVUFDOUM4QixFQUFlMUIsVUFBVyxtQkFFMUIwQixFQUFlVCxpQkFBaUIsU0FBUyxLQUNyQyxJQUFLLElBQUlVLEVBQUksRUFBR0EsRUFBSXBDLEVBQWlCbEIsS0FBS29ELE9BQVFFLElBQzNDcEMsRUFBaUJsQixLQUFLc0QsR0FBR3RDLElBQU1rQyxJQUUzQkQsRUFBZ0JyQixVQUFVMkIsU0FBUyxZQUNsQ04sRUFBZ0JyQixVQUFVNEIsT0FBTyxZQUVqQ1AsRUFBZ0JyQixVQUFVQyxJQUFJLFlBRzFDLElBSUosTUFBTTRCLEVBQW1CbkMsU0FBU0MsY0FBYyxVQUNoRGtDLEVBQWlCN0IsVUFBVUMsSUFBSSxjQUMvQjRCLEVBQWlCOUIsVUFBWSxjQUU3QjhCLEVBQWlCYixpQkFBaUIsU0FBUyxLQUN2QyxJQUFLLElBQUlVLEVBQUksRUFBR0EsRUFBSXBDLEVBQWlCbEIsS0FBS29ELE9BQVFFLElBQzNDcEMsRUFBaUJsQixLQUFLc0QsR0FBR3RDLElBQU1rQyxJQUM5QmhDLEVBQWlCbEIsS0FBSzBELE9BQU9KLEVBQUUsR0FFL0JMLEVBQWdCdEIsVUFDaEIsY0FBY1QsRUFBaUJWLGlCQUFpQjhDLHVDQUNuQ3BDLEVBQWlCUCxVQUFVMkMsNENBQ3RCcEMsRUFBaUJMLGFBQWF5QyxNQUd4RGpDLEVBQVFzQyxZQUFZVixFQUFlLElBSXZDLE1BQU1XLEVBQWlCdEMsU0FBU0MsY0FBYyxVQUM5Q3FDLEVBQWVqQyxVQUFZLFlBRTNCaUMsRUFBZWhCLGlCQUFpQixTQUFTLEtBQ3JDLElBQUlpQixFQUFlQyxPQUFPLGtCQUUxQixJQUFLLElBQUlSLEVBQUksRUFBR0EsRUFBSXBDLEVBQWlCbEIsS0FBS29ELE9BQVFFLElBQzNDcEMsRUFBaUJsQixLQUFLc0QsR0FBR3RDLElBQU1rQyxJQUM5QmhDLEVBQWlCbEIsS0FBS3NELEdBQUc1QyxZQUFjbUQsRUFFdkNaLEVBQWdCdEIsVUFDaEIsY0FBY1QsRUFBaUJWLGlCQUFpQjhDLHVDQUNuQ3BDLEVBQWlCUCxVQUFVMkMsNENBQ3RCcEMsRUFBaUJMLGFBQWF5QyxNQUs1RGhELFFBQVFDLElBQUlXLEdBQ1orQixFQUFnQlgsWUFBWWUsR0FDNUJKLEVBQWdCWCxZQUFZc0IsR0FDNUJYLEVBQWdCWCxZQUFZbUIsRUFBaUIsSUFJN0NwQyxFQUFRaUIsWUFBWVcsR0FDcEJBLEVBQWdCWCxZQUFZZSxHQUM1QkosRUFBZ0JYLFlBQVlzQixHQUM1QlgsRUFBZ0JYLFlBQVltQixFQUFpQixJQUdqRGQsRUFBZUwsWUFBWVosR0FDM0JpQixFQUFlTCxZQUFZZCxHQUMzQm1CLEVBQWVMLFlBQVlDLEdBQzNCSSxFQUFlTCxZQUFZUixHQUMzQmEsRUFBZUwsWUFBWUcsR0FDM0JFLEVBQWVMLFlBQVlFLEdBQzNCRyxFQUFlTCxZQUFZSSxHQUMzQnJCLEVBQVFpQixZQUFZSyxHQUVidEIsQ0FDWCxDQ2hMQSxNQUFNMEMsRUFBVXpDLFNBQVMwQyxlQUFlLFdBQ2xDQyxFQUFrQjNDLFNBQVMwQyxlQUFlLGVBQzlCMUMsU0FBUzBDLGVBQWUsVUFFaENwQixpQkFBaUIsU0FBUyxLQUVoQyxNQUFNc0IsRUFBaUI1QyxTQUFTQyxjQUFjLE9BQzlDMkMsRUFBZXpDLGFBQWEsS0FBTSxrQkFDbEMsTUFBTTBDLEVBQXFCN0MsU0FBU0MsY0FBYyxPQUNsRDRDLEVBQW1CMUMsYUFBYSxLQUFNLG1CQUN0QyxNQUFNMkMsRUFBWTlDLFNBQVNDLGNBQWMsTUFDekMsSUFBSThDLEVBQVlKLEVBQWdCbkIsTUFDNUI1QixFQUFtQixJQUFJdEIsRUFBUXlFLEdBRW5DRCxFQUFVekMsVUFBWSxpQkFBaUIwQyxJQUV2QyxNQUFNaEQsRUFBVUosRUFBV0MsR0FFckJvRCxFQUFtQmhELFNBQVNDLGNBQWMsVUFDaEQrQyxFQUFpQjNDLFVBQVksaUJBRTdCLE1BQU00QyxFQUFpQmpELFNBQVNDLGNBQWMsVUFDOUNnRCxFQUFlNUMsVUFBWSxnQkFFVSxJQzVCbEMsU0FBc0I2QyxHQUV6QixJQUFJQyxFQUFtQkMsS0FBS0MsTUFBTUMsYUFBYUMsUUFBUSxjQUFnQixHQU92RSxPQUp3QkosRUFBaUJLLE1BQU1DLEdBQ3BDQSxFQUFXakYsY0FBZ0IwRSxFQUFRMUUsZUFLMUNrRixNQUFNLHVCQUNDLElBR1BQLEVBQWlCdEUsS0FBS3FFLEdBQ3RCSSxhQUFhSyxRQUFRLFdBQVlQLEtBQUtRLFVBQVVULElBQ2hEbkUsUUFBUUMsSUFBSSwrQkFDTCxFQUVmLENEUU80RSxDQUFhakUsSUFDWjZDLEVBQVF6QixZQUFZNEIsR0FFeEJBLEVBQWU1QixZQUFZNkIsR0FDM0JBLEVBQW1CN0IsWUFBWThCLEdBQy9CRCxFQUFtQjdCLFlBQVlnQyxHQUMvQkgsRUFBbUI3QixZQUFZaUMsR0FDL0JMLEVBQWU1QixZQUFZakIsR0FFM0JpRCxFQUFpQjFCLGlCQUFpQixTQUFRLEtBQ3RDbUIsRUFBUUosWUFBWU8sR0NkckIsU0FBdUJrQixHQUUxQixNQUFNWCxFQUFtQkMsS0FBS0MsTUFBTUMsYUFBYUMsUUFBUSxjQUFnQixHQUN6RXZFLFFBQVFDLElBQUltRSxLQUFLUSxVQUFVVCxJQUMzQm5FLFFBQVFDLElBQUlrRSxFQUFpQnJCLFFBRTVCLElBQUksSUFBSUUsRUFBSSxFQUFHQSxFQUFJbUIsRUFBaUJyQixPQUFRRSxJQUNyQ21CLEVBQWlCbkIsR0FBR3hELGNBQWNzRixFQUFnQnRGLGNBQ2xEUSxRQUFRQyxJQUFJLGlCQUNaa0UsRUFBaUJmLE9BQU9KLEVBQUcsR0FDM0JzQixhQUFhSyxRQUFRLFdBQVlQLEtBQUtRLFVBQVVULElBQ2hEbkUsUUFBUUMsSUFBSWtFLEdBR3hCLENEQ1FZLENBQWNuRSxFQUFnQixJQUdsQ3FELEVBQWUzQixpQkFBaUIsU0FBUyxLQUNyQyxJQUFJMEMsRUFBWXhCLE9BQU8sNEJDSHhCLFNBQTJCeUIsRUFBZUQsR0FDN0MsTUFBTWIsRUFBbUJDLEtBQUtDLE1BQU1DLGFBQWFDLFFBQVEsY0FBZ0IsR0FFekUsSUFBSSxJQUFJdkIsRUFBSSxFQUFHQSxFQUFJbUIsRUFBaUJyQixPQUFRRSxJQUNyQ21CLEVBQWlCbkIsR0FBR3hELGNBQWN5RixFQUFjekYsY0FDL0MyRSxFQUFpQm5CLEdBQUd4RCxZQUFjd0YsRUFDbENoRixRQUFRQyxJQUFJa0UsRUFBaUJuQixHQUFHeEQsYUFDaEM4RSxhQUFhSyxRQUFRLFdBQVlQLEtBQUtRLFVBQVVULElBSzVELENEUlFlLENBQWtCdEUsRUFBa0JvRSxHQUNwQ2hGLFFBQVFDLElBQUkrRSxHQUNaakIsRUFBWWlCLEVBQ1pwRSxFQUFpQnBCLFlBQWN1RSxFQUUvQkQsRUFBVXpDLFVBQVksb0JBQW9CMEMsSUFDMUNELEVBQVU5QixZQUFZZ0MsR0FDdEJGLEVBQVU5QixZQUFZaUMsRUFBZSxJQUd6Q04sRUFBZ0JuQixNQUFRLEdBQ3hCeEMsUUFBUUMsSUFBSVcsRUFBaUIsSUFLakN1RSxPQUFPQyxPQUFTLFlBS2hCLFNBQXdCbEIsR0FDcEIsTUFBTU4sRUFBaUI1QyxTQUFTQyxjQUFjLE9BQzlDMkMsRUFBZXpDLGFBQWEsS0FBTSxrQkFDbEMsTUFBTTBDLEVBQXFCN0MsU0FBU0MsY0FBYyxPQUNsRDRDLEVBQW1CMUMsYUFBYSxLQUFNLG1CQUN0QyxNQUFNMkMsRUFBWTlDLFNBQVNDLGNBQWMsTUFDekM2QyxFQUFVekMsVUFBWSxvQkFBb0I2QyxFQUFRMUUsY0FFbEQsTUFBTXVCLEVBQVVKLEVBQVd1RCxHQUVyQkYsRUFBbUJoRCxTQUFTQyxjQUFjLFVBQ2hEK0MsRUFBaUIzQyxVQUFZLGlCQUU3QixNQUFNNEMsRUFBaUJqRCxTQUFTQyxjQUFjLFVBQzlDZ0QsRUFBZTVDLFVBQVksZUFHM0JvQyxFQUFRekIsWUFBWTRCLEdBQ3BCQSxFQUFlNUIsWUFBWTZCLEdBQzNCQSxFQUFtQjdCLFlBQVk4QixHQUUvQkQsRUFBbUI3QixZQUFZZ0MsR0FDL0JILEVBQW1CN0IsWUFBWWlDLEdBQy9CTCxFQUFlNUIsWUFBWWpCLEdBRTNCaUQsRUFBaUIxQixpQkFBaUIsU0FBUyxLQUN2Q21CLEVBQVFKLFlBQVlPLEVBQWUsSUFHdkNLLEVBQWUzQixpQkFBaUIsU0FBUyxLQUNyQyxJQUFJMEMsRUFBWXhCLE9BQU8sMkJBQ3ZCeEQsUUFBUUMsSUFBSStFLEdBQ1pkLEVBQVExRSxZQUFjd0YsRUFDdEJsQixFQUFVekMsVUFBWSxvQkFBb0IyRCxJQUMxQ2xCLEVBQVU5QixZQUFZZ0MsR0FDdEJGLEVBQVU5QixZQUFZaUMsRUFBZSxHQUU3QyxDQXhDSW9CLENBRHVCLElBQUkvRixFQUFRLG1CQUV2QyxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby10b3AvLi9zcmMvY29uc3RydWN0b3IuanMiLCJ3ZWJwYWNrOi8vdG9kby10b3AvLi9zcmMvdGFza3MuanMiLCJ3ZWJwYWNrOi8vdG9kby10b3AvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby10b3AvLi9zcmMvc3RvcmFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgUHJvamVjdCB7XG4gICAgY29uc3RydWN0b3IocHJvamVjdE5hbWUpe1xuICAgICAgICB0aGlzLnByb2plY3ROYW1lID0gcHJvamVjdE5hbWU7XG4gICAgICAgIHRoaXMudGFzayA9IFtdO1xuICAgIH1cblxuICAgIGFkZFRhc2sobmV3VGFzayl7XG4gICAgICAgIHRoaXMudGFzay5wdXNoKG5ld1Rhc2spO1xuICAgIH1cblxuICAgIGRpc3BsYXlUYXNrKGluZGV4KXtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy50YXNrW2luZGV4LTFdKVxuICAgIH1cblxuICAgIGdldERlc2NyaXB0aW9uKCl7XG4gICAgICAgIHJldHVybiB0aGlzLnRhc2subWFwKHRhc2sgPT4gdGFzay5kZXNjcmlwdGlvbik7IFxuICAgIH1cblxuICAgIGdldFByaW8oKXtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFzay5tYXAodGFzayA9PiB0YXNrLnByaW9yaXR5KTsgXG4gICAgfVxuXG4gICAgZ2V0RHVlRGF0ZSgpe1xuICAgICAgICByZXR1cm4gdGhpcy50YXNrLm1hcCh0YXNrID0+IHRhc2suZHVlRGF0ZSk7IFxuICAgIH1cblxuICAgIGdldElEKCl7XG4gICAgICAgIHJldHVybiBjb25zb2xlLmxvZyh0aGlzLnRhc2subWFwKHRhc2sgPT4gdGFzay5pZCkpO1xufVxufSIsImltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9jb25zdHJ1Y3RvclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGFzayhjcmVhdGVOZXdQcm9qZWN0KXtcbiAgICBsZXQgZGF0YUNvdW50ZXIgPSAwO1xuICAgIGxldCB0YXNrQ291bnRlciA9IDA7XG5cbiAgICBjb25zdCB0YXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBcbiAgICAvL0RPTSBmb3IgYWRkaW5nIFRhc2tzIGludG8gUHJvamVjdHNcbiAgICBjb25zdCBhZGRUYXNrRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBhZGRUYXNrRm9ybS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICBhZGRUYXNrRm9ybS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwic2V0UHJvcGVydHlcIik7XG4gICAgYWRkVGFza0Zvcm0uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJzZXRQcm9wZXJ0eVwiKTtcbiAgICBcbiAgICBjb25zdCBhZGRMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICBhZGRMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJzZXRQcm9wZXJ0eVwiKTtcbiAgICBhZGRMYWJlbC5pbm5lckhUTUwgPSBcIlRhc2sgTmFtZTpcIjtcbiAgICBcbiAgICB0YXNrRGl2LmNsYXNzTGlzdC5hZGQoXCJ0YXNrRGl2XCIpO1xuICAgIFxuICAgIC8vRE9NIGZvciBhZGRpbmcgcHJpb3JpdHkgb24gVGFza3NcbiAgICBjb25zdCBhZGRQcmlvRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7ICBcbiAgICBhZGRQcmlvRm9ybS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwic2V0UHJpb1wiKTtcbiAgICBhZGRQcmlvRm9ybS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInNldFByaW9cIik7XG4gICAgXG4gICAgY29uc3Qgb3B0aW9uc0hpZ2ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgIG9wdGlvbnNIaWdoLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIFwiaGlnaFwiKTtcbiAgICBjb25zdCBvcHRpb25zVGV4dEhpZ2ggPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIkhpZ2hcIik7XG4gICAgXG4gICAgY29uc3Qgb3B0aW9uc01lZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgb3B0aW9uc01lZC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBcIm1lZGl1bVwiKTtcbiAgICBjb25zdCBvcHRpb25zVGV4dE1lZCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiTWVkaXVtXCIpO1xuICAgIFxuICAgIGNvbnN0IG9wdGlvbnNMb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgIG9wdGlvbnNMb3cuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJsb3dcIik7XG4gICAgY29uc3Qgb3B0aW9uc1RleHRMb3cgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIkxvd1wiKTtcbiAgICBcbiAgICBvcHRpb25zSGlnaC5hcHBlbmRDaGlsZChvcHRpb25zVGV4dEhpZ2gpO1xuICAgIG9wdGlvbnNNZWQuYXBwZW5kQ2hpbGQob3B0aW9uc1RleHRNZWQpO1xuICAgIG9wdGlvbnNMb3cuYXBwZW5kQ2hpbGQob3B0aW9uc1RleHRMb3cpO1xuICAgIGFkZFByaW9Gb3JtLmFwcGVuZENoaWxkKG9wdGlvbnNIaWdoKTtcbiAgICBhZGRQcmlvRm9ybS5hcHBlbmRDaGlsZChvcHRpb25zTWVkKTtcbiAgICBhZGRQcmlvRm9ybS5hcHBlbmRDaGlsZChvcHRpb25zTG93KTtcbiAgICBcbiAgICBjb25zdCBhZGRMYWJlbFByaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgYWRkTGFiZWxQcmlvLnNldEF0dHJpYnV0ZShcImZvclwiLCBcInNldFByaW9cIik7XG4gICAgYWRkTGFiZWxQcmlvLmlubmVySFRNTCA9IFwiQWRkIFByaW9yaXR5XCI7XG4gICAgXG4gICAgLy9ET00gZm9yIGFkZGluZyBkdWUgZGF0ZSBvbiB0YXNrc1xuICAgIGNvbnN0IGFkZFRhc2tEdWVEYXRlRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBhZGRUYXNrRHVlRGF0ZUZvcm0uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImRhdGVcIik7XG4gICAgYWRkVGFza0R1ZURhdGVGb3JtLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJ0YXNrRHVlRGF0ZVwiKTtcbiAgICBhZGRUYXNrRHVlRGF0ZUZvcm0uc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJ0YXNrRHVlRGF0ZVwiKTtcbiAgICBhZGRUYXNrRHVlRGF0ZUZvcm0uc2V0QXR0cmlidXRlKFwicmVxdWlyZWRcIiwgXCJcIilcbiAgICBcbiAgICBjb25zdCBhZGRUYXNrRHVlRGF0ZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgIGFkZFRhc2tEdWVEYXRlTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwidGFza0R1ZURhdGVcIik7XG4gICAgYWRkVGFza0R1ZURhdGVMYWJlbC5pbm5lckhUTUwgPSBcIkR1ZTogXCI7XG4gICAgXG4gICAgLy9ET00gZm9yIGFkZGluZyBidXR0b24gdG8gYWRkIFRhc2tzXG4gICAgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBhZGRCdXR0b24uaW5uZXJIVE1MID0gXCJhZGRcIlxuXG4gICAgLy9ET00gZm9yIGFkZGluZyB0YXNrcyBvcHRpb25zIGludG8gYSBkaXZcbiAgICBjb25zdCB0YXNrT3B0aW9uc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFza09wdGlvbnNEaXYuY2xhc3NMaXN0LmFkZChcInRhc2tPcHRpb25zXCIpICAgICAgXG4gICAgICAgIFxuICAgIC8vVGFza3MgYmVpbmcgYWRkZWQgdG8gYXJyYXlcbiAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XG4gICAgICAgIGNvbnN0IHRhc2tWYWx1ZSA9IGFkZFRhc2tGb3JtLnZhbHVlO1xuICAgICAgICBjb25zdCBwcmlvVmFsdWUgPSBhZGRQcmlvRm9ybS52YWx1ZTtcbiAgICAgICAgY29uc3QgZHVlRGF0ZVZhbHVlID0gYWRkVGFza0R1ZURhdGVGb3JtLnZhbHVlO1xuXG4gICAgICAgIC8vIGlmKHRhc2tWYWx1ZT09XCJcInx8cHJpb1ZhbHVlPT1cIlwifHxkdWVEYXRlVmFsdWU9PVwiXCIpe1xuICAgICAgICAvLyByZXR1cm4gYWxlcnQoXCJGaWxsIG91dCBhbGwgdGhlIGZpZWxkc1wiKVxuICAgICAgICAvLyB9XG4gICAgXG4gICAgICAgICBjcmVhdGVOZXdQcm9qZWN0LmFkZFRhc2soeyBcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0YXNrVmFsdWUsXG4gICAgICAgICAgICBwcmlvcml0eTogcHJpb1ZhbHVlLFxuICAgICAgICAgICAgZHVlRGF0ZTogZHVlRGF0ZVZhbHVlLFxuICAgICAgICAgICAgaWQ6IGRhdGFDb3VudGVyKyssXG4gICAgICAgIH0pO1xuICAgICAgICB0YXNrQ291bnRlcisrO1xuXG4gICAgICAgIC8vRE9NIGZvciBkaXNwbGF5aW5nIHRhc2tzXG4gICAgICAgIGNvbnN0IGN1cnJlbnRUYXNrc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGN1cnJlbnRUYXNrc0Rpdi5jbGFzc0xpc3QuYWRkKFwiY3VycmVudFRhc2tzXCIpO1xuICAgICAgICBjdXJyZW50VGFza3NEaXYuc2V0QXR0cmlidXRlKFwiZGF0YS1pZFwiLCB0YXNrQ291bnRlciAtMSk7XG4gICAgICAgICAgICBcbiAgICAgICAgYWRkVGFza0Zvcm0udmFsdWUgPSBcIlwiO1xuICAgICAgICBjb25zb2xlLmxvZyhjcmVhdGVOZXdQcm9qZWN0KTtcblxuICAgICAgICBjb25zdCBnZXRUYXNrRGl2SWQgPSBjdXJyZW50VGFza3NEaXYuZGF0YXNldC5pZDtcblxuICAgICAgICBjb25zb2xlLmxvZyhnZXRUYXNrRGl2SWQgKyBcImZvciBjdXJyZW50dGFza0RpdlwiKVxuICAgICAgICBjdXJyZW50VGFza3NEaXYuaW5uZXJIVE1MID0gXG4gICAgICAgICAgICBgVGFzayBuYW1lOiAke2NyZWF0ZU5ld1Byb2plY3QuZ2V0RGVzY3JpcHRpb24oKVtjcmVhdGVOZXdQcm9qZWN0LnRhc2subGVuZ3RoIC0xXX0sXG4gICAgICAgICAgICAgcHJpb3JpdHk6ICR7Y3JlYXRlTmV3UHJvamVjdC5nZXRQcmlvKClbY3JlYXRlTmV3UHJvamVjdC50YXNrLmxlbmd0aCAtMV19LFxuICAgICAgICAgICAgIGl0IGlzIGR1ZSB0aWxsICR7Y3JlYXRlTmV3UHJvamVjdC5nZXREdWVEYXRlKClbY3JlYXRlTmV3UHJvamVjdC50YXNrLmxlbmd0aCAtMV19YDtcblxuXG4gICAgICAgIC8vTWFya2luZyBhcyBjb21wbGV0ZVxuICAgICAgICBjb25zdCBjb21wbGV0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGNvbXBsZXRlQnV0dG9uLmlubmVySFRNTD0gXCJNYXJrIGFzIGNvbXBsZXRlXCI7XG5cbiAgICAgICAgY29tcGxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNyZWF0ZU5ld1Byb2plY3QudGFzay5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYoY3JlYXRlTmV3UHJvamVjdC50YXNrW2ldLmlkID09IGdldFRhc2tEaXZJZCl7IFxuICAgICAgICAgICAgICAgICAgICAvL2N1cnJlbnRUYXNrc0Rpdi5jbGFzc0xpc3QuYWRkKFwiY29tcGxldGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRUYXNrc0Rpdi5jbGFzc0xpc3QuY29udGFpbnMoXCJjb21wbGV0ZVwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFza3NEaXYuY2xhc3NMaXN0LnJlbW92ZShcImNvbXBsZXRlXCIpXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFRhc2tzRGl2LmNsYXNzTGlzdC5hZGQoXCJjb21wbGV0ZVwiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAgIC8vRGVsZXRpbmcgVGFza3NcbiAgICAgICAgY29uc3QgZGVsZXRlVGFza0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGRlbGV0ZVRhc2tCdXR0b24uY2xhc3NMaXN0LmFkZChcImRlbGV0ZVRhc2tcIik7XG4gICAgICAgIGRlbGV0ZVRhc2tCdXR0b24uaW5uZXJIVE1MID0gXCJEZWxldGUgVGFza1wiO1xuXG4gICAgICAgIGRlbGV0ZVRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNyZWF0ZU5ld1Byb2plY3QudGFzay5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgaWYoY3JlYXRlTmV3UHJvamVjdC50YXNrW2ldLmlkID09IGdldFRhc2tEaXZJZCl7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZU5ld1Byb2plY3QudGFzay5zcGxpY2UoaSwxKTsgIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRhc2tzRGl2LmlubmVySFRNTCA9IFxuICAgICAgICAgICAgICAgICAgICBgVGFzayBuYW1lOiAke2NyZWF0ZU5ld1Byb2plY3QuZ2V0RGVzY3JpcHRpb24oKVtpXX0sXG4gICAgICAgICAgICAgICAgICAgICBwcmlvcml0eTogJHtjcmVhdGVOZXdQcm9qZWN0LmdldFByaW8oKVtpXX0sXG4gICAgICAgICAgICAgICAgICAgICBpdCBpcyBkdWUgdGlsbCAke2NyZWF0ZU5ld1Byb2plY3QuZ2V0RHVlRGF0ZSgpW2ldfWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFza0Rpdi5yZW1vdmVDaGlsZChjdXJyZW50VGFza3NEaXYpICAgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vRWRpdGluZyB0YXNrc1xuICAgICAgICBjb25zdCBlZGl0VGFza0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGVkaXRUYXNrQnV0dG9uLmlubmVySFRNTCA9IFwiRWRpdCBOYW1lXCI7XG5cbiAgICAgICAgZWRpdFRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XG4gICAgICAgICAgICBsZXQgZWRpdFRhc2tOYW1lID0gcHJvbXB0KFwiTmV3IFRhc2sgbmFtZTpcIik7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3JlYXRlTmV3UHJvamVjdC50YXNrLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICBpZihjcmVhdGVOZXdQcm9qZWN0LnRhc2tbaV0uaWQgPT0gZ2V0VGFza0RpdklkKXtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlTmV3UHJvamVjdC50YXNrW2ldLmRlc2NyaXB0aW9uID0gZWRpdFRhc2tOYW1lO1xuXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUYXNrc0Rpdi5pbm5lckhUTUwgPSBcbiAgICAgICAgICAgICAgICAgICAgYFRhc2sgbmFtZTogJHtjcmVhdGVOZXdQcm9qZWN0LmdldERlc2NyaXB0aW9uKClbaV19LFxuICAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHk6ICR7Y3JlYXRlTmV3UHJvamVjdC5nZXRQcmlvKClbaV19LFxuICAgICAgICAgICAgICAgICAgICAgaXQgaXMgZHVlIHRpbGwgJHtjcmVhdGVOZXdQcm9qZWN0LmdldER1ZURhdGUoKVtpXX1gOyAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICBjb25zb2xlLmxvZyhjcmVhdGVOZXdQcm9qZWN0KVxuICAgICAgICBjdXJyZW50VGFza3NEaXYuYXBwZW5kQ2hpbGQoY29tcGxldGVCdXR0b24pO1xuICAgICAgICBjdXJyZW50VGFza3NEaXYuYXBwZW5kQ2hpbGQoZWRpdFRhc2tCdXR0b24pO1xuICAgICAgICBjdXJyZW50VGFza3NEaXYuYXBwZW5kQ2hpbGQoZGVsZXRlVGFza0J1dHRvbik7XG4gICAgICAgIFxuICAgICAgICB9KVxuXG4gICAgICAgIHRhc2tEaXYuYXBwZW5kQ2hpbGQoY3VycmVudFRhc2tzRGl2KTtcbiAgICAgICAgY3VycmVudFRhc2tzRGl2LmFwcGVuZENoaWxkKGNvbXBsZXRlQnV0dG9uKTtcbiAgICAgICAgY3VycmVudFRhc2tzRGl2LmFwcGVuZENoaWxkKGVkaXRUYXNrQnV0dG9uKTtcbiAgICAgICAgY3VycmVudFRhc2tzRGl2LmFwcGVuZENoaWxkKGRlbGV0ZVRhc2tCdXR0b24pO1xufSlcbiBcbiAgICB0YXNrT3B0aW9uc0Rpdi5hcHBlbmRDaGlsZChhZGRMYWJlbCk7XG4gICAgdGFza09wdGlvbnNEaXYuYXBwZW5kQ2hpbGQoYWRkVGFza0Zvcm0pO1xuICAgIHRhc2tPcHRpb25zRGl2LmFwcGVuZENoaWxkKGFkZExhYmVsUHJpbyk7XG4gICAgdGFza09wdGlvbnNEaXYuYXBwZW5kQ2hpbGQoYWRkUHJpb0Zvcm0pO1xuICAgIHRhc2tPcHRpb25zRGl2LmFwcGVuZENoaWxkKGFkZFRhc2tEdWVEYXRlTGFiZWwpO1xuICAgIHRhc2tPcHRpb25zRGl2LmFwcGVuZENoaWxkKGFkZFRhc2tEdWVEYXRlRm9ybSk7XG4gICAgdGFza09wdGlvbnNEaXYuYXBwZW5kQ2hpbGQoYWRkQnV0dG9uKTtcbiAgICB0YXNrRGl2LmFwcGVuZENoaWxkKHRhc2tPcHRpb25zRGl2KTtcblxuICAgIHJldHVybiB0YXNrRGl2O1xufSIsImltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9jb25zdHJ1Y3RvclwiO1xuaW1wb3J0IHsgY3JlYXRlVGFzayB9IGZyb20gXCIuL3Rhc2tzXCI7XG5pbXBvcnQgeyBzdG9yZVByb2plY3QsIGRlbGV0ZVByb2plY3QsIHVwZGF0ZVByb2plY3ROYW1lLCBjaGVja0lmVXNlZH0gZnJvbSBcIi4vc3RvcmFnZVwiO1xuXG5jb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250ZW50XCIpO1xuY29uc3QgcHJvamVjdE5hbWVGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0TmFtZVwiKTtcbmNvbnN0IHN1YkJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3VibWl0XCIpO1xuXG5zdWJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XG4gICAgLy9ET00gZm9yIGFkZGluZyBwcm9qZWN0c1xuICAgIGNvbnN0IHByb2plY3ROYW1lRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBwcm9qZWN0TmFtZURpdi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInByb2plY3ROYW1lRGl2XCIpO1xuICAgIGNvbnN0IHByb2plY3RIZWFkbGluZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHByb2plY3RIZWFkbGluZURpdi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInByb2plY3RIZWFkbGluZVwiKTtcbiAgICBjb25zdCBwcm9qZWN0SDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIik7XG4gICAgbGV0IHRoZU5hbWVJcyA9IHByb2plY3ROYW1lRm9ybS52YWx1ZTtcbiAgICBsZXQgY3JlYXRlTmV3UHJvamVjdCA9IG5ldyBQcm9qZWN0KHRoZU5hbWVJcyk7XG5cbiAgICBwcm9qZWN0SDMuaW5uZXJIVE1MID0gYFByb2plY3QgbmFtZTogJHt0aGVOYW1lSXN9YDtcblxuICAgIGNvbnN0IHRhc2tEaXYgPSBjcmVhdGVUYXNrKGNyZWF0ZU5ld1Byb2plY3QpO1xuXG4gICAgY29uc3QgcmVtb3ZlUHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgcmVtb3ZlUHJvamVjdEJ0bi5pbm5lckhUTUwgPSBcIkRlbGV0ZSBQcm9qZWN0XCI7ICAgXG5cbiAgICBjb25zdCBlZGl0UHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgZWRpdFByb2plY3RCdG4uaW5uZXJIVE1MID0gXCJFZGl0IFByb2plY3RcIjtcblxuICAgIGlmKHN0b3JlUHJvamVjdChjcmVhdGVOZXdQcm9qZWN0KSA9PT1mYWxzZSApe1xuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKHByb2plY3ROYW1lRGl2KTtcbiAgICB9O1xuICAgIHByb2plY3ROYW1lRGl2LmFwcGVuZENoaWxkKHByb2plY3RIZWFkbGluZURpdik7XG4gICAgcHJvamVjdEhlYWRsaW5lRGl2LmFwcGVuZENoaWxkKHByb2plY3RIMylcbiAgICBwcm9qZWN0SGVhZGxpbmVEaXYuYXBwZW5kQ2hpbGQocmVtb3ZlUHJvamVjdEJ0bik7XG4gICAgcHJvamVjdEhlYWRsaW5lRGl2LmFwcGVuZENoaWxkKGVkaXRQcm9qZWN0QnRuKTtcbiAgICBwcm9qZWN0TmFtZURpdi5hcHBlbmRDaGlsZCh0YXNrRGl2KTtcblxuICAgIHJlbW92ZVByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsKCk9PntcbiAgICAgICAgY29udGVudC5yZW1vdmVDaGlsZChwcm9qZWN0TmFtZURpdik7XG4gICAgICAgIGRlbGV0ZVByb2plY3QoY3JlYXRlTmV3UHJvamVjdClcbiAgICB9KVxuXG4gICAgZWRpdFByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XG4gICAgICAgIGxldCBuZXdOYW1lSXMgPSBwcm9tcHQoXCJlbnRlciBuZXcgcHJvamVjdCBuYW1lOlwiKTtcbiAgICAgICAgdXBkYXRlUHJvamVjdE5hbWUoY3JlYXRlTmV3UHJvamVjdCwgbmV3TmFtZUlzKVxuICAgICAgICBjb25zb2xlLmxvZyhuZXdOYW1lSXMpO1xuICAgICAgICB0aGVOYW1lSXMgPSBuZXdOYW1lSXM7XG4gICAgICAgIGNyZWF0ZU5ld1Byb2plY3QucHJvamVjdE5hbWUgPSB0aGVOYW1lSXM7XG5cbiAgICAgICAgcHJvamVjdEgzLmlubmVySFRNTCA9IGBQcm9qZWN0IG5hbWUgaXM6ICR7dGhlTmFtZUlzfWA7XG4gICAgICAgIHByb2plY3RIMy5hcHBlbmRDaGlsZChyZW1vdmVQcm9qZWN0QnRuKTtcbiAgICAgICAgcHJvamVjdEgzLmFwcGVuZENoaWxkKGVkaXRQcm9qZWN0QnRuKTtcbiAgICB9KVxuICAgIFxuICAgIHByb2plY3ROYW1lRm9ybS52YWx1ZSA9IFwiXCI7XG4gICAgY29uc29sZS5sb2coY3JlYXRlTmV3UHJvamVjdCk7XG59KTtcblxuXG4vL0R1cGxpY2F0ZSBjb2RlIHRvIHNob3cgZGVmYXVsdCBwcm9qZWN0IG9uIHBhZ2UgbG9hZFxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCl7XG4gICAgY29uc3QgZGVmYXVsdFByb2plY3QgPSBuZXcgUHJvamVjdChcIkRlZmF1bHQgUHJvamVjdFwiKTtcbiAgICBkaXNwbGF5UHJvamVjdChkZWZhdWx0UHJvamVjdCk7XG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlQcm9qZWN0KHByb2plY3QpIHtcbiAgICBjb25zdCBwcm9qZWN0TmFtZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgcHJvamVjdE5hbWVEaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwcm9qZWN0TmFtZURpdlwiKTtcbiAgICBjb25zdCBwcm9qZWN0SGVhZGxpbmVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBwcm9qZWN0SGVhZGxpbmVEaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJwcm9qZWN0SGVhZGxpbmVcIik7XG4gICAgY29uc3QgcHJvamVjdEgzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xuICAgIHByb2plY3RIMy5pbm5lckhUTUwgPSBgUHJvamVjdCBuYW1lIGlzOiAke3Byb2plY3QucHJvamVjdE5hbWV9YDtcblxuICAgIGNvbnN0IHRhc2tEaXYgPSBjcmVhdGVUYXNrKHByb2plY3QpO1xuXG4gICAgY29uc3QgcmVtb3ZlUHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgcmVtb3ZlUHJvamVjdEJ0bi5pbm5lckhUTUwgPSBcIkRlbGV0ZSBQcm9qZWN0XCI7ICAgXG5cbiAgICBjb25zdCBlZGl0UHJvamVjdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgZWRpdFByb2plY3RCdG4uaW5uZXJIVE1MID0gXCJFZGl0IFByb2plY3RcIjtcblxuICAgIFxuICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQocHJvamVjdE5hbWVEaXYpO1xuICAgIHByb2plY3ROYW1lRGl2LmFwcGVuZENoaWxkKHByb2plY3RIZWFkbGluZURpdik7XG4gICAgcHJvamVjdEhlYWRsaW5lRGl2LmFwcGVuZENoaWxkKHByb2plY3RIMylcbiAgICAvL3Byb2plY3ROYW1lRGl2LmFwcGVuZENoaWxkKHByb2plY3RIMyk7XG4gICAgcHJvamVjdEhlYWRsaW5lRGl2LmFwcGVuZENoaWxkKHJlbW92ZVByb2plY3RCdG4pO1xuICAgIHByb2plY3RIZWFkbGluZURpdi5hcHBlbmRDaGlsZChlZGl0UHJvamVjdEJ0bik7XG4gICAgcHJvamVjdE5hbWVEaXYuYXBwZW5kQ2hpbGQodGFza0Rpdik7XG5cbiAgICByZW1vdmVQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGNvbnRlbnQucmVtb3ZlQ2hpbGQocHJvamVjdE5hbWVEaXYpO1xuICAgIH0pO1xuXG4gICAgZWRpdFByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgbGV0IG5ld05hbWVJcyA9IHByb21wdChcIkVudGVyIG5ldyBwcm9qZWN0IG5hbWU6XCIpO1xuICAgICAgICBjb25zb2xlLmxvZyhuZXdOYW1lSXMpO1xuICAgICAgICBwcm9qZWN0LnByb2plY3ROYW1lID0gbmV3TmFtZUlzO1xuICAgICAgICBwcm9qZWN0SDMuaW5uZXJIVE1MID0gYFByb2plY3QgbmFtZSBpczogJHtuZXdOYW1lSXN9YDtcbiAgICAgICAgcHJvamVjdEgzLmFwcGVuZENoaWxkKHJlbW92ZVByb2plY3RCdG4pO1xuICAgICAgICBwcm9qZWN0SDMuYXBwZW5kQ2hpbGQoZWRpdFByb2plY3RCdG4pO1xuICAgIH0pO1xufVxuXG5cblxuXG4iLCJleHBvcnQgZnVuY3Rpb24gc3RvcmVQcm9qZWN0KHByb2plY3QpIHtcblxuICAgIGxldCBleGlzdGluZ1Byb2plY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlByb2plY3RzXCIpKSB8fCBbXTtcblxuICAgIC8vIENoZWNrIGlmIHRoZSBwcm9qZWN0IHdpdGggdGhlIHNhbWUgbmFtZSBhbHJlYWR5IGV4aXN0c1xuICAgIGNvbnN0IGV4aXN0aW5nUHJvamVjdCA9IGV4aXN0aW5nUHJvamVjdHMuZmluZCgocHJvamVjdE9iaikgPT4ge1xuICAgICAgICByZXR1cm4gcHJvamVjdE9iai5wcm9qZWN0TmFtZSA9PT0gcHJvamVjdC5wcm9qZWN0TmFtZTtcbiAgICB9KTtcblxuICAgIGlmIChleGlzdGluZ1Byb2plY3QpIHtcbiAgICAgICAgLy8gSWYgYSBwcm9qZWN0IHdpdGggdGhlIHNhbWUgbmFtZSBleGlzdHMsIHNob3cgYW4gYWxlcnQgYW5kIHJldHVyblxuICAgICAgICBhbGVydChcIk5hbWVzIGFyZSB0aGUgc2FtZVwiKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgbm8gcHJvamVjdCB3aXRoIHRoZSBzYW1lIG5hbWUgZXhpc3RzLCBhZGQgdGhlIG5ldyBwcm9qZWN0XG4gICAgICAgIGV4aXN0aW5nUHJvamVjdHMucHVzaChwcm9qZWN0KTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJQcm9qZWN0c1wiLCBKU09OLnN0cmluZ2lmeShleGlzdGluZ1Byb2plY3RzKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiUHJvamVjdCBhZGRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cblxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlUHJvamVjdChwcm9qZWN0VG9EZWxldGUpIHtcblxuICAgIGNvbnN0IGV4aXN0aW5nUHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiUHJvamVjdHNcIikpIHx8IFtdO1xuICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGV4aXN0aW5nUHJvamVjdHMpKTtcbiAgICBjb25zb2xlLmxvZyhleGlzdGluZ1Byb2plY3RzLmxlbmd0aClcblxuICAgICBmb3IobGV0IGkgPSAwOyBpIDwgZXhpc3RpbmdQcm9qZWN0cy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICBpZihleGlzdGluZ1Byb2plY3RzW2ldLnByb2plY3ROYW1lPT09cHJvamVjdFRvRGVsZXRlLnByb2plY3ROYW1lKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZGVsZXRpbmcgdGhpc1wiKVxuICAgICAgICAgICAgZXhpc3RpbmdQcm9qZWN0cy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIlByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KGV4aXN0aW5nUHJvamVjdHMpKVxuICAgICAgICAgICAgY29uc29sZS5sb2coZXhpc3RpbmdQcm9qZWN0cylcbiAgICAgICAgIH1cbiAgICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUHJvamVjdE5hbWUocHJvamVjdFRvRWRpdCwgbmV3TmFtZUlzKXtcbiAgICBjb25zdCBleGlzdGluZ1Byb2plY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIlByb2plY3RzXCIpKSB8fCBbXTtcblxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBleGlzdGluZ1Byb2plY3RzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgaWYoZXhpc3RpbmdQcm9qZWN0c1tpXS5wcm9qZWN0TmFtZT09PXByb2plY3RUb0VkaXQucHJvamVjdE5hbWUpe1xuICAgICAgICAgICAgZXhpc3RpbmdQcm9qZWN0c1tpXS5wcm9qZWN0TmFtZSA9IG5ld05hbWVJcztcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4aXN0aW5nUHJvamVjdHNbaV0ucHJvamVjdE5hbWUpXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIlByb2plY3RzXCIsIEpTT04uc3RyaW5naWZ5KGV4aXN0aW5nUHJvamVjdHMpKVxuXG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuIl0sIm5hbWVzIjpbIlByb2plY3QiLCJjb25zdHJ1Y3RvciIsInByb2plY3ROYW1lIiwidGhpcyIsInRhc2siLCJhZGRUYXNrIiwibmV3VGFzayIsInB1c2giLCJkaXNwbGF5VGFzayIsImluZGV4IiwiY29uc29sZSIsImxvZyIsImdldERlc2NyaXB0aW9uIiwibWFwIiwiZGVzY3JpcHRpb24iLCJnZXRQcmlvIiwicHJpb3JpdHkiLCJnZXREdWVEYXRlIiwiZHVlRGF0ZSIsImdldElEIiwiaWQiLCJjcmVhdGVUYXNrIiwiY3JlYXRlTmV3UHJvamVjdCIsImRhdGFDb3VudGVyIiwidGFza0NvdW50ZXIiLCJ0YXNrRGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYWRkVGFza0Zvcm0iLCJzZXRBdHRyaWJ1dGUiLCJhZGRMYWJlbCIsImlubmVySFRNTCIsImNsYXNzTGlzdCIsImFkZCIsImFkZFByaW9Gb3JtIiwib3B0aW9uc0hpZ2giLCJvcHRpb25zVGV4dEhpZ2giLCJjcmVhdGVUZXh0Tm9kZSIsIm9wdGlvbnNNZWQiLCJvcHRpb25zVGV4dE1lZCIsIm9wdGlvbnNMb3ciLCJvcHRpb25zVGV4dExvdyIsImFwcGVuZENoaWxkIiwiYWRkTGFiZWxQcmlvIiwiYWRkVGFza0R1ZURhdGVGb3JtIiwiYWRkVGFza0R1ZURhdGVMYWJlbCIsImFkZEJ1dHRvbiIsInRhc2tPcHRpb25zRGl2IiwiYWRkRXZlbnRMaXN0ZW5lciIsInRhc2tWYWx1ZSIsInZhbHVlIiwicHJpb1ZhbHVlIiwiZHVlRGF0ZVZhbHVlIiwiY3VycmVudFRhc2tzRGl2IiwiZ2V0VGFza0RpdklkIiwiZGF0YXNldCIsImxlbmd0aCIsImNvbXBsZXRlQnV0dG9uIiwiaSIsImNvbnRhaW5zIiwicmVtb3ZlIiwiZGVsZXRlVGFza0J1dHRvbiIsInNwbGljZSIsInJlbW92ZUNoaWxkIiwiZWRpdFRhc2tCdXR0b24iLCJlZGl0VGFza05hbWUiLCJwcm9tcHQiLCJjb250ZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJwcm9qZWN0TmFtZUZvcm0iLCJwcm9qZWN0TmFtZURpdiIsInByb2plY3RIZWFkbGluZURpdiIsInByb2plY3RIMyIsInRoZU5hbWVJcyIsInJlbW92ZVByb2plY3RCdG4iLCJlZGl0UHJvamVjdEJ0biIsInByb2plY3QiLCJleGlzdGluZ1Byb2plY3RzIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImZpbmQiLCJwcm9qZWN0T2JqIiwiYWxlcnQiLCJzZXRJdGVtIiwic3RyaW5naWZ5Iiwic3RvcmVQcm9qZWN0IiwicHJvamVjdFRvRGVsZXRlIiwiZGVsZXRlUHJvamVjdCIsIm5ld05hbWVJcyIsInByb2plY3RUb0VkaXQiLCJ1cGRhdGVQcm9qZWN0TmFtZSIsIndpbmRvdyIsIm9ubG9hZCIsImRpc3BsYXlQcm9qZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==